// ==UserScript==
// @name            AcFun Evolved
// @description     一个强大的AcFun脚本管理器
// @version         2.0.0
// @author          Nick Hsu
// @copyright       2024, Nick Hsu(wenzi7777@1205.moe)
// @license         MIT
// @match           *://*.acfun.cn/*
// @run-at          document-start
// @grant           unsafeWindow
// @grant           GM_getValue
// @grant           GM_setValue
// @grant           GM_deleteValue
// @grant           GM_listValues
// @grant           GM_info
// @grant           GM_xmlhttpRequest
// @connect         raw.githubusercontent.com
// @connect         wenzi7777.github.io
// @connect         cdn.jsdelivr.net
// @connect         acev2-plugins.1205.moe
// @connect         acev2.1205.moe
// @connect         github.com
// @connect         localhost
// @connect         *
// ==/UserScript==
(()=>{var e={42:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},425:e=>{"use strict";e.exports=function(e){return e[1]}},98:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}ByteStream=function(e,t,n){var r=t||0,i=n||e.byteLength;this.bytes=new Uint8Array(e,r,i),this.ptr=0},ByteStream.prototype.peekNumber=function(e){if(e<=0||t(e)!=t(1))return-1;for(var n=0,r=this.ptr+e-1;r>=this.ptr;)n<<=8,n|=this.bytes[r],--r;return n},ByteStream.prototype.readNumber=function(e){var t=this.peekNumber(e);return this.ptr+=e,t},ByteStream.prototype.peekSignedNumber=function(e){var t=this.peekNumber(e),n=Math.pow(2,8*e-1);return t>=n&&(t-=2*n),t},ByteStream.prototype.readSignedNumber=function(e){var t=this.peekSignedNumber(e);return this.ptr+=e,t},ByteStream.prototype.peekBytes=function(e,n){if(e<=0||t(e)!=t(1))return null;var r=this.bytes.subarray(this.ptr,this.ptr+e);return n&&(this.ptr+=e),r},ByteStream.prototype.readBytes=function(e){return this.peekBytes(e,!0)},ByteStream.prototype.peekString=function(e){if(e<=0||t(e)!=t(1))return"";for(var n="",r=this.ptr,i=this.ptr+e;r<i;++r)n+=String.fromCharCode(this.bytes[r]);return n},ByteStream.prototype.readString=function(e){var t=this.peekString(e);return this.ptr+=e,t},e.exports=ByteStream},872:(e,t,n)=>{var r=n(98),i=function(e,t){var n=e.readString(t),r=n.indexOf(String.fromCharCode(0));return-1!=r?n.substr(0,r):n};function a(e){if(this.isValid=!1,this.name=i(e,100),this.mode=i(e,8),this.uid=i(e,8),this.gid=i(e,8),this.size=parseInt(i(e,12),8),this.mtime=i(e,12),this.chksum=i(e,8),this.typeflag=i(e,1),this.linkname=i(e,100),this.maybeMagic=i(e,6),"ustar"==this.maybeMagic?(this.version=i(e,2),this.uname=i(e,32),this.gname=i(e,32),this.devmajor=i(e,8),this.devminor=i(e,8),this.prefix=i(e,155),this.prefix.length&&(this.name=this.prefix+this.name),e.readBytes(12)):e.readBytes(249),this.filename=this.name,this.fileData=null,0==this.typeflag){parseInt(this.size);this.fileData=new Uint8Array(e.bytes.buffer,e.ptr,this.size),this.name.length>0&&this.size>0&&this.fileData&&this.fileData.buffer&&(this.isValid=!0)}else this.typeflag;e.ptr+=this.size;var t=512-e.ptr%512;t>0&&t<512&&e.readBytes(t)}t.P=function(e){for(var t=new r(e),n=[];0!=t.peekNumber(4);){var i=new a(t);i&&i.isValid&&n.push(i)}return n}},654:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceAudioWrapper {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 10px;\n    background-color: #f7f7f7;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    transition: box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out;\n}\n\n.aceAudioWrapper:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceAudioPlayer {\n    width: 100%;\n    max-width: 400px;\n    outline: none;\n    border-radius: 10px;\n    transition: background-color 0.3s ease-in-out;\n}\n\n.aceAudioPlayer::-webkit-media-controls-panel {\n    background-color: #fff;\n    border-radius: 10px;\n}\n\n.aceAudioPlayer::-webkit-media-controls-play-button,\n.aceAudioPlayer::-webkit-media-controls-pause-button,\n.aceAudioPlayer::-webkit-media-controls-mute-button,\n.aceAudioPlayer::-webkit-media-controls-volume-slider,\n.aceAudioPlayer::-webkit-media-controls-timeline {\n    filter: invert(1);\n}\n\n/* 黑夜模式样式 */\n.aceAudioWrapper.aceDark {\n    background-color: #1c1c1e;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);\n}\n\n.aceAudioWrapper.aceDark:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);\n}\n\n.aceAudioWrapper.aceDark .aceAudioPlayer {\n    background-color: #2c2c2e;\n}\n\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-panel {\n    background-color: #2c2c2e;\n}\n\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-play-button,\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-pause-button,\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-mute-button,\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-volume-slider,\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-timeline {\n    filter: invert(0.8);\n}",""]);const s=o},572:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceButton {\n    background-color: #007aff;\n    color: white;\n    border: none;\n    border-radius: 12px;\n    padding: 10px 20px;\n    font-size: 16px;\n    cursor: pointer;\n    transition: background-color 0.3s, transform 0.3s;\n    width: 100%;\n    height: 100%;\n}\n\n.aceButton.hovered {\n    background-color: #005bb5;\n    transform: scale(1.05);\n}\n\n/* 黑夜模式样式 */\n.aceButton.aceDark {\n    background-color: #1c1c1e;\n    color: #f7f7f7;\n}\n\n.aceButton.aceDark.hovered {\n    background-color: #333335;\n    transform: scale(1.05);\n}\n",""]);const s=o},170:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceCheckboxWrapper {\n    display: flex;\n    align-items: center;\n}\n\n.aceCheckboxLabel {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    font-size: 16px;\n    color: #000;\n}\n\n.aceCheckbox {\n    width: 20px;\n    height: 20px;\n    margin-right: 10px;\n    cursor: pointer;\n    border-radius: 4px;\n    appearance: none;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    background-color: #f7f7f7;\n    border: 1px solid #ddd;\n    transition: background-color 0.3s, border-color 0.3s;\n}\n\n.aceCheckbox:checked {\n    background-color: #007aff;\n    border-color: #007aff;\n}\n\n.aceCheckbox:checked::before {\n    content: '';\n    display: block;\n    width: 12px;\n    height: 12px;\n    margin: 4px;\n    background-color: white;\n    border-radius: 2px;\n}\n\n/* 黑夜模式样式 */\n.aceCheckboxWrapper.aceDark .aceCheckboxLabel {\n    color: #f7f7f7;\n}\n\n.aceCheckboxWrapper.aceDark .aceCheckbox {\n    background-color: #333335;\n    border-color: #444;\n}\n\n.aceCheckboxWrapper.aceDark .aceCheckbox:checked {\n    background-color: #007aff;\n    border-color: #007aff;\n}\n\n.aceCheckboxWrapper.aceDark .aceCheckbox:checked::before {\n    background-color: #1c1c1e;\n}\n",""]);const s=o},78:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceColorPickerWrapper {\n    display: flex;\n    align-items: center;\n}\n\n.aceColorPickerLabel {\n    display: flex;\n    align-items: center;\n    font-size: 16px;\n    margin-right: 10px;\n    color: #000;\n}\n\n.aceColorPicker {\n    width: 36px;\n    height: 36px;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: transform 0.3s;\n}\n\n.aceColorPicker:hover {\n    transform: scale(1.1);\n}\n\n/* 黑夜模式样式 */\n.aceColorPickerWrapper.aceDark .aceColorPickerLabel {\n    color: #f7f7f7;\n}\n\n.aceColorPickerWrapper.aceDark .aceColorPicker {\n    background-color: #1c1c1e;\n    border: 1px solid #444;\n}\n\n.aceColorPickerWrapper.aceDark .aceColorPicker:hover {\n    transform: scale(1.1);\n}\n",""]);const s=o},358:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceImageWrapper {\n    overflow: hidden;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    transition: box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out;\n    background-color: #ffffff;\n}\n\n.aceImageWrapper:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceImage {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: 12px;\n}\n\n/* 黑夜模式样式 */\n.aceImageWrapper.aceDark {\n    background-color: rgba(48, 58, 65, 1);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);\n}\n\n.aceImageWrapper.aceDark:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);\n}\n",""]);const s=o},866:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceInputWrapper {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n}\n\n.aceInputLabel {\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #333;\n}\n\n.aceInput {\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    font-size: 14px;\n    transition: border-color 0.3s, box-shadow 0.3s;\n}\n\n.aceInput:focus {\n    border-color: #007aff;\n    box-shadow: 0 0 5px rgba(0, 122, 255, 0.5);\n    outline: none;\n}\n\n/* 黑夜模式样式 */\n.aceInputWrapper.aceDark .aceInputLabel {\n    color: #f7f7f7;\n}\n\n.aceInputWrapper.aceDark .aceInput {\n    background-color: #333335;\n    border: 1px solid #444;\n    color: #f7f7f7;\n}\n\n.aceInputWrapper.aceDark .aceInput:focus {\n    border-color: #007aff;\n    box-shadow: 0 0 5px rgba(0, 122, 255, 0.5);\n}\n",""]);const s=o},32:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceLinkWrapper {\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n}\n\n.aceLink {\n    font-size: 16px;\n    color: #007aff;\n    text-decoration: none;\n    transition: color 0.3s;\n}\n\n.aceLink:hover {\n    color: #005bb5;\n}\n\n/* 黑夜模式样式 */\n.aceLinkWrapper.aceDark .aceLink {\n    color: #5ac8fa; /* 在黑夜模式下使用较浅的蓝色 */\n}\n\n.aceLinkWrapper.aceDark .aceLink:hover {\n    color: #007aff;\n}\n",""]);const s=o},192:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".acePaginationContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 10px 0;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.acePaginationButton {\n    background-color: #007aff;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    padding: 10px;\n    margin: 0 10px;\n    cursor: pointer;\n    font-size: 18px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 40px;\n    height: 40px;\n    transition: background-color 0.2s ease-in-out;\n}\n\n.acePaginationButton:disabled {\n    background-color: #c7c7cc;\n    cursor: not-allowed;\n}\n\n.acePaginationInfo {\n    font-size: 16px;\n    color: #000;\n}\n\n.aceIconChevronLeft:before,\n.aceIconChevronRight:before {\n    content: '';\n    display: inline-block;\n    border: solid white;\n    border-width: 0 2px 2px 0;\n    padding: 5px;\n    margin-top: 2px;\n}\n\n.aceIconChevronLeft:before {\n    transform: rotate(135deg);\n    -webkit-transform: rotate(135deg);\n}\n\n.aceIconChevronRight:before {\n    transform: rotate(-45deg);\n    -webkit-transform: rotate(-45deg);\n}\n\n/* 黑夜模式样式 */\n.acePaginationContainer.aceDark {\n    background-color: #1c1c1e;\n}\n\n.acePaginationContainer.aceDark .acePaginationButton {\n    background-color: #444;\n}\n\n.acePaginationContainer.aceDark .acePaginationButton:disabled {\n    background-color: #555;\n}\n\n.acePaginationContainer.aceDark .acePaginationInfo {\n    color: #f7f7f7;\n}\n",""]);const s=o},286:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceRangeWrapper {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n}\n\n.aceRangeLabel {\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #333;\n}\n\n.aceRange {\n    -webkit-appearance: none;\n    width: 100%;\n    height: 8px;\n    border-radius: 5px;\n    background: #ddd;\n    outline: none;\n    transition: background 0.3s;\n}\n\n.aceRange:hover {\n    background: #ccc;\n}\n\n.aceRange::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    background: #007aff;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n.aceRange::-webkit-slider-thumb:hover {\n    background: #005bb5;\n}\n\n.aceRange::-moz-range-thumb {\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    background: #007aff;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n.aceRange::-moz-range-thumb:hover {\n    background: #005bb5;\n}\n\n/* 黑夜模式样式 */\n.aceRangeWrapper.aceDark .aceRangeLabel {\n    color: #f7f7f7;\n}\n\n.aceRangeWrapper.aceDark .aceRange {\n    background: #444;\n}\n\n.aceRangeWrapper.aceDark .aceRange:hover {\n    background: #555;\n}\n\n.aceRangeWrapper.aceDark .aceRange::-webkit-slider-thumb {\n    background: #5ac8fa;\n}\n\n.aceRangeWrapper.aceDark .aceRange::-webkit-slider-thumb:hover {\n    background: #007aff;\n}\n\n.aceRangeWrapper.aceDark .aceRange::-moz-range-thumb {\n    background: #5ac8fa;\n}\n\n.aceRangeWrapper.aceDark .aceRange::-moz-range-thumb:hover {\n    background: #007aff;\n}\n",""]);const s=o},159:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceSelectWrapper {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n}\n\n.aceSelectLabel {\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #333;\n}\n\n.aceSelect {\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    font-size: 14px;\n    transition: border-color 0.3s, box-shadow 0.3s;\n}\n\n.aceSelect:focus {\n    border-color: #007aff;\n    box-shadow: 0 0 5px rgba(0, 122, 255, 0.5);\n    outline: none;\n}\n\n/* 黑夜模式样式 */\n.aceSelectWrapper.aceDark .aceSelectLabel {\n    color: #f7f7f7;\n}\n\n.aceSelectWrapper.aceDark .aceSelect {\n    background-color: #333335;\n    border: 1px solid #444;\n    color: #f7f7f7;\n}\n\n.aceSelectWrapper.aceDark .aceSelect:focus {\n    border-color: #5ac8fa;\n    box-shadow: 0 0 5px rgba(90, 200, 250, 0.5);\n    outline: none;\n}\n",""]);const s=o},902:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceSizer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transform: translate(-50%, 0) scale(0.8);\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity .2s ease-out, transform .2s ease-out, box-shadow 0.3s ease-in-out, border 0.3s ease-in-out;\n}\n\n.aceSizer.ani {\n    transform: translateX(0) translateY(0) scale(1);\n    opacity: 1;\n    pointer-events: initial;\n}\n\n.aceSizerFilled {\n    background-color: white;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    box-sizing: border-box;\n}\n\n.aceSizerFilled:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceSizerDragHandler {\n    width: 1vw;\n    height: 1vw;\n    max-width: 16px;\n    max-height: 16px;\n    background-color: #888;\n    border-radius: 50%;\n    position: absolute;\n    bottom: 16px;\n    right: 16px;\n    cursor: move;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    transition: background-color .2s ease-out, box-shadow 0.3s ease-in-out;\n}\n\n.aceSizerDragHandler:hover {\n    background-color: #333;\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);\n}\n\n/* 黑夜模式样式 */\n.aceSizer.aceDark .aceSizerFilled {\n    background-color: rgba(48, 58, 65, 1);\n    box-shadow: 0 4px 8px rgba(48, 58, 65, .5);\n}\n\n.aceSizer.aceDark .aceSizerFilled:hover {\n    box-shadow: 0 8px 16px rgba(48, 58, 65, .7);\n}\n\n.aceSizer.aceDark .aceSizerDragHandler {\n    background-color: #555;\n}\n\n.aceSizer.aceDark .aceSizerDragHandler:hover {\n    background-color: #333;\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);\n}\n",""]);const s=o},746:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceTextWrapper {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n}\n\n.aceTextLabel {\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #333;\n}\n\n.aceText {\n    font-size: 16px;\n    color: #000;\n    line-height: 1.5;\n    margin: 0;\n}\n\n/* 黑夜模式样式 */\n.aceTextWrapper.aceDark .aceTextLabel {\n    color: #f7f7f7;\n}\n\n.aceTextWrapper.aceDark .aceText {\n    color: #f7f7f7;\n}\n",""]);const s=o},738:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceVideoWrapper {\n    overflow: hidden;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    transition: box-shadow 0.3s ease-in-out;\n}\n\n.aceVideoWrapper:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceVideoPlayer {\n    width: 100%;\n    height: 100%;\n    border-radius: 12px;\n    outline: none;\n    transition: background-color 0.3s ease-in-out;\n}\n\n.aceVideoPlayer::-webkit-media-controls-panel {\n    background-color: #fff;\n    border-radius: 10px;\n}\n\n.aceVideoPlayer::-webkit-media-controls-play-button,\n.aceVideoPlayer::-webkit-media-controls-pause-button,\n.aceVideoPlayer::-webkit-media-controls-mute-button,\n.aceVideoPlayer::-webkit-media-controls-volume-slider,\n.aceVideoPlayer::-webkit-media-controls-timeline {\n    filter: invert(1);\n}\n\n/* 黑夜模式样式 */\n.aceVideoWrapper.aceDark {\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);\n}\n\n.aceVideoWrapper.aceDark:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);\n}\n\n.aceVideoWrapper.aceDark .aceVideoPlayer::-webkit-media-controls-panel {\n    background-color: #333335;\n}\n\n.aceVideoWrapper.aceDark .aceVideoPlayer::-webkit-media-controls-play-button,\n.aceVideoWrapper.aceDark .aceVideoPlayer::-webkit-media-controls-pause-button,\n.aceVideoWrapper.aceDark.aceVideoPlayer::-webkit-media-controls-mute-button,\n.aceVideoWrapper.aceDark.aceVideoPlayer::-webkit-media-controls-volume-slider,\n.aceVideoWrapper.aceDark.aceVideoPlayer::-webkit-media-controls-timeline {\n    filter: invert(0.8);\n}\n",""]);const s=o},776:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),i=n.n(r),a=n(42),o=n.n(a)()(i());o.push([e.id,".aceWindowWrapper {\n    background-color: white;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    overflow: hidden;\n    transition: box-shadow 0.3s ease-in-out;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n}\n\n.aceWindowWrapper:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceWindowTitleBar {\n    background-color: #f7f7f7;\n    border-bottom: 1px solid #ddd;\n    height: 10%;\n    min-height: 52px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    padding: 0 20px;\n}\n\n.aceWindowTitle {\n    margin: 0;\n    font-size: 16px;\n    color: #333;\n}\n\n.aceWindowContent {\n    padding: 20px;\n    height: 90%;\n}\n\n/* 黑夜模式样式 */\n.aceWindowWrapper.aceDark {\n    background-color: rgba(48, 58, 65, 1);\n    box-shadow: 0 4px 8px rgba(48, 58, 65, 0.5);\n}\n\n.aceWindowWrapper.aceDark:hover {\n    box-shadow: 0 8px 16px rgba(48, 58, 65, 0.7);\n}\n\n.aceWindowWrapper.aceDark .aceWindowTitleBar {\n    background-color: rgba(48, 58, 65, 1);\n    border-bottom: 1px solid #444;\n}\n\n.aceWindowWrapper.aceDark .aceWindowTitle {\n    color: #f7f7f7;\n}\n\n.aceWindowWrapper.aceDark .aceWindowContent {\n    background-color: rgba(48, 58, 65, 1);\n    color: #f7f7f7;\n}\n",""]);const s=o},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],u=a[l]||0,g="".concat(l," ").concat(u);a[l]=u+1;var d=n(g),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(h);else{var p=i(h,r);r.byIndex=s,t.splice(s,0,{identifier:g,updater:p,references:1})}o.push(g)}return o}function i(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=n(a[o]);t[s].references--}for(var c=r(e,i),l=0;l<a.length;l++){var u=n(a[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=c}}},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";const e=new(function(){function e(){this.currentVersion="2.0.0",this.versionTag="Developer Beta",this.environment="Development"}return e.prototype.getCurrentVersion=function(){return this.currentVersion+" "+this.versionTag},e.prototype.getVersionTag=function(){return this.versionTag},e.prototype.getEnvironment=function(){return this.environment},e.prototype.getFullVersion=function(){return this.currentVersion+" "+this.environment+" "+this.versionTag},e.prototype.setCurrentVersion=function(e){var t=e.version;this.currentVersion=t},e.prototype.setVersionTag=function(e){var t=e.tag;this.versionTag=t},e.prototype.setEnvironment=function(e){var t=e.env;this.environment=t},e.prototype.parseVersion=function(e){var t=e.version,n=t.split(" ")[0],r=t.split(" ")[1]+" "+t.split(" ")[2],i=n.split(".").map(Number);return{major:i[0],minor:i[1],patch:i[2],tag:r}},e.prototype.tagPriority=function(e){switch(e.tag){case"Public Stable":return 4;case"Developer Stable":return 3;case"Public Beta":return 2;case"Developer Beta":return 1;default:return 0}},e.prototype.targetTagPriority=function(e){var t=e.tag;return"stable"===e.target?"Public Stable"===t||"Developer Stable"===t?this.tagPriority({tag:t}):0:"Public Beta"===t||"Developer Beta"===t?this.tagPriority({tag:t}):0},e.prototype.compareVersion=function(e){var t=e.version1,n=e.version2,r=e.target,i=this.parseVersion({version:t}),a=this.parseVersion({version:n});return i.major!==a.major?i.major-a.major:i.minor!==a.minor?i.minor-a.minor:i.patch!==a.patch?i.patch-a.patch:this.targetTagPriority({tag:i.tag,target:r})-this.targetTagPriority({tag:a.tag,target:r})},e}());const t=new(function(){function t(){this.environment=e.getEnvironment()}return t.prototype.formatMessage=function(e){var t=e.level,n=e.message,r=(new Date).toISOString();return"%c[".concat(r,"] [").concat(t,"] ").concat(n)},t.prototype.getStackTrace=function(){var e=(new Error).stack;return e?e.split("\n").slice(3).join("\n"):""},t.prototype.log=function(e,t){var n=e.level,r=e.message,i=this.formatMessage({level:n,message:r});"Development"===this.environment?(console.log(i,t),console.log(this.getStackTrace())):console.log(i,t)},t.prototype.success=function(e){var t=e.message;this.log({level:"SUCCESS",message:t},"background: #39c5bb; color: white;")},t.prototype.info=function(e){var t=e.message;this.log({level:"INFO",message:t},"background: blue; color: white;")},t.prototype.error=function(e){var t=e.message;this.log({level:"ERROR",message:t},"background: #fd4c5d; color: white;")},t.prototype.debug=function(e){var t=e.message;"Development"===this.environment&&this.log({level:"DEBUG",message:t},"background: gray; color: white;")},t.prototype.warn=function(e){var t=e.message;this.log({level:"WARN",message:t},"background: tomato; color: white;")},t}());var r,i,a,o,s,c,l,u,g,d,h={},p=[],f=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y=Array.isArray;function M(e,t){for(var n in t)e[n]=t[n];return e}function I(e){var t=e.parentNode;t&&t.removeChild(e)}function m(e,t,n){var i,a,o,s={};for(o in t)"key"==o?i=t[o]:"ref"==o?a=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return v(e,s,i,a,null)}function v(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++a:o,__i:-1,__u:0};return null==o&&null!=i.vnode&&i.vnode(s),s}function b(e){return e.children}function w(e,t){this.props=e,this.context=t}function N(e,t){if(null==t)return e.__?N(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?N(e):null}function T(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return T(e)}}function A(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!_.__r++||s!==i.debounceRendering)&&((s=i.debounceRendering)||c)(_)}function _(){var e,t,n,r,a,s,c,u;for(o.sort(l);e=o.shift();)e.__d&&(t=o.length,r=void 0,s=(a=(n=e).__v).__e,c=[],u=[],n.__P&&((r=M({},a)).__v=a.__v+1,i.vnode&&i.vnode(r),E(n.__P,r,a,n.__n,n.__P.namespaceURI,32&a.__u?[s]:null,c,null==s?N(a):s,!!(32&a.__u),u),r.__v=a.__v,r.__.__k[r.__i]=r,S(c,r,u),r.__e!=s&&T(r)),o.length>t&&o.sort(l));_.__r=0}function k(e,t,n,r,i,a,o,s,c,l,u){var g,d,f,y,M,I=r&&r.__k||p,m=t.length;for(n.__d=c,x(n,t,I),c=n.__d,g=0;g<m;g++)null!=(f=n.__k[g])&&"boolean"!=typeof f&&"function"!=typeof f&&(d=-1===f.__i?h:I[f.__i]||h,f.__i=g,E(e,f,d,i,a,o,s,c,l,u),y=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&U(d.ref,null,f),u.push(f.ref,f.__c||y,f)),null==M&&null!=y&&(M=y),65536&f.__u||d.__k===f.__k?c=D(f,c,e):"function"==typeof f.type&&void 0!==f.__d?c=f.__d:y&&(c=y.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=M}function x(e,t,n){var r,i,a,o,s,c=t.length,l=n.length,u=l,g=0;for(e.__k=[],r=0;r<c;r++)o=r+g,null!=(i=e.__k[r]=null==(i=t[r])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?v(null,i,null,null,null):y(i)?v(b,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?v(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,s=C(i,n,o,u),i.__i=s,a=null,-1!==s&&(u--,(a=n[s])&&(a.__u|=131072)),null==a||null===a.__v?(-1==s&&g--,"function"!=typeof i.type&&(i.__u|=65536)):s!==o&&(s==o-1?g=s-o:s==o+1?g++:s>o?u>c-o?g+=s-o:g--:s<o&&g++,s!==r+g&&(i.__u|=65536))):(a=n[o])&&null==a.key&&a.__e&&!(131072&a.__u)&&(a.__e==e.__d&&(e.__d=N(a)),P(a,a,!1),n[o]=null,u--);if(u)for(r=0;r<l;r++)null!=(a=n[r])&&!(131072&a.__u)&&(a.__e==e.__d&&(e.__d=N(a)),P(a,a))}function D(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=D(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=N(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function z(e,t){return t=t||[],null==e||"boolean"==typeof e||(y(e)?e.some((function(e){z(e,t)})):t.push(e)),t}function C(e,t,n,r){var i=e.key,a=e.type,o=n-1,s=n+1,c=t[n];if(null===c||c&&i==c.key&&a===c.type&&!(131072&c.__u))return n;if(r>(null==c||131072&c.__u?0:1))for(;o>=0||s<t.length;){if(o>=0){if((c=t[o])&&!(131072&c.__u)&&i==c.key&&a===c.type)return o;o--}if(s<t.length){if((c=t[s])&&!(131072&c.__u)&&i==c.key&&a===c.type)return s;s++}}return-1}function j(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||f.test(t)?n:n+"px"}function L(e,t,n,r,i){var a;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||j(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||j(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=u,e.addEventListener(t,a?d:g,a)):e.removeEventListener(t,a?d:g,a);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function O(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=u++;else if(t.t<n.u)return;return n(i.event?i.event(t):t)}}}function E(e,t,n,r,a,o,s,c,l,u){var g,d,h,p,f,I,m,v,N,T,A,_,x,D,z,C,j=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),o=[c=t.__e=n.__e]),(g=i.__b)&&g(t);e:if("function"==typeof j)try{if(v=t.props,N="prototype"in j&&j.prototype.render,T=(g=j.contextType)&&r[g.__c],A=g?T?T.props.value:g.__:r,n.__c?m=(d=t.__c=n.__c).__=d.__E:(N?t.__c=d=new j(v,A):(t.__c=d=new w(v,A),d.constructor=j,d.render=Q),T&&T.sub(d),d.props=v,d.state||(d.state={}),d.context=A,d.__n=r,h=d.__d=!0,d.__h=[],d._sb=[]),N&&null==d.__s&&(d.__s=d.state),N&&null!=j.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=M({},d.__s)),M(d.__s,j.getDerivedStateFromProps(v,d.__s))),p=d.props,f=d.state,d.__v=t,h)N&&null==j.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),N&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(N&&null==j.getDerivedStateFromProps&&v!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(v,A),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(v,d.__s,A)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(v,d.__s,A),N&&null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(p,f,I)}))}if(d.context=A,d.props=v,d.__P=e,d.__e=!1,x=i.__r,D=0,N){for(d.state=d.__s,d.__d=!1,x&&x(t),g=d.render(d.props,d.state,d.context),z=0;z<d._sb.length;z++)d.__h.push(d._sb[z]);d._sb=[]}else do{d.__d=!1,x&&x(t),g=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++D<25);d.state=d.__s,null!=d.getChildContext&&(r=M(M({},r),d.getChildContext())),N&&!h&&null!=d.getSnapshotBeforeUpdate&&(I=d.getSnapshotBeforeUpdate(p,f)),k(e,y(C=null!=g&&g.type===b&&null==g.key?g.props.children:g)?C:[C],t,n,r,a,o,s,c,l,u),d.base=t.__e,t.__u&=-161,d.__h.length&&s.push(d),m&&(d.__E=d.__=null)}catch(e){if(t.__v=null,l||null!=o){for(t.__u|=l?160:32;c&&8===c.nodeType&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,t.__e=c}else t.__e=n.__e,t.__k=n.__k;i.__e(e,t,n)}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Y(n.__e,t,n,r,a,o,s,l,u);(g=i.diffed)&&g(t)}function S(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)U(n[r],n[++r],n[++r]);i.__c&&i.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){i.__e(e,t.__v)}}))}function Y(e,t,n,i,a,o,s,c,l){var u,g,d,p,f,M,m,v=n.props,b=t.props,w=t.type;if("svg"===w?a="http://www.w3.org/2000/svg":"math"===w?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=o)for(u=0;u<o.length;u++)if((f=o[u])&&"setAttribute"in f==!!w&&(w?f.localName===w:3===f.nodeType)){e=f,o[u]=null;break}if(null==e){if(null===w)return document.createTextNode(b);e=document.createElementNS(a,w,b.is&&b),o=null,c=!1}if(null===w)v===b||c&&e.data===b||(e.data=b);else{if(o=o&&r.call(e.childNodes),v=n.props||h,!c&&null!=o)for(v={},u=0;u<e.attributes.length;u++)v[(f=e.attributes[u]).name]=f.value;for(u in v)if(f=v[u],"children"==u);else if("dangerouslySetInnerHTML"==u)d=f;else if("key"!==u&&!(u in b)){if("value"==u&&"defaultValue"in b||"checked"==u&&"defaultChecked"in b)continue;L(e,u,null,f,a)}for(u in b)f=b[u],"children"==u?p=f:"dangerouslySetInnerHTML"==u?g=f:"value"==u?M=f:"checked"==u?m=f:"key"===u||c&&"function"!=typeof f||v[u]===f||L(e,u,f,v[u],a);if(g)c||d&&(g.__html===d.__html||g.__html===e.innerHTML)||(e.innerHTML=g.__html),t.__k=[];else if(d&&(e.innerHTML=""),k(e,y(p)?p:[p],t,n,i,"foreignObject"===w?"http://www.w3.org/1999/xhtml":a,o,s,o?o[0]:n.__k&&N(n,0),c,l),null!=o)for(u=o.length;u--;)null!=o[u]&&I(o[u]);c||(u="value",void 0!==M&&(M!==e[u]||"progress"===w&&!M||"option"===w&&M!==v[u])&&L(e,u,M,v[u],a),u="checked",void 0!==m&&m!==e[u]&&L(e,u,m,v[u],a))}return e}function U(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){i.__e(e,n)}}function P(e,t,n){var r,a;if(i.unmount&&i.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||U(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){i.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&P(r[a],t,n||"function"!=typeof e.type);n||null==e.__e||I(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Q(e,t,n){return this.constructor(e,n)}function R(e,t,n){var a,o,s,c;i.__&&i.__(e,t),o=(a="function"==typeof n)?null:n&&n.__k||t.__k,s=[],c=[],E(t,e=(!a&&n||t).__k=m(b,null,[e]),o||h,h,t.namespaceURI,!a&&n?[n]:o?null:t.firstChild?r.call(t.childNodes):null,s,!a&&n?n:o?o.__e:t.firstChild,a,c),S(s,e,c)}r=p.slice,i={__e:function(e,t,n,r){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},a=0,w.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=M({},this.state),"function"==typeof e&&(e=e(M({},n),this.props)),e&&M(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),A(this))},w.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),A(this))},w.prototype.render=b,o=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function(e,t){return e.__v.__b-t.__v.__b},_.__r=0,u=0,g=O(!1),d=O(!0);var W,B,Z,G,H=0,V=[],F=i,J=F.__b,K=F.__r,q=F.diffed,X=F.__c,$=F.unmount,ee=F.__;function te(e,t){F.__h&&F.__h(B,e,H||t),H=0;var n=B.__H||(B.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ne(e){return H=1,re(he,e)}function re(e,t,n){var r=te(W++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):he(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=B,!B.u)){var i=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter((function(e){return!!e.__c}));if(i.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var o=!1;return i.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),!(!o&&r.__c.props===e)&&(!a||a.call(this,e,t,n))};B.u=!0;var a=B.shouldComponentUpdate,o=B.componentWillUpdate;B.componentWillUpdate=function(e,t,n){if(this.__e){var r=a;a=void 0,i(e,t,n),a=r}o&&o.call(this,e,t,n)},B.shouldComponentUpdate=i}return r.__N||r.__}function ie(e,t){var n=te(W++,3);!F.__s&&de(n.__H,t)&&(n.__=e,n.i=t,B.__H.__h.push(n))}function ae(e){return H=5,oe((function(){return{current:e}}),[])}function oe(e,t){var n=te(W++,7);return de(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function se(){for(var e;e=V.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ue),e.__H.__h.forEach(ge),e.__H.__h=[]}catch(t){e.__H.__h=[],F.__e(t,e.__v)}}F.__b=function(e){B=null,J&&J(e)},F.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ee&&ee(e,t)},F.__r=function(e){K&&K(e),W=0;var t=(B=e.__c).__H;t&&(Z===B?(t.__h=[],B.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(ue),t.__h.forEach(ge),t.__h=[],W=0)),Z=B},F.diffed=function(e){q&&q(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==V.push(t)&&G===F.requestAnimationFrame||((G=F.requestAnimationFrame)||le)(se)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),Z=B=null},F.__c=function(e,t){t.some((function(e){try{e.__h.forEach(ue),e.__h=e.__h.filter((function(e){return!e.__||ge(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],F.__e(n,e.__v)}})),X&&X(e,t)},F.unmount=function(e){$&&$(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{ue(e)}catch(e){t=e}})),n.__H=void 0,t&&F.__e(t,n.__v))};var ce="function"==typeof requestAnimationFrame;function le(e){var t,n=function(){clearTimeout(r),ce&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ce&&(t=requestAnimationFrame(n))}function ue(e){var t=B,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),B=t}function ge(e){var t=B;e.__c=e.__(),B=t}function de(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function he(e,t){return"function"==typeof t?t(e):t}var pe=n(72),fe=n.n(pe),ye=n(825),Me=n.n(ye),Ie=n(659),me=n.n(Ie),ve=n(56),be=n.n(ve),we=n(540),Ne=n.n(we),Te=n(113),Ae=n.n(Te),_e=n(902),ke={};ke.styleTagTransform=Ae(),ke.setAttributes=be(),ke.insert=me().bind(null,"head"),ke.domAPI=Me(),ke.insertStyleElement=Ne();fe()(_e.A,ke);_e.A&&_e.A.locals&&_e.A.locals;var xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xe.apply(this,arguments)};const De=function(e){var n=e.position,r=e.size,i=e.styleObject,a=e.events,o=e.filled,s=e.assignHandler,c=e.children,l=e.draggable,u=void 0!==l&&l,g=e.dark,d=void 0!==g&&g,h=ae(null),p=ae(null);return ie((function(){var e=h.current;if(e&&a)return a.forEach((function(n){var r=n.event,i=n.handler;t.info({message:"Adding event listener for ".concat(r," on ").concat(e)}),e.addEventListener(r,i),t.success({message:"Event listener added for ".concat(r," on ").concat(e)})})),function(){a.forEach((function(n){var r=n.event,i=n.handler;t.info({message:"Removing event listener for ".concat(r," on ").concat(e)}),e.removeEventListener(r,i),t.success({message:"Event listener removed for ".concat(r," on ").concat(e)})}))}}),[a]),ie((function(){if(u&&p.current){var e=h.current,n=p.current,r=!1,i=0,a=0,o=0,s=0,c=function(n){r=!0,i=n.clientX,a=n.clientY,o=e.offsetLeft,s=e.offsetTop,e.style.transform="none",t.info({message:"Dragging started at (".concat(i,", ").concat(a,")")})},l=function(n){if(r){var c=n.clientX-i,l=n.clientY-a,u=o+c,g=s+l,d=e.getBoundingClientRect(),h=window.innerWidth,p=window.innerHeight;u<0&&(u=0),g<0&&(g=0),u+d.width>h&&(u=h-d.width),g+d.height>p&&(g=p-d.height),e.style.left="".concat(u,"px"),e.style.top="".concat(g,"px"),t.info({message:"Dragging at (".concat(n.clientX,", ").concat(n.clientY,")")})}},g=function(){r&&(r=!1,t.success({message:"Dragging ended."}))};return n.addEventListener("mousedown",c),document.addEventListener("mousemove",l),document.addEventListener("mouseup",g),function(){n.removeEventListener("mousedown",c),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",g)}}}),[u]),m("div",{ref:h,className:"aceSizer ".concat(o?"aceSizerFilled":""," ").concat(d?"aceDark":""),"data-tracker":s,style:xe({position:"".concat(n?"absolute":""),top:"".concat(null==n?void 0:n.top,"vh"),right:"".concat(null==n?void 0:n.right,"vw"),bottom:"".concat(null==n?void 0:n.bottom,"vh}"),left:"".concat(null==n?void 0:n.left,"vw"),width:"".concat(null==r?void 0:r.width,"vw"),height:"".concat(null==r?void 0:r.height,"vh")},i)},c,u&&m("div",{ref:p,className:"aceSizerDragHandler"}))};var ze=n(572),Ce={};Ce.styleTagTransform=Ae(),Ce.setAttributes=be(),Ce.insert=me().bind(null,"head"),Ce.domAPI=Me(),Ce.insertStyleElement=Ne();fe()(ze.A,Ce);ze.A&&ze.A.locals&&ze.A.locals;const je=function(e){var t=e.label,n=e.onClick,r=e.dark,i=ne(!1),a=i[0],o=i[1];return m("button",{className:"aceButton ".concat(a?"hovered":""," ").concat(r?"aceDark":""),onClick:n,onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)}},t)};var Le=n(776),Oe={};Oe.styleTagTransform=Ae(),Oe.setAttributes=be(),Oe.insert=me().bind(null,"head"),Oe.domAPI=Me(),Oe.insertStyleElement=Ne();fe()(Le.A,Oe);Le.A&&Le.A.locals&&Le.A.locals;const Ee=function(e){var t=e.title,n=e.children,r=e.dark;return m("div",{className:"aceWindowWrapper ".concat(r?"aceDark":"")},m("div",{className:"aceWindowTitleBar"},m("h1",{className:"aceWindowTitle"},t)),m("div",{className:"aceWindowContent"},n))};var Se=n(866),Ye={};Ye.styleTagTransform=Ae(),Ye.setAttributes=be(),Ye.insert=me().bind(null,"head"),Ye.domAPI=Me(),Ye.insertStyleElement=Ne();fe()(Se.A,Ye);Se.A&&Se.A.locals&&Se.A.locals;const Ue=function(e){var t=e.label,n=e.value,r=e.onChange,i=e.dark;return m("div",{className:"aceInputWrapper ".concat(i?"aceDark":"")},m("label",{className:"aceInputLabel"},t),m("input",{type:"text",className:"aceInput",value:n,onInput:function(e){return r(e.target.value)}}))};var Pe=n(170),Qe={};Qe.styleTagTransform=Ae(),Qe.setAttributes=be(),Qe.insert=me().bind(null,"head"),Qe.domAPI=Me(),Qe.insertStyleElement=Ne();fe()(Pe.A,Qe);Pe.A&&Pe.A.locals&&Pe.A.locals;const Re=function(e){var t=e.label,n=e.checked,r=e.onChange,i=e.dark;return m("div",{className:"aceCheckboxWrapper ".concat(i?"aceDark":"")},m("label",{className:"aceCheckboxLabel"},m("input",{type:"checkbox",className:"aceCheckbox",checked:n,onChange:function(e){return r(e.target.checked)}}),t))};var We=n(159),Be={};Be.styleTagTransform=Ae(),Be.setAttributes=be(),Be.insert=me().bind(null,"head"),Be.domAPI=Me(),Be.insertStyleElement=Ne();fe()(We.A,Be);We.A&&We.A.locals&&We.A.locals;const Ze=function(e){var t=e.label,n=e.options,r=e.value,i=e.onChange,a=e.dark;return m("div",{className:"aceSelectWrapper ".concat(a?"aceDark":"")},m("label",{className:"aceSelectLabel"},t),m("select",{className:"aceSelect",value:r,onChange:function(e){return i(e.target.value)}},n.map((function(e){return m("option",{key:e,value:e},e)}))))};var Ge=n(78),He={};He.styleTagTransform=Ae(),He.setAttributes=be(),He.insert=me().bind(null,"head"),He.domAPI=Me(),He.insertStyleElement=Ne();fe()(Ge.A,He);Ge.A&&Ge.A.locals&&Ge.A.locals;const Ve=function(e){var t=e.label,n=e.color,r=e.onChange,i=e.dark;return m("div",{className:"aceColorPickerWrapper ".concat(i?"aceDark":"")},m("label",{className:"aceColorPickerLabel"},t,m("input",{type:"color",className:"aceColorPicker",value:n,onChange:function(e){return r(e.target.value)}})))};var Fe=n(286),Je={};Je.styleTagTransform=Ae(),Je.setAttributes=be(),Je.insert=me().bind(null,"head"),Je.domAPI=Me(),Je.insertStyleElement=Ne();fe()(Fe.A,Je);Fe.A&&Fe.A.locals&&Fe.A.locals;const Ke=function(e){var t=e.label,n=e.value,r=e.min,i=e.max,a=e.onChange,o=e.dark;return m("div",{className:"aceRangeWrapper ".concat(o?"aceDark":"")},m("label",{className:"aceRangeLabel"},t),m("input",{type:"range",className:"aceRange",value:n,min:r,max:i,onInput:function(e){return a(parseInt(e.target.value))}}))};var qe=n(746),Xe={};Xe.styleTagTransform=Ae(),Xe.setAttributes=be(),Xe.insert=me().bind(null,"head"),Xe.domAPI=Me(),Xe.insertStyleElement=Ne();fe()(qe.A,Xe);qe.A&&qe.A.locals&&qe.A.locals;const $e=function(e){var t=e.label,n=e.text,r=e.dark;return m("div",{className:"aceTextWrapper ".concat(r?"aceDark":"")},t&&m("label",{className:"aceTextLabel"},t),n&&m("p",{className:"aceText"},n))};var et=n(358),tt={};tt.styleTagTransform=Ae(),tt.setAttributes=be(),tt.insert=me().bind(null,"head"),tt.domAPI=Me(),tt.insertStyleElement=Ne();fe()(et.A,tt);et.A&&et.A.locals&&et.A.locals;const nt=function(e){var t=e.src,n=e.alt,r=e.asHTML,i=void 0!==r&&r,a=e.dark;return m("div",{className:"aceImageWrapper ".concat(a?"aceDark":"")},i?m("div",{dangerouslySetInnerHTML:{__html:t}}):m("img",{className:"aceImage",src:t,alt:n}))};var rt=n(738),it={};it.styleTagTransform=Ae(),it.setAttributes=be(),it.insert=me().bind(null,"head"),it.domAPI=Me(),it.insertStyleElement=Ne();fe()(rt.A,it);rt.A&&rt.A.locals&&rt.A.locals;const at=function(e){var t=e.src,n=e.dark;return m("div",{className:"aceVideoWrapper ".concat(n?"aceDark":"")},m("video",{className:"aceVideoPlayer",src:t,controls:!0}))};var ot=n(654),st={};st.styleTagTransform=Ae(),st.setAttributes=be(),st.insert=me().bind(null,"head"),st.domAPI=Me(),st.insertStyleElement=Ne();fe()(ot.A,st);ot.A&&ot.A.locals&&ot.A.locals;const ct=function(e){var t=e.src,n=e.dark;return m("div",{className:"aceAudioWrapper ".concat(n?"aceDark":"")},m("audio",{className:"aceAudioPlayer",src:t,controls:!0}))};var lt=n(32),ut={};ut.styleTagTransform=Ae(),ut.setAttributes=be(),ut.insert=me().bind(null,"head"),ut.domAPI=Me(),ut.insertStyleElement=Ne();fe()(lt.A,ut);lt.A&&lt.A.locals&&lt.A.locals;const gt=function(e){var t=e.label,n=e.href,r=e.dark;return m("div",{className:"aceLinkWrapper ".concat(r?"aceDark":"")},m("a",{className:"aceLink",href:n},t))};var dt=function(){function e(){}return e.prototype.v4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},e}();const ht=new dt;const pt=new(function(){function e(){}return e.prototype.createRoot=function(){var e=document.createElement("div");e.id="ace_v2_wrapper",e.dataset.tracker=ht.v4(),e.dataset.slot="root";var t=document.createElement("div");t.dataset.tracker=ht.v4(),t.dataset.slot="sideMenu",e.appendChild(t);var n=document.createElement("div");return n.dataset.tracker=ht.v4(),n.dataset.slot="plugins",e.appendChild(n),document.body.appendChild(e),{root:e.dataset.tracker,sideMenu:t.dataset.tracker,plugins:n.dataset.tracker}},e.prototype.locateElement=function(e){var t=e.tracker;return document.querySelector('[data-tracker="'.concat(t,'"]'))},e.prototype.injectHTML=function(e){var t=e.HTMLCode,n=document.createElement("div");n.innerHTML=t;var r=ht.v4();return n.dataset.tracker=r,document.body.appendChild(n),r},e.prototype.removeElement=function(e){var t=e.tracker,n=document.querySelector('[data-tracker="'.concat(t,'"]'));n&&n.remove()},e}());var ft=n(192),yt={};yt.styleTagTransform=Ae(),yt.setAttributes=be(),yt.insert=me().bind(null,"head"),yt.domAPI=Me(),yt.insertStyleElement=Ne();fe()(ft.A,yt);ft.A&&ft.A.locals&&ft.A.locals;const Mt=function(e){var t=e.currentPage,n=e.totalPages,r=e.onPageChange,i=e.dark,a=ne(t),o=a[0],s=a[1];ie((function(){s(t)}),[t]);return m("div",{className:"acePaginationContainer ".concat(i?"aceDark":"")},m("button",{className:"acePaginationButton ".concat(1===o?"aceDisabled":""),onClick:function(){if(o>1){var e=o-1;s(e),r(e)}},disabled:1===o},m("i",{className:"aceIconChevronLeft"})),m("span",{className:"acePaginationInfo"},o," / ",n),m("button",{className:"acePaginationButton ".concat(o===n?"aceDisabled":""),onClick:function(){if(o<n){var e=o+1;s(e),r(e)}},disabled:o===n},m("i",{className:"aceIconChevronRight"})))};var It=function(){return It=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},It.apply(this,arguments)},mt=function(e){var t=e.position,n=e.size,r=e.styleObject,i=e.events,a=e.filled,o=e.assignHandler,s=e.draggable,c=e.children;return m(De,{dark:Ho.isDarkMode(),position:t,size:n,styleObject:r,events:i,filled:a,assignHandler:o,draggable:s},c)},vt=function(e){var t=e.title,n=e.children;return m(Ee,{dark:Ho.isDarkMode(),title:t},n)},bt=function(e){var t=e.label,n=e.onClick;return m(je,{dark:Ho.isDarkMode(),label:t,onClick:n})},wt=function(e){var t=e.label,n=e.value,r=e.onChange;return m(Ue,{dark:Ho.isDarkMode(),label:t,value:n,onChange:r})},Nt=function(e){var t=e.label,n=e.checked,r=e.onChange;return m(Re,{dark:Ho.isDarkMode(),label:t,checked:n,onChange:r})},Tt=function(e){var t=e.label,n=e.options,r=e.value,i=e.onChange;return m(Ze,{dark:Ho.isDarkMode(),label:t,options:n,value:r,onChange:i})},At=function(e){var t=e.label,n=e.color,r=e.onChange;return m(Ve,{dark:Ho.isDarkMode(),label:t,color:n,onChange:r})},_t=function(e){var t=e.label,n=e.value,r=e.min,i=e.max,a=e.onChange;return m(Ke,{dark:Ho.isDarkMode(),label:t,value:n,min:r,max:i,onChange:a})},kt=function(e){var t=e.label,n=e.text;return m($e,{dark:Ho.isDarkMode(),label:t,text:n})},xt=function(e){var t=e.src,n=e.alt,r=e.asHTML;return m(nt,{dark:Ho.isDarkMode(),src:t,alt:n,asHTML:r})},Dt=function(e){var t=e.src;return m(at,{dark:Ho.isDarkMode(),src:t})},zt=function(e){var t=e.src;return m(ct,{dark:Ho.isDarkMode(),src:t})},Ct=function(e){var t=e.label,n=e.href;return m(gt,{dark:Ho.isDarkMode(),label:t,href:n})},jt=function(e){var t=e.currentPage,n=e.totalPages,r=e.onPageChange;return m(Mt,{dark:Ho.isDarkMode(),currentPage:t,totalPages:n,onPageChange:r})},Lt=function(e){var t=e.text,n=e.styleObject,r={color:Ho.isDarkMode()?"white":"rgba(48, 58, 65, 1)",backgroundColor:Ho.isDarkMode()?"rgba(48, 58, 65, 1)":"white"};return m("p",{style:It(It({},r),n)},t)},Ot=function(e){var t=e.target,n=e.selector,r=pt.locateElement({tracker:t});requestAnimationFrame((function(){requestAnimationFrame((function(){var e;null===(e=null==r?void 0:r.querySelectorAll(n))||void 0===e||e.forEach((function(e){e.classList.toggle("ani")}))}))}))},Et=function(e){var n=e.item;switch(n.type){case"sizer":var r=n.children.map((function(e){return Et({item:e})}));return mt({position:n.position,size:n.size,styleObject:n.styleObject,events:n.events,assignHandler:n.assignHandler,filled:n.filled,children:r,draggable:n.draggable});case"button":return bt({label:n.text,onClick:n.actions[0]});case"window":var i=n.children.map((function(e){return Et({item:e})}));return vt({title:n.title,children:i});case"text":return kt({label:n.label,text:n.text});case"input":return wt({label:n.label,value:n.value,onChange:n.onChange});case"checkbox":return Nt({label:n.label,checked:n.checked,onChange:n.onChange});case"select":return Tt({label:n.label,options:n.options,value:n.value,onChange:n.onChange});case"colorPicker":return At({label:n.label,color:n.color,onChange:n.onChange});case"range":return _t({label:n.label,value:n.value,min:n.min,max:n.max,onChange:n.onChange});case"image":return xt({src:n.src,alt:n.alt,asHTML:n.asHTML});case"video":return Dt({src:n.src});case"audio":return zt({src:n.src});case"link":return Ct({label:n.label,href:n.href});case"pagination":return jt({currentPage:n.currentPage,totalPages:n.totalPages,onPageChange:n.onPageChange});case"plainText":return Lt({text:n.text,styleObject:n.styleObject});default:return t.error({message:"Unknown item type: ".concat(n.type)}),Lt({text:"Unknown item type"})}},St=function(e){var n=e.canvas;return t.info({message:"Converting canvas to canvas map..."}),n.map((function(e){return Et({item:e})}))},Yt=function(e){var n=e.canvas,r=e.slotElement;t.info({message:"Assembling UI..."});var i=St({canvas:n}),a=ht.v4(),o=document.createElement("div");return o.dataset.tracker=a,r.appendChild(o),{element:m(b,null,i),tracker:a}};const Ut=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(e){var t=e.text;this.canvas=[{type:"sizer",position:{top:48,left:0},size:{width:100,height:4},styleObject:{zIndex:99,backgroundColor:"#ffffff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",justifyContent:"center",alignItems:"center"},children:[{type:"plainText",styleObject:{fontSize:"1vw"},text:t}]}]}]},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){var e=this;this.existed()?(this.destroy(),this.draw(),setTimeout((function(){e.destroy()}),ko.TOAST_DURATION)):(this.tracker=jo.renderUI({canvas:this.canvas,slot:"plugins"}),setTimeout((function(){e.destroy()}),ko.TOAST_DURATION))},e.prototype.destroy=function(){this.existed()&&(jo.unmountUI({tracker:this.tracker}),this.tracker="")},e.prototype.showToast=function(e){var t=this,n=e.text;this.existed()?(this.destroy(),this.showToast({text:n}),setTimeout((function(){t.destroy()}),ko.TOAST_DURATION)):(this.updateCanvas({text:n}),this.tracker=jo.renderUI({canvas:this.canvas,slot:"plugins"}),setTimeout((function(){t.destroy()}),ko.TOAST_DURATION))},e}());var Pt=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},Qt=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Rt=function(){function e(){}return e.prototype.psv=function(e){return Pt(this,arguments,void 0,(function(e){var t,n,r,i,a,o,s,c,l,u,g=e.signature,d=e.pluginSelf;return Qt(this,(function(e){switch(e.label){case 0:return t=new TextEncoder,n=t.encode(d),[4,crypto.subtle.digest("SHA-256",n)];case 1:return r=e.sent(),i=Array.from(new Uint8Array(r)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""),a=g.split("|*ACE*|"),o=a[0],s=a[1],c=o.split("|")[4],l=new Uint8Array(Array.from(atob(s),(function(e){return e.charCodeAt(0)}))),[4,this.importPublicKey({pem:ko.PUBLIC_KEY})];case 2:return u=e.sent(),[4,this.verifySignature({publicKey:u,data:n,signature:l})];case 3:return[2,e.sent()&&c===i]}}))}))},e.prototype.importPublicKey=function(e){var t=e.pem,n=this.pemToBinaryDer(t);return window.crypto.subtle.importKey("spki",n,{name:"RSA-PSS",hash:{name:"SHA-256"}},!0,["verify"])},e.prototype.pemToBinaryDer=function(e){var t=e.pem,n=t.substring(26,t.length-24),r=atob(n);return new Uint8Array(Array.from(r,(function(e){return e.charCodeAt(0)})))},e.prototype.verifySignature=function(e){return Pt(this,arguments,void 0,(function(e){var t=e.publicKey,n=e.data,r=e.signature;return Qt(this,(function(e){switch(e.label){case 0:return[4,window.crypto.subtle.verify({name:"RSA-PSS",saltLength:32},t,r,n)];case 1:return[2,e.sent()]}}))}))},e}();const Wt=new Rt;const Bt=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(){this.canvas=[{type:"sizer",position:{top:48,left:0},size:{width:100,height:4},styleObject:{zIndex:99,backgroundColor:"#ffffff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",justifyContent:"center",alignItems:"center"},children:[{type:"plainText",styleObject:{fontSize:"1vw"},text:Vo.t({key:"loading-data"})}]}]}]},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):(this.updateCanvas(),this.tracker=jo.renderUI({canvas:this.canvas,slot:"plugins"}))},e.prototype.destroy=function(){this.existed()&&(jo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());var Zt=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Gt=[/^https:\/\/www\.acfun\.cn\/member\/favourite\/folder\/(\d+)/],Ht=[/^https:\/\/www\.acfun\.cn\/v\/(ac\d+)/],Vt=[/^https:\/\/www\.acfun\.cn\/bangumi\/(aa\d+)/],Ft=[/^https:\/\/live\.acfun\.cn\/live\/(\d+)/],Jt=[/^https:\/\/live\.acfun\.cn\/?$/],Kt=[/^https:\/\/www\.acfun\.cn\/bangumilist$/],qt=[/^https:\/\/www\.acfun\.cn\/$/,/^https:\/\/www\.acfun\.cn\/v\/list(?!63$|184$|110$|73$|164$|74$|75$)(\d+)\/index\.htm$/],Xt=[/^https:\/\/www\.acfun\.cn\/rank\/list$/],$t=[/^https:\/\/www\.acfun\.cn\/face-catcher$/],en=[/^https:\/\/www\.acfun\.cn\/app\/?$/],tn=[/^https:\/\/www\.acfun\.cn\/member\/?$/],nn=[/^https:\/\/member\.acfun\.cn\/?$/],rn=[/^https:\/\/message\.acfun\.cn\/?$/],an=[/^https:\/\/www\.acfun\.cn\/member\/feeds\/?$/],on=[/^https:\/\/www\.acfun\.cn\/u\/(\d+)/],sn={"*":Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt([],Gt,!0),Ht,!0),Vt,!0),Ft,!0),Jt,!0),Kt,!0),qt,!0),Xt,!0),$t,!0),en,!0),tn,!0),nn,!0),rn,!0),an,!0),on,!0),favorite:Gt,videoPlayer:Ht,bangumiPlayer:Vt,livePlayer:Ft,player:Zt(Zt(Zt([],Ht,!0),Vt,!0),Ft,!0),livePage:Jt,bangumiList:Kt,main:qt,ranking:Xt,faceCatcher:$t,downloadApp:en,member:tn,uploadCenter:nn,message:rn,feeds:an,channel:on},cn=function(){function e(){this.everyNodesObserver={observer:null,config:null,callbacks:[]}}return e.prototype.resolveTargets=function(e){var t=[];return e.forEach((function(e){if(e instanceof HTMLElement)t.push(e);else{var n=pt.locateElement({tracker:e});n?t.push(n):document.querySelectorAll(e).forEach((function(e){return t.push(e)}))}})),t},e.prototype.mutationObserve=function(e){var t=e.targets,n=e.config,r=e.callback,i=new MutationObserver(r);return this.resolveTargets(t).forEach((function(e){return i.observe(e,n)})),r([],i),[i,n]},e.prototype.childList=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!0,subtree:!1,attributes:!1},callback:n})},e.prototype.childListSubtree=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!0,subtree:!0,attributes:!1},callback:n})},e.prototype.attributes=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!1,subtree:!1,attributes:!0},callback:n})},e.prototype.attributesSubtree=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!1,subtree:!0,attributes:!0},callback:n})},e.prototype.characterData=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!1,subtree:!1,attributes:!1,characterData:!0},callback:n})},e.prototype.characterDataSubtree=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!1,subtree:!0,attributes:!1,characterData:!0},callback:n})},e.prototype.allMutationsOn=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!0,subtree:!0,attributes:!0,characterData:!0},callback:n})},e.prototype.intersectionObserve=function(e){var t=e.targets,n=e.config,r=e.callback,i=new IntersectionObserver(r,n);return this.resolveTargets(t).forEach((function(e){return i.observe(e)})),[i,n]},e.prototype.visible=function(e){var t=e.target,n=e.callback;return this.intersectionObserve({targets:[t],config:{},callback:n})},e.prototype.visibleInside=function(e){var t=e.target,n=e.container,r=e.margin,i=e.callback;return this.intersectionObserve({targets:[t],config:{root:n,rootMargin:r},callback:i})},e.prototype.resizeObserve=function(e){var t=e.targets,n=e.config,r=e.callback,i=new ResizeObserver(r);return this.resolveTargets(t).forEach((function(e){return i.observe(e,n)})),[i,n]},e.prototype.sizeChange=function(e){var t=e.target,n=e.callback;return this.resizeObserve({targets:[t],config:{box:"border-box"},callback:n})},e.prototype.setupUrlChangeListener=function(){var e=window.location.href;this.allMutations((function(){return function(){var t=window.location.href;if(e!==t){var n=new CustomEvent("urlChange",{detail:t});window.dispatchEvent(n),e=t}}()}))},e.prototype.urlChange=function(e,t){this.setupUrlChangeListener(),e(document.URL),window.addEventListener("urlChange",(function(){return e(document.URL)}),t)},e.prototype.allMutations=function(e){var t=this;if(this.everyNodesObserver.observer)this.everyNodesObserver.callbacks.push(e);else{this.everyNodesObserver.callbacks.push(e);var n=this.mutationObserve({targets:[document.body],config:{childList:!0,subtree:!0,attributes:!0,characterData:!0},callback:function(e){return t.everyNodesObserver.callbacks.forEach((function(n){return n(e,t.everyNodesObserver.observer)}))}}),r=n[0],i=n[1];this.everyNodesObserver.observer=r,this.everyNodesObserver.config=i}return this.everyNodesObserver},e}();const ln=new cn;var un=function(){function e(){this.channels=new Map,this.debounceMap=new Map}return e.prototype.start=function(){t.info({message:"IPCService is starting..."})},e.prototype.stop=function(){t.info({message:"IPCService is stopping..."}),this.channels.clear(),this.debounceMap.clear()},e.prototype.registerChannel=function(e){var n=e.channel;this.channels.has(n)?t.warn({message:"Channel ".concat(n," is already registered.")}):(this.channels.set(n,[]),t.info({message:"Channel ".concat(n," registered.")}))},e.prototype.unregisterChannel=function(e){var n=e.channel;this.channels.has(n)?(this.channels.delete(n),this.debounceMap.delete(n),t.info({message:"Channel ".concat(n," completely unregistered.")})):t.warn({message:"Channel ".concat(n," is not registered.")})},e.prototype.listen=function(e){var n=e.channel,r=e.handler,i=e.manifest;if(this.channels.has(n)){var a=this.channels.get(n),o=a.find((function(e){return e.handler===r&&e.pluginId===i.id}));o?t.warn({message:"Handler from ".concat(i.id," is already registered for channel ").concat(n,".")}):(a.push({handler:r,pluginId:i.id}),t.info({message:"Handler from ".concat(i.id," added to channel ").concat(n,".")}))}else t.error({message:"Channel ".concat(n," is not registered.")})},e.prototype.removeListener=function(e){var n=e.channel,r=e.handler,i=e.manifest;if(this.channels.has(n)){var a=this.channels.get(n).filter((function(e){return e.handler!==r||e.pluginId!==i.id}));a.length>0?(this.channels.set(n,a),t.info({message:"Handler from ".concat(i.id," removed from channel ").concat(n,".")})):(this.channels.delete(n),t.info({message:"Channel ".concat(n," completely unregistered (last handler was from ").concat(i.id,").")}))}else t.error({message:"Channel ".concat(n," is not registered.")})},e.prototype.sendMessage=function(e){var n=this,r=e.channel,i=e.data;if(this.channels.has(r)){this.debounceMap.has(r)&&clearTimeout(this.debounceMap.get(r));var a=setTimeout((function(){n.channels.get(r).forEach((function(e){var n=e.handler,a=e.pluginId;n(i),t.info({message:"Message sent to handler in channel ".concat(r," registered by ").concat(a,".")})}))}),ko.DEBOUNCE_DURATION);this.debounceMap.set(r,a)}else t.error({message:"Channel ".concat(r," is not registered.")})},e}();const gn=new un;function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function hn(e,t){for(var n in t)e[n]=t[n];return e}function pn(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function fn(e,t){this.props=e,this.context=t}(fn.prototype=new w).isPureReactComponent=!0,fn.prototype.shouldComponentUpdate=function(e,t){return pn(this.props,e)||pn(this.state,t)};var yn=i.__b;i.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),yn&&yn(e)};"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var Mn=i.__e;i.__e=function(e,t,n,r){if(e.then)for(var i,a=t;a=a.__;)if((i=a.__c)&&i.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t);Mn(e,t,n,r)};var In=i.unmount;function mn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=hn({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return mn(e,t,n)}))),e}function vn(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return vn(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function bn(){this.__u=0,this.t=null,this.__b=null}function wn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Nn(){this.u=null,this.o=null}i.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),In&&In(e)},(bn.prototype=new w).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=wn(r.__v),a=!1,o=function(){a||(a=!0,n.__R=null,i?i(s):s())};n.__R=o;var s=function(){if(! --r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=vn(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(o,o)},bn.prototype.componentWillUnmount=function(){this.t=[]},bn.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=mn(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&m(b,null,e.fallback);return i&&(i.__u&=-33),[m(b,null,t.__a?null:e.children),i]};var Tn=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(Nn.prototype=new w).__a=function(e){var t=this,n=wn(t.__v),r=t.o.get(e);return r[0]++,function(i){var a=function(){t.props.revealOrder?(r.push(i),Tn(t,e,r)):i()};n?n(a):a()}},Nn.prototype.render=function(e){this.u=null,this.o=new Map;var t=z(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Nn.prototype.componentDidUpdate=Nn.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Tn(e,n,t)}))};var An="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,_n=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,kn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,xn=/[A-Z0-9]/g,Dn="undefined"!=typeof document,zn=function(e){return("undefined"!=typeof Symbol&&"symbol"==dn(Symbol())?/fil|che|rad/:/fil|che|ra/).test(e)};w.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(w.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Cn=i.event;function jn(){}function Ln(){return this.cancelBubble}function On(){return this.defaultPrevented}i.event=function(e){return Cn&&(e=Cn(e)),e.persist=jn,e.isPropagationStopped=Ln,e.isDefaultPrevented=On,e.nativeEvent=e};var En={enumerable:!1,configurable:!0,get:function(){return this.class}},Sn=i.vnode;i.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,r={};for(var i in t){var a=t[i];if(!("value"===i&&"defaultValue"in t&&null==a||Dn&&"children"===i&&"noscript"===n||"class"===i||"className"===i)){var o=i.toLowerCase();"defaultValue"===i&&"value"in t&&null==t.value?i="value":"download"===i&&!0===a?a="":"translate"===o&&"no"===a?a=!1:"ondoubleclick"===o?i="ondblclick":"onchange"!==o||"input"!==n&&"textarea"!==n||zn(t.type)?"onfocus"===o?i="onfocusin":"onblur"===o?i="onfocusout":kn.test(i)?i=o:-1===n.indexOf("-")&&_n.test(i)?i=i.replace(xn,"-$&").toLowerCase():null===a&&(a=void 0):o=i="oninput","oninput"===o&&r[i=o]&&(i="oninputCapture"),r[i]=a}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=z(t.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=z(t.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",En)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(e),e.$$typeof=An,Sn&&Sn(e)};var Yn=i.__r;i.__r=function(e){Yn&&Yn(e),e.__c};var Un=i.diffed;i.diffed=function(e){Un&&Un(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value),null};const Pn="data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA0OTc3OTg1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTM1NzciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNNDE5LjYwOTAyMyAwLjQ5OTk1MWM0NC45OTU2MDYgMC4wOTk5OSA4Ny4xOTE0ODUgMjIuMTk3ODMyIDExMi44ODg5NzUgNTkuMDk0MjI5IDI1Ljg5NzQ3MSAzNy4wOTYzNzcgMzIuMzk2ODM2IDg0LjM5MTc1OSAxNy40OTgyOTEgMTI3LjA4NzU4OWgxOTIuMzgxMjEzYzI0LjQ5NzYwOCAwIDQ3Ljg5NTMyMyA5Ljc5OTA0MyA2NS4xOTM2MzQgMjcuMTk3MzQ0IDE3LjI5ODMxMSAxNy40OTgyOTEgMjYuOTk3MzY0IDQxLjA5NTk4NyAyNi45OTczNjMgNjUuNjkzNTg1djE5NC4wODEwNDdjNTcuNDk0Mzg1LTIwLjU5Nzk4OCAxMjEuNzg4MTA3LTAuODk5OTEyIDE1Ny43ODQ1OTIgNDguMzk1Mjc0IDM2LjI5NjQ1NSA0OS40OTUxNjYgMzYuMjk2NDU1IDExNi43ODg1OTUgMCAxNjYuMjgzNzYxLTM2LjA5NjQ3NSA0OS4yOTUxODYtMTAwLjI5MDIwNiA2OC45OTMyNjItMTU3Ljc4NDU5MiA0OC4zOTUyNzR2MTk0LjA4MTA0N2MwLjA5OTk5IDI0LjU5NzU5OC05LjU5OTA2MyA0OC4yOTUyODQtMjYuODk3MzczIDY1Ljg5MzU2NS0xNy4xOTgzMiAxNy40OTgyOTEtNDAuNjk2MDI2IDI3LjI5NzMzNC02NS4yOTM2MjQgMjcuMjk3MzM0aC0xOTEuOTgxMjUyYzIwLjM5ODAwOC01Ny43OTQzNTYgMC44OTk5MTItMTIyLjE4ODA2OC00OC4wOTUzMDMtMTU4Ljk4NDQ3NC00OC44OTUyMjUtMzYuNDk2NDM2LTExNS44ODg2ODMtMzYuNDk2NDM2LTE2NC43ODM5MDggMC00OC45OTUyMTUgMzYuNzk2NDA3LTY4LjQ5MzMxMSAxMDEuMTkwMTE4LTQ4LjA5NTMwMyAxNTguOTg0NDc0SDk2Ljc0MDU1M2MtMjQuNDk3NjA4IDAtNDcuOTk1MzEzLTkuODk5MDMzLTY1LjI5MzYyNC0yNy4yOTczMzQtMTcuMjk4MzExLTE3LjQ5ODI5MS0yNi45OTczNjQtNDEuMTk1OTc3LTI2Ljg5NzM3My02NS44OTM1NjVWNzM3LjUyNzk3NmM1Ny4zOTQzOTUgMjAuMjk4MDE4IDEyMS4yODgxNTUgMC40OTk5NTEgMTU3LjA4NDY1OS00OC43OTUyMzUgMzUuOTk2NDg1LTQ5LjI5NTE4NiAzNS45OTY0ODUtMTE2LjE4ODY1MyAwLTE2NS41ODM4My0zNS43OTY1MDQtNDkuMTk1MTk2LTk5LjY5MDI2NS02OS4wOTMyNTMtMTU3LjA4NDY1OS00OC43OTUyMzVWMjgwLjQ3MjYxYy0wLjI5OTk3MS01MS4wOTUwMSA0MC44OTYwMDYtOTIuNzkwOTM4IDkxLjk5MTAxNi05My4wOTA5MDloMTkyLjY4MTE4NGMtMTQuOTk4NTM1LTQyLjY5NTgzLTguNDk5MTctODkuOTkxMjEyIDE3LjQ5ODI5MS0xMjcuMDg3NTg5IDI1Ljc5NzQ4MS0zNi44OTYzOTcgNjcuOTkzMzYtNTguODk0MjQ5IDExMi45ODg5NjYtNTguODk0MjQ5VjAuMjk5OTcxbC0wLjA5OTk5IDAuMTk5OTh6IgogICAgICAgICAgcC1pZD0iOTM1NzgiPjwvcGF0aD4KPC9zdmc+";var Qn=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},Rn=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const Wn=new(function(){function e(){this.manifest={icon:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA0OTI3NzM3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTMzNzUiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNNjQzLjQxMzMzMyAxODMuMjUzMzMzYzAuMDQyNjY3IDAtMC4xNzA2NjcgMC40MjY2NjctMC44MTA2NjYgMS4xNTIgMC40MjY2NjctMC44MTA2NjcgMC43NjgtMS4xNTIgMC44MTA2NjYtMS4xNTJ6IG0tMjAuNTY1MzMzIDE0LjM3ODY2N2MtMjQuNTc2LTEyLjQ1ODY2Ny02My41MzA2NjctMjIuNDg1MzMzLTExMC44NDgtMjIuNDg1MzMzLTQ3LjM2IDAtODYuMzE0NjY3IDEwLjAyNjY2Ny0xMTAuODQ4IDIyLjQ4NTMzMyAyNC41MzMzMzMgMTIuMzczMzMzIDYzLjUzMDY2NyAyMi40NDI2NjcgMTEwLjg0OCAyMi40NDI2NjcgNDcuMzYgMCA4Ni4yNzItMTAuMDI2NjY3IDExMC44NDgtMjIuNDQyNjY3ek0zODAuNTg2NjY3IDE4My4yNTMzMzNjMC4wNDI2NjcgMCAwLjM4NCAwLjM0MTMzMyAwLjgxMDY2NiAxLjE1Mi0wLjY0LTAuNzI1MzMzLTAuODUzMzMzLTEuMTA5MzMzLTAuODUzMzMzLTEuMTUyek02NDAgMzA4LjkwNjY2N3YtMjEuNDYxMzM0Yy0zNS42NjkzMzMgMTQuMDgtNzkuOTU3MzMzIDIyLjQ0MjY2Ny0xMjggMjIuNDQyNjY3cy05Mi4zMzA2NjctOC4zNjI2NjctMTI4LTIyLjQ0MjY2N3Y0NS4zOTczMzRhMzcuNDYxMzMzIDM3LjQ2MTMzMyAwIDAgMCAxLjE5NDY2NyAwLjgxMDY2NmMxMS4zNDkzMzMgNy40MjQgNDQuNTAxMzMzIDIxLjE2MjY2NyAxMjYuODA1MzMzIDIxLjE2MjY2N3MxMTUuNDU2LTEzLjczODY2NyAxMjYuODA1MzMzLTIxLjE2MjY2N0EzNC40MzIgMzQuNDMyIDAgMCAwIDY0MCAzMzIuOHYtMjEuODQ1MzMzLTIuMDQ4eiBtODAuMTI4IDU5LjM5MmE3Ny40ODI2NjcgNzcuNDgyNjY3IDAgMCAxLTIuNTYgNS40NjEzMzNjLTYuNTI4IDEyLjkyOC0xNy40MDggMjUuNDcyLTMzLjcwNjY2NyAzNi4xMzg2NjctMzEuMzE3MzMzIDIwLjUyMjY2Ny04My40OTg2NjcgMzQuNzMwNjY3LTE3MS44NjEzMzMgMzQuNzMwNjY2LTg4LjM2MjY2NyAwLTE0MC41NDQtMTQuMjA4LTE3MS44NjEzMzMtMzQuNzMwNjY2LTE2LjI5ODY2Ny0xMC42NjY2NjctMjcuMTc4NjY3LTIzLjIxMDY2Ny0zMy43NDkzMzQtMzYuMTM4NjY3YTcyLjgzMiA3Mi44MzIgMCAwIDEtNi45MTItMjAuNjkzMzMzTDE3MC42NjY2NjcgNDA2LjUyOHY1LjcxNzMzM2wzNDEuMzMzMzMzIDExOS43NjUzMzQgMzQxLjMzMzMzMy0xMTkuNzY1MzM0VjQwOS42bC0xMzMuMjA1MzMzLTQxLjI1ODY2N3pNMzIxLjcwNjY2NyAzNDMuODkzMzMzSDM0MS4zMzMzMzNoLTE5LjU0MTMzM3pNMjk5Ljg2MTMzMyAyMDkuNDkzMzMzQzI5OS4wOTMzMzMgMjEyLjkwNjY2NyAyOTguNjY2NjY3IDIxNi40NDggMjk4LjY2NjY2NyAyMjAuMDc0NjY3djM2Ljc3ODY2NkwxMTIuMzQxMzMzIDMzNC4xNjUzMzNhNDQuOTI4IDQ0LjkyOCAwIDAgMC0yNy4wMDggNDEuODEzMzM0djM2OS44MzQ2NjZjMCAxOC44NTg2NjcgMTEuMTc4NjY3IDM1LjcxMiAyNy45ODkzMzQgNDIuMTU0NjY3bDM4NCAxNDcuOTY4YTQwLjY2MTMzMyA0MC42NjEzMzMgMCAwIDAgMjkuMzU0NjY2IDBsMzg0LTE0Ny45NjhjMTYuODEwNjY3LTYuNDQyNjY3IDI3Ljk4OTMzMy0yMy4yOTYgMjcuOTg5MzM0LTQyLjE1NDY2N3YtMzAwLjU4NjY2Ni02OS4yOTA2NjdjMC0xOS45MjUzMzMtMTIuNDU4NjY3LTM3LjQ2MTMzMy0zMC42MzQ2NjctNDMuMDkzMzMzTDcyNS4zMzMzMzMgMjc2LjMwOTMzM1YyMjAuMDc0NjY3YzAtMy42MjY2NjctMC40MjY2NjctNy4xNjgtMS4xOTQ2NjYtMTAuNTM4NjY3IDAuNzY4LTMuOTI1MzMzIDEuMTk0NjY3LTcuODkzMzMzIDEuMTk0NjY2LTExLjk0NjY2N0M3MjUuMzMzMzMzIDEzNS42MzczMzMgNjI5Ljc2IDg1LjMzMzMzMyA1MTIgODUuMzMzMzMzUzI5OC42NjY2NjcgMTM1LjU5NDY2NyAyOTguNjY2NjY3IDE5Ny42MzJjMCA0LjAxMDY2NyAwLjQyNjY2NyA3Ljk3ODY2NyAxLjE5NDY2NiAxMS45MDR6TTE3MC42NjY2NjcgNzE0LjQxMDY2N3YtMjA3LjQ0NTMzNGwyOTguNjY2NjY2IDEwNC43ODkzMzR2MjE3LjcyOGwtMjk4LjY2NjY2Ni0xMTUuMDcyeiBtMzg0IDExNS4wNzJsMjk4LjY2NjY2Ni0xMTUuMDcydi0yMDcuNDg4bC0yOTguNjY2NjY2IDEwNC44MzJ2MjE3LjcyOHoiCiAgICAgICAgICBmaWxsPSIjMmMyYzJjIiBwLWlkPSI5MzM3NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMjMuYTk0YzNhODFObzRmeFIiCiAgICAgICAgICBjbGFzcz0ic2VsZWN0ZWQiPjwvcGF0aD4KPC9zdmc+",name:"Plugin Store",id:"@wenzi7777/acev2_plugin_store",versions:["0.0.1"],description:"AcFun Evolved V2 插件商店。",createdAt:new Date("2024-08-09").getTime()+"",updatedAt:(new Date).getTime()+"",author:"wenzi7777",copyright:"(c)2024 wenzi7777, licensed under the MIT License.",requestedAPIs:[],website:"https://acev2.1205.moe/",trigger:{receiveHandler:!0,matches:["*"]}},this.handler="",this.tracker="",this.canvas=[],this.currentPage=1,this.totalPages=10,this.bigManifest=null}return e.prototype.wakeUp=function(){var e=this;gn.listen({channel:"runtime:launchpad",handler:function(t){return e.render(t)},manifest:this.manifest})},e.prototype.getBigManifest=function(){return Qn(this,void 0,void 0,(function(){var e,t,n;return Rn(this,(function(r){switch(r.label){case 0:return e=this,[4,Qo.getJson({url:ko.bigManifestURL()})];case 1:return e.bigManifest=r.sent(),t=null===(n=this.bigManifest)||void 0===n?void 0:n.length,this.totalPages=Math.ceil(t||1/ko.PAGE_SIZE),this.currentPage=1,[2]}}))}))},e.prototype.updateCanvas=function(e){return Qn(this,arguments,void 0,(function(e){var t,n,r,i,a=this,o=e.currentPage,s=e.totalPages;return Rn(this,(function(e){switch(e.label){case 0:return[4,this.getBigManifest()];case 1:return e.sent(),(null===(n=this.bigManifest)||void 0===n?void 0:n.length)>ko.PAGE_SIZE&&(this.bigManifest=null===(r=this.bigManifest)||void 0===r?void 0:r.slice((this.currentPage-1)*ko.PAGE_SIZE,this.currentPage*ko.PAGE_SIZE)),t=[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"100%",height:"100%"},children:null===(i=this.bigManifest)||void 0===i?void 0:i.map((function(e){var t=e.icon,n=t.startsWith("<svg");return{type:"sizer",styleObject:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"10px",cursor:"pointer"},events:[{event:"click",handler:function(){return a.openDetailsPanel({manifest:e})}}],children:[{type:"image",src:n?t:"default"===t?Pn:t,asHTML:n},{type:"text",label:e.name+" "+e.id,text:e.description}]}}))}],this.canvas=[{type:"sizer",styleObject:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"80%",flexGrow:1},children:t},{type:"sizer",styleObject:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"20%",flexGrow:1},children:[{type:"pagination",currentPage:o||this.currentPage,totalPages:s||this.totalPages,onPageChange:function(e){return a.currentPage+=1}}]}],[2]}}))}))},e.prototype.openDetailsPanel=function(e){var t=this,n=e.manifest,r=n.icon,i=r.startsWith("<svg"),a=i?r:"default"===r?Pn:r,o=jo.renderUI({canvas:[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},filled:!0,draggable:!0,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",alignItems:"center",justifyContent:"space-around",padding:"1vw"},children:[{type:"sizer",styleObject:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[{type:"sizer",styleObject:{width:"32px",height:"32px"},children:[{type:"image",asHTML:i,src:a}]},{type:"text",label:Vo.t({key:"developer"})+" "+n.author,text:n.name+" | "+n.id}]},{type:"sizer",styleObject:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1vw"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:[{type:"text",label:Vo.t({key:"description"}),text:n.description},{type:"text",label:Vo.t({key:"latest-version"}),text:n.versions[n.versions.length-1]},{type:"text",label:Vo.t({key:"requested-apis"}),text:n.requestedAPIs.join(", ")}]},{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:[{type:"text",label:Vo.t({key:"matches"}),text:n.trigger.matches.join(", ")},{type:"text",label:Vo.t({key:"created-at"})+" "+Fo.toReadableTime({timestamp:parseInt(n.createdAt)}),text:Vo.t({key:"updated-at"})+" "+Fo.toReadableTime({timestamp:parseInt(n.updatedAt)})},{type:"text",label:Vo.t({key:"reactive-ui"}),text:n.trigger.receiveHandler?Vo.t({key:"enabled"}):Vo.t({key:"disabled"})}]}]},{type:"sizer",size:{width:23,height:3},styleObject:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:Vo.t({key:"install"}),actions:[function(){return No.downloadAndInstallPluginPack({manifest:n})}]}]},{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:Vo.t({key:"website"}),actions:[function(){return Qo.openPageInNewTab({url:n.website,manifest:t.manifest})}]}]},{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:Vo.t({key:"cancel"}),actions:[function(){return jo.unmountUI({tracker:o})}]}]}]}]}]}],slot:"plugins"})},e.prototype.render=function(e){return Qn(this,void 0,void 0,(function(){return Rn(this,(function(t){switch(t.label){case 0:return"pluginStarted"!==e.type||e.manifest.id!==this.manifest.id?[3,2]:(Bt.draw(),[4,this.updateCanvas({})]);case 1:t.sent(),this.handler=e.handler,this.tracker=jo.renderUI({canvas:this.canvas,slot:this.handler}),Bt.destroy(),t.label=2;case 2:return[2]}}))}))},e}());const Bn="data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA1MTEyMjgzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTQ4MjciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNOTU4LjM1ODQ4OSAxNTIuMTk5NDAxbC04OS4zOTkwOTktODkuNDMwODIyTDUxMS4xNzM2OCA0MjAuNTIyNTY2IDE1My4zODg5OTQgNjIuNzY4NTc5IDYzLjk4ODg3MiAxNTIuMTk5NDAxbDM1Ny43ODU3MDkgMzU3Ljc1Mzk4N0w2My45ODg4NzIgODY3LjcwODM5OGw4OS40MDAxMjMgODkuNDMwODIyTDUxMS4xNzM2OCA1OTkuMzg0MjFsMzU3Ljc4NTcwOSAzNTcuNzUzOTg3IDg5LjM5OTA5OS04OS40MzA4MjJMNjAwLjU3MzgwMyA1MDkuOTUzMzg4IDk1OC4zNTg0ODkgMTUyLjE5OTQwMXoiCiAgICAgICAgICBwLWlkPSI5NDgyOCIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMzEuYTk0YzNhODFObzRmeFIiIGNsYXNzPSJzZWxlY3RlZCIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiPjwvcGF0aD4KPC9zdmc+";const Zn="data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA1ODMwNjgyIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTU4NjMiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNOTA1LjMwOTA5MSA2MjguMzYzNjM2Yy0yNy45MjcyNzMgMC00Ni41NDU0NTUgMTguNjE4MTgyLTQ2LjU0NTQ1NSA0Ni41NDU0NTV2MjIzLjQxODE4MkgxNjUuMjM2MzY0VjEyNS42NzI3MjdoMjAwLjE0NTQ1NGMyNy45MjcyNzMgMCA0Ni41NDU0NTUtMTguNjE4MTgyIDQ2LjU0NTQ1NS00Ni41NDU0NTRzLTE4LjYxODE4Mi00Ni41NDU0NTUtNDYuNTQ1NDU1LTQ2LjU0NTQ1NUgxMTguNjkwOTA5Yy0yNy45MjcyNzMgMC00Ni41NDU0NTUgMTguNjE4MTgyLTQ2LjU0NTQ1NCA0Ni41NDU0NTV2ODY1Ljc0NTQ1NGMwIDI3LjkyNzI3MyAxOC42MTgxODIgNDYuNTQ1NDU1IDQ2LjU0NTQ1NCA0Ni41NDU0NTVoNzg2LjYxODE4MmMyNy45MjcyNzMgMCA0Ni41NDU0NTUtMTguNjE4MTgyIDQ2LjU0NTQ1NC00Ni41NDU0NTV2LTI2OS45NjM2MzZjMC0yNy45MjcyNzMtMTguNjE4MTgyLTQ2LjU0NTQ1NS00Ni41NDU0NTQtNDYuNTQ1NDU1eiIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiIHAtaWQ9Ijk1ODY0IiBkYXRhLXNwbS1hbmNob3ItaWQ9ImEzMTN4LnNlYXJjaF9pbmRleC4wLmkzNS5hOTRjM2E4MU5vNGZ4UiIKICAgICAgICAgIGNsYXNzPSJzZWxlY3RlZCI+PC9wYXRoPgogICAgPHBhdGggZD0iTTU1Ni4yMTgxODIgNTU4LjU0NTQ1NWgzNDkuMDkwOTA5di05My4wOTA5MWgtMjY5Ljk2MzYzNmwyOTMuMjM2MzYzLTI2OS45NjM2MzYtNjUuMTYzNjM2LTY1LjE2MzYzNi0zMDcuMiAyODMuOTI3MjcyVjExNi4zNjM2MzZoLTkzLjA5MDkwOVY1NTguNTQ1NDU1aDQuNjU0NTQ1eiIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiIHAtaWQ9Ijk1ODY1IiBkYXRhLXNwbS1hbmNob3ItaWQ9ImEzMTN4LnNlYXJjaF9pbmRleC4wLmkzNC5hOTRjM2E4MU5vNGZ4UiIKICAgICAgICAgIGNsYXNzPSJzZWxlY3RlZCI+PC9wYXRoPgo8L3N2Zz4=";var Gn=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},Hn=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const Vn=new(function(){function e(){this.manifest={icon:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzNDY2NTY2NzA0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iODA5ODAiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNMTAyMi4wNjU0NCA1ODMuNDAxMTljMCAxMS4wNTU4LTQuMDM0ODk2IDIwLjYxOTYyLTEyLjExMTg1MiAyOC42OTY1NzYtOC4wNzc5NzkgOC4wNzc5NzktMTcuNjM5NzUyIDEyLjExNzk5Mi0yOC42OTA0MzYgMTIuMTE3OTkyTDgzOC40NDY0NDUgNjI0LjIxNTc1OGMwIDcyLjY5MDU1Ni0xNC4yMzUyMTMgMTM0LjMyMDE5NS00Mi43MTg5NDEgMTg0Ljg5OTE1bDEzMi42MTUzNjcgMTMzLjI2MzEyYzguMDc2OTU2IDguMDY1Njk5IDEyLjExNzk5MiAxNy42MzQ2MzYgMTIuMTE3OTkyIDI4LjY5MDQzNiAwIDExLjA1MDY4NC00LjAzNDg5NiAyMC42MTQ1MDMtMTIuMTE3OTkyIDI4LjY5MTQ1OS03LjY1MzMwNyA4LjA2NTY5OS0xNy4yMDk5NjQgMTIuMTA2NzM2LTI4LjY5MDQzNiAxMi4xMDY3MzYtMTEuNDc1MzU2IDAtMjEuMDQwMTk5LTQuMDQxMDM2LTI4LjY5MDQzNi0xMi4xMDY3MzZMNzQ0LjcxNzczNyA4NzQuMTUzMThjLTIuMTI0Mzg0IDIuMTE4MjQ0LTUuMzA4OTEzIDQuODg0MjQtOS41NTg3MDMgOC4yODM2NjQtNC4yNTkgMy4zOTg0LTEzLjE4MDE4NCA5LjQ2MzUzNi0yNi43ODUwNCAxOC4xNzE4NzEtMTMuNTk4NzE2IDguNzE1NDk5LTI3LjQxNTM5NiAxNi40NzMxODMtNDEuNDM5ODA4IDIzLjI3NjEyMy0xNC4wMjk1MjggNi43OTc4MjMtMzEuNDYyNTcyIDEyLjk2NjMxMy01Mi4yODk5MjMgMTguNDkzMTktMjAuODI3MzUxIDUuNTE3NjY3LTQxLjQ0Njk3MSA4LjI4NTcxLTYxLjg0MjQ4NyA4LjI4NTcxTDU1Mi44MDE3NzYgMzc5LjM4NjY4bC04MS42MTE3MzkgMCAwIDU3MS4yNzcwNThjLTIxLjY2ODUwOSAwLTQzLjI1MDAzNi0yLjg3NDQ2Ny02NC43MDc3NDQtOC42MTUyMTUtMjEuNDczMDU3LTUuNzM0NjA4LTM5Ljk2MDEwNy0xMi43NDkzNzItNTUuNDc2NDk5LTIxLjAzOTE3NS0xNS41MTg0MzgtOC4yODk4MDQtMjkuNTQxODI3LTE2LjU3MjQ0NC00Mi4wNzczMjgtMjQuODY3MzY0LTEyLjU0MTY0MS04LjI5MDgyNy0yMS43ODEwNzItMTUuMTkzMDI3LTI3LjczOTc4NC0yMC43MTQ3ODdsLTkuNTU4NzAzLTguOTMyNDRMMTU0Ljk1MDU2IDk5OC40Nzk3NjdjLTguNTAwNjA1IDguOTIxMTgzLTE4LjY5OTg5NyAxMy4zODY4OTItMzAuNjA2MDY1IDEzLjM4Njg5Mi0xMC4yMDEzMzkgMC0xOS4zMzUzNzEtMy40MDQ1NC0yNy40MDkyNTctMTAuMjAyMzYzLTguMDc5MDAyLTcuNjUyMjg0LTEyLjQzNzI2NC0xNy4xMDk2OC0xMy4wODA5MjMtMjguMzcyMTg4LTAuNjMzNDI3LTExLjI2MzUzMSAyLjY1OTU3My0yMS4xNDM1NTMgOS44OTMzMjQtMjkuNjQ3MjI3bDEyOC43ODcxNzgtMTQ0LjcyNzIxOWMtMjQuNjUwNDIzLTQ4LjQ2NDgwNS0zNi45ODAyMzktMTA2LjY5OTExNC0zNi45ODAyMzktMTc0LjcxMDA5MUw0Mi43Mzg4OTUgNjI0LjIwNzU3MWMtMTEuMDU3ODQ3IDAtMjAuNjE2NTUtNC4wNDEwMzYtMjguNjkwNDM2LTEyLjExMTg1Mi04LjA3OTAwMi04LjA4MjA3Mi0xMi4xMjAwMzktMTcuNjQwNzc2LTEyLjEyMDAzOS0yOC42OTY1NzYgMC0xMS4wNTA2ODQgNC4wNDEwMzYtMjAuNjE5NjIgMTIuMTIwMDM5LTI4LjY4OTQxMyA4LjA3Mzg4Ni04LjA3Mjg2MyAxNy42MzI1ODktMTIuMTA3NzU5IDI4LjY5MDQzNi0xMi4xMDc3NTlsMTQyLjgxNDY2IDBMMTg1LjU1MzU1NSAzNTUuMTU2ODM2bC0xMTAuMzAyMTc1LTExMC4zMDIxNzVjLTguMDc0OTA5LTguMDc3OTc5LTEyLjExMzg5OS0xNy42NDA3NzYtMTIuMTEzODk5LTI4LjY5MTQ1OSAwLTExLjA0OTY2IDQuMDQ0MTA2LTIwLjYxOTYyIDEyLjExMzg5OS0yOC42OTA0MzYgOC4wNzE4MzktOC4wNzY5NTYgMTcuNjM4NzI5LTEyLjEyMzEwOSAyOC42OTE0NTktMTIuMTIzMTA5IDExLjA1NjgyMyAwIDIwLjYxMjQ1NyA0LjA1MjI5MyAyOC42OTI0ODIgMTIuMTIzMTA5bDExMC4zMDIxNzUgMTEwLjMwMjE3NSA1MzguMTI4MDc3IDAgMTEwLjMwMzE5OC0xMTAuMzAyMTc1YzguMDcwODE2LTguMDc2OTU2IDE3LjYzMjU4OS0xMi4xMjMxMDkgMjguNjkwNDM2LTEyLjEyMzEwOSAxMS4wNTA2ODQgMCAyMC42MTc1NzMgNC4wNTIyOTMgMjguNjg5NDEzIDEyLjEyMzEwOSA4LjA3Nzk3OSA4LjA3MDgxNiAxMi4xMTkwMTUgMTcuNjQwNzc2IDEyLjExOTAxNSAyOC42OTA0MzYgMCAxMS4wNTA2ODQtNC4wNDEwMzYgMjAuNjE0NTAzLTEyLjExOTAxNSAyOC42OTE0NTlsLTExMC4zMDIxNzUgMTEwLjMwMjE3NSAwIDE4Ny40NDgyMDYgMTQyLjgxNTY4MyAwYzExLjA1NTggMCAyMC42MTg1OTcgNC4wMzQ4OTYgMjguNjkwNDM2IDEyLjExMzg5OSA4LjA3Njk1NiA4LjA2OTc5MyAxMi4xMTc5OTIgMTcuNjM4NzI5IDEyLjExNzk5MiAyOC42ODMyNzNsMCAwTDEwMjIuMDY1NDQgNTgzLjQwMTE5IDEwMjIuMDY1NDQgNTgzLjQwMTE5ek03MTYuMDIxMTYyIDIxNi4xNTgwODUgMzA3Ljk2ODYwNSAyMTYuMTU4MDg1YzAtNTYuNTI2NDExIDE5Ljg3MTU4My0xMDQuNjY3ODUxIDU5LjYxNjc5Ni0xNDQuNDE0MDg3IDM5LjczMzk1Ni0zOS43NDYyMzYgODcuODgyNTYtNTkuNjExNjc5IDE0NC40MTEwMTctNTkuNjExNjc5IDU2LjUyOTQ4MSAwIDEwNC42NzgwODQgMTkuODY1NDQzIDE0NC40MTMwNjQgNTkuNjExNjc5QzY5Ni4xNTY3NDIgMTExLjQ4OTIxIDcxNi4wMjExNjIgMTU5LjYzMTY3NCA3MTYuMDIxMTYyIDIxNi4xNTgwODVMNzE2LjAyMTE2MiAyMTYuMTU4MDg1IDcxNi4wMjExNjIgMjE2LjE1ODA4NSA3MTYuMDIxMTYyIDIxNi4xNTgwODV6IgogICAgICAgICAgZmlsbD0iIzJjMmMyYyIgcC1pZD0iODA5ODEiPjwvcGF0aD4KPC9zdmc+",name:"Debug Bridge",id:"@wenzi7777/acev2_debug_bridge",versions:["0.0.1"],description:"AcFun Evolved V2 插件调试桥。",createdAt:new Date("2024-08-09").getTime()+"",updatedAt:(new Date).getTime()+"",author:"wenzi7777",copyright:"(c)2024 wenzi7777, licensed under the MIT License.",requestedAPIs:[],website:"https://acev2.1205.moe/",trigger:{receiveHandler:!0,matches:["*"]}},this.handler="",this.tracker="",this.canvas=[],this.currentPage=1,this.totalPages=10,this.bigManifest=null}return e.prototype.wakeUp=function(){var e=this;gn.listen({channel:"runtime:launchpad",handler:function(t){return e.render(t)},manifest:this.manifest})},e.prototype.updateCanvas=function(){return Gn(this,void 0,void 0,(function(){var e=this;return Hn(this,(function(t){return this.canvas=[{type:"sizer",styleObject:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"column",width:"100%",height:"100%",flexGrow:1,gap:"1vh"},children:[{type:"text",label:"开发者工具",text:"AcFun Evolved V2 插件调试桥"},{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw"},children:[{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return Eo.showDialog({title:Vo.t({key:"do-you-really-want-to-clear-monkey-storage"})+"?",content:Vo.t({key:"all-plugins-and-preferences-will-be-lose-its-unrecoverable"})+"!",okAction:function(){return Zo.clearMonkey()},cancelAction:function(){return Ut.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Bn},{type:"text",label:Vo.t({key:"clear-monkey-storage"})}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return Eo.showDialog({title:Vo.t({key:"do-you-really-want-to-clear-local-storage"})+"?",content:Vo.t({key:"all-preferences-stored-in-local-storage-will-be-lose-its-unrecoverable"})+"!",okAction:function(){return Zo.clearLocal()},cancelAction:function(){return Ut.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Bn},{type:"text",label:Vo.t({key:"clear-local-storage"})}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return Eo.showDialog({title:Vo.t({key:"do-you-really-want-to-import-monkey-backup"})+"?",content:Vo.t({key:"all-plugins-and-preferences-will-be-lose-its-unrecoverable"})+"! (Please select acev2.monkey.backup.json)",okAction:function(){Qo.ACEV2Upload({readType:"text",callback:function(e){var t=e.content;-1===e.file.name.indexOf("acev2.monkey")?Ut.showToast({text:Vo.t({key:"failed-to-import-filename-is-invalid"})}):(Zo.clearMonkey(),Zo.importMonkey({data:JSON.parse(t)}),Eo.showDialog({title:Vo.t({key:"import-succeed"}),content:Vo.t({key:"click-ok-to-reload-page"}),okAction:function(){return location.reload()}}))}})},cancelAction:function(){return Ut.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Zn},{type:"text",label:Vo.t({key:"import-monkey-storage"})}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return Eo.showDialog({title:Vo.t({key:"do-you-really-want-to-import-local-storage-backup"})+"?",content:Vo.t({key:"all-preferences-stored-in-local-storage-will-be-lose-its-unrecoverable"})+"! (Please select acev2.local.backup.json)",okAction:function(){Qo.ACEV2Upload({readType:"text",callback:function(e){var t=e.content;-1===e.file.name.indexOf("acev2.local")?Ut.showToast({text:Vo.t({key:"failed-to-import-filename-is-invalid"})}):(Zo.clearLocal(),Zo.importLocal({data:JSON.parse(t)}),Eo.showDialog({title:Vo.t({key:"import-succeed"}),content:Vo.t({key:"click-ok-to-reload-page"}),okAction:function(){return location.reload()}}))}})},cancelAction:function(){return Ut.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Zn},{type:"text",label:Vo.t({key:"import-local-storage"})}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return Eo.showDialog({title:Vo.t({key:"do-you-really-want-to-install-external-plugin"})+"?",content:Vo.t({key:"you-need-to-be-sure-you-trust-the-origin-especially-when-psv-is-half-or-off"}),okAction:function(){Qo.ACEV2Upload({readType:"arrayBuffer",callback:function(e){var t=e.content;-1===e.file.name.indexOf("raw.json.tar.gz")?Eo.showDialog({title:Vo.t({key:"failed-to-install"}),content:Vo.t({key:"invalid-plugin-package-it-may-because-you-do-not-name-it-correctly-or-pack-it-correctly-please-use-the-developer-kit-in-github"}),okAction:function(){return Qo.openPageInNewTab({url:ko.developerKitURL(),manifest:ko.MASTER_MANIFEST})}}):No.extractAndInstallPlugin({compressedData:t})}})},cancelAction:function(){return Ut.showToast({text:Vo.t({key:"canceled"})})}})}}],filled:!0,children:[{type:"image",src:Pn},{type:"text",label:Vo.t({key:"install-plugin-package"})+" (raw.json.tar.gz)"}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return Eo.showDialog({title:Vo.t({key:"do-you-really-want-to-install-external-plugin"})+"?",content:Vo.t({key:"you-need-to-be-sure-you-trust-the-origin-especially-when-psv-is-half-or-off"}),okAction:function(){Qo.ACEV2Upload({readType:"text",callback:function(e){var t=e.content;-1===e.file.name.indexOf("raw.json")?Eo.showDialog({title:Vo.t({key:"failed-to-install"}),content:Vo.t({key:"invalid-plugin-package-it-may-because-you-do-not-name-it-correctly-or-pack-it-correctly-please-use-the-developer-kit-in-github"}),okAction:function(){return Qo.openPageInNewTab({url:ko.developerKitURL(),manifest:ko.MASTER_MANIFEST})}}):No.installPlugin({pluginPack:JSON.parse(t),bridged:!1})}})},cancelAction:function(){return Ut.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Pn},{type:"text",label:Vo.t({key:"install-unpacked-plugin"})+" (raw.json)"}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return e.renderConfigurePanel()}}],filled:!0,children:[{type:"image",src:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA2MDk1OTY5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTk3NjYiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNNTU3LjU2OCAxMDI0bDQwMC45ODEzMzMtMTY5Ljg5ODY2N2MxMy42NTMzMzMtNi42NTYgMjIuNzg0LTE2LjcyNTMzMyAyMi43ODQtMzAuMDM3MzMzVjQ4Ny41OTQ2NjdMNTgwLjM1MiA2NTcuNDkzMzMzYy05LjEzMDY2NyAzLjMyOC0xMy42NTMzMzMgNi42NTYtMjIuNzg0IDYuNjU2VjEwMjR6IG0tOTEuMTM2IDBWNjY0LjE0OTMzM2MtOS4xMzA2NjctMy4zMjgtMTMuNjUzMzMzLTMuMzI4LTIyLjc4NC02LjY1Nkw0Mi42NjY2NjcgNDg3LjU5NDY2N3YzMzYuNDY5MzMzYzAgMTMuMzEyIDkuMTMwNjY3IDIzLjM4MTMzMyAyMi43ODQgMzAuMDM3MzMzTDQ2Ni40MzIgMTAyNHogbTQ2OS4zMzMzMzMtNTkzLjA2NjY2N0w1MzQuNzg0IDI2MS4wMzQ2NjdhNTQuNDQyNjY3IDU0LjQ0MjY2NyAwIDAgMC00NS41NjggMEw4OC4yMzQ2NjcgNDMwLjg0OGw0MDAuOTgxMzMzIDE2OS45ODRjMTMuNjUzMzMzIDYuNjU2IDMxLjkxNDY2NyA2LjY1NiA0NS41NjggMGw0MDAuOTgxMzMzLTE2OS44OTg2Njd6IgogICAgICAgICAgZmlsbD0iIzJjMmMyYyIgZmlsbC1vcGFjaXR5PSIuNjUiIHAtaWQ9Ijk5NzY3IiBkYXRhLXNwbS1hbmNob3ItaWQ9ImEzMTN4LnNlYXJjaF9pbmRleC4wLmkzOC5hOTRjM2E4MU5vNGZ4UiIKICAgICAgICAgIGNsYXNzPSJzZWxlY3RlZCI+PC9wYXRoPgogICAgPHBhdGggZD0iTTUyNi4yNTA2NjcgNzMuMzAxMzMzbDQwMS41Nzg2NjYgMTYyLjEzMzMzNEw5ODEuMzMzMzMzIDIwMS4zODY2NjcgNTI2LjI1MDY2NyAxMC4zMjUzMzMgNzEuMDgyNjY3IDIwMS4zODY2NjdsNTQuMTAxMzMzIDM0LjgxNiA0MDEuMDY2NjY3LTE2Mi45ODY2Njd6IG0wIDEwNS4xMzA2NjdsNDAxLjU3ODY2NiAxNjIuMTMzMzMzIDUzLjUwNC0zNC4wNDgtNDU1LjA4MjY2Ni0xOTEuMDYxMzMzLTQ1NS4xNjggMTkxLjE0NjY2N0wxMjUuMTg0IDM0MS4zMzMzMzNsNDAxLjA2NjY2Ny0xNjIuOTAxMzMzeiIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiIGZpbGwtb3BhY2l0eT0iLjY1IiBwLWlkPSI5OTc2OCIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMzkuYTk0YzNhODFObzRmeFIiCiAgICAgICAgICBjbGFzcz0ic2VsZWN0ZWQiPjwvcGF0aD4KPC9zdmc+"},{type:"text",label:Vo.t({key:"configure-bridge"})}]}]}]}],[2]}))}))},e.prototype.render=function(e){return Gn(this,void 0,void 0,(function(){return Hn(this,(function(t){switch(t.label){case 0:return"pluginStarted"!==e.type||e.manifest.id!==this.manifest.id?[3,2]:(Bt.draw(),[4,this.updateCanvas()]);case 1:t.sent(),this.handler=e.handler,this.tracker=jo.renderUI({canvas:this.canvas,slot:this.handler}),Bt.destroy(),t.label=2;case 2:return[2]}}))}))},e.prototype.renderConfigurePanel=function(){t.info({message:"renderConfigurePanel"});var e=jo.renderUI({canvas:[{type:"sizer",filled:!0,styleObject:{display:"flex",flexDirection:"column",gap:"1vh",zIndex:100},draggable:!0,size:{width:20,height:30},position:{left:40,top:35},children:[{type:"text",label:Vo.t({key:"configure-bridge"})},{type:"checkbox",label:Vo.t({key:"enable-bridge"}),checked:Ho.getBridgeConfigurations().enabled,onChange:function(e){return Ho.updateBridgePreferences({newBridgeConfigurations:{enabled:e,pluginLoadOrder:Ho.getBridgeConfigurations().pluginLoadOrder,connect:Ho.getBridgeConfigurations().connect}})}},{type:"input",label:Vo.t({key:"connect"}),value:Ho.getBridgeConfigurations().connect,onChange:function(e){Ho.updateBridgePreferences({newBridgeConfigurations:{enabled:Ho.getBridgeConfigurations().enabled,pluginLoadOrder:Ho.getBridgeConfigurations().pluginLoadOrder,connect:e}})}},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"ok"}),actions:[function(){jo.unmountUI({tracker:e})}]}]}]}],slot:"plugins"})},e}());function Fn(e){let t=e.length;for(;--t>=0;)e[t]=0}const Jn=256,Kn=286,qn=30,Xn=15,$n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),er=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),tr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),nr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rr=new Array(576);Fn(rr);const ir=new Array(60);Fn(ir);const ar=new Array(512);Fn(ar);const or=new Array(256);Fn(or);const sr=new Array(29);Fn(sr);const cr=new Array(qn);function lr(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let ur,gr,dr;function hr(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Fn(cr);const pr=e=>e<256?ar[e]:ar[256+(e>>>7)],fr=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},yr=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,fr(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Mr=(e,t,n)=>{yr(e,n[2*t],n[2*t+1])},Ir=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},mr=(e,t,n)=>{const r=new Array(16);let i,a,o=0;for(i=1;i<=Xn;i++)o=o+n[i-1]<<1,r[i]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=Ir(r[t]++,t))}},vr=e=>{let t;for(t=0;t<Kn;t++)e.dyn_ltree[2*t]=0;for(t=0;t<qn;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},br=e=>{e.bi_valid>8?fr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},wr=(e,t,n,r)=>{const i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},Nr=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&wr(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!wr(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},Tr=(e,t,n)=>{let r,i,a,o,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0===r?Mr(e,i,t):(a=or[i],Mr(e,a+Jn+1,t),o=$n[a],0!==o&&(i-=sr[a],yr(e,i,o)),r--,a=pr(r),Mr(e,a,n),o=er[a],0!==o&&(r-=cr[a],yr(e,r,o)))}while(s<e.sym_next);Mr(e,256,t)},Ar=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,c,l=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)0!==n[2*o]?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)Nr(e,n,o);c=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Nr(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[2*c]=n[2*o]+n[2*s],e.depth[c]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[2*o+1]=n[2*s+1]=c,e.heap[1]=c++,Nr(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,g,d,h,p,f=0;for(d=0;d<=Xn;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],d=n[2*n[2*u+1]+1]+1,d>c&&(d=c,f++),n[2*u+1]=d,u>r||(e.bl_count[d]++,h=0,u>=s&&(h=o[u-s]),p=n[2*u],e.opt_len+=p*(d+h),a&&(e.static_len+=p*(i[2*u+1]+h)));if(0!==f){do{for(d=c-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[c]--,f-=2}while(f>0);for(d=c;0!==d;d--)for(u=e.bl_count[d];0!==u;)g=e.heap[--l],g>r||(n[2*g+1]!==d&&(e.opt_len+=(d-n[2*g+1])*n[2*g],n[2*g+1]=d),u--)}})(e,t),mr(n,l,e.bl_count)},_r=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<c&&i===o||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))},kr=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,c=7,l=4;for(0===o&&(c=138,l=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<c&&i===o)){if(s<l)do{Mr(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(Mr(e,i,e.bl_tree),s--),Mr(e,16,e.bl_tree),yr(e,s-3,2)):s<=10?(Mr(e,17,e.bl_tree),yr(e,s-3,3)):(Mr(e,18,e.bl_tree),yr(e,s-11,7));s=0,a=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}};let xr=!1;const Dr=(e,t,n,r)=>{yr(e,0+(r?1:0),3),br(e),fr(e,n),fr(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var zr=e=>{xr||((()=>{let e,t,n,r,i;const a=new Array(16);for(n=0,r=0;r<28;r++)for(sr[r]=n,e=0;e<1<<$n[r];e++)or[n++]=r;for(or[n-1]=r,i=0,r=0;r<16;r++)for(cr[r]=i,e=0;e<1<<er[r];e++)ar[i++]=r;for(i>>=7;r<qn;r++)for(cr[r]=i<<7,e=0;e<1<<er[r]-7;e++)ar[256+i++]=r;for(t=0;t<=Xn;t++)a[t]=0;for(e=0;e<=143;)rr[2*e+1]=8,e++,a[8]++;for(;e<=255;)rr[2*e+1]=9,e++,a[9]++;for(;e<=279;)rr[2*e+1]=7,e++,a[7]++;for(;e<=287;)rr[2*e+1]=8,e++,a[8]++;for(mr(rr,287,a),e=0;e<qn;e++)ir[2*e+1]=5,ir[2*e]=Ir(e,5);ur=new lr(rr,$n,257,Kn,Xn),gr=new lr(ir,er,0,qn,Xn),dr=new lr(new Array(0),tr,0,19,7)})(),xr=!0),e.l_desc=new hr(e.dyn_ltree,ur),e.d_desc=new hr(e.dyn_dtree,gr),e.bl_desc=new hr(e.bl_tree,dr),e.bi_buf=0,e.bi_valid=0,vr(e)},Cr=(e,t,n,r)=>{let i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Jn;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Ar(e,e.l_desc),Ar(e,e.d_desc),o=(e=>{let t;for(_r(e,e.dyn_ltree,e.l_desc.max_code),_r(e,e.dyn_dtree,e.d_desc.max_code),Ar(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*nr[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?Dr(e,t,n,r):4===e.strategy||a===i?(yr(e,2+(r?1:0),3),Tr(e,rr,ir)):(yr(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(yr(e,t-257,5),yr(e,n-1,5),yr(e,r-4,4),i=0;i<r;i++)yr(e,e.bl_tree[2*nr[i]+1],3);kr(e,e.dyn_ltree,t-1),kr(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Tr(e,e.dyn_ltree,e.dyn_dtree)),vr(e),r&&br(e)},jr=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(or[n]+Jn+1)]++,e.dyn_dtree[2*pr(t)]++),e.sym_next===e.sym_end),Lr=e=>{yr(e,2,3),Mr(e,256,rr),(e=>{16===e.bi_valid?(fr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},Or={_tr_init:zr,_tr_stored_block:Dr,_tr_flush_block:Cr,_tr_tally:jr,_tr_align:Lr};var Er=(e,t,n,r)=>{let i=65535&e,a=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[r++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16};const Sr=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Yr=(e,t,n,r)=>{const i=Sr,a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^i[255&(e^t[n])];return~e},Ur={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Pr={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Qr,_tr_stored_block:Rr,_tr_flush_block:Wr,_tr_tally:Br,_tr_align:Zr}=Or,{Z_NO_FLUSH:Gr,Z_PARTIAL_FLUSH:Hr,Z_FULL_FLUSH:Vr,Z_FINISH:Fr,Z_BLOCK:Jr,Z_OK:Kr,Z_STREAM_END:qr,Z_STREAM_ERROR:Xr,Z_DATA_ERROR:$r,Z_BUF_ERROR:ei,Z_DEFAULT_COMPRESSION:ti,Z_FILTERED:ni,Z_HUFFMAN_ONLY:ri,Z_RLE:ii,Z_FIXED:ai,Z_DEFAULT_STRATEGY:oi,Z_UNKNOWN:si,Z_DEFLATED:ci}=Pr,li=258,ui=262,gi=42,di=113,hi=666,pi=(e,t)=>(e.msg=Ur[t],t),fi=e=>2*e-(e>4?9:0),yi=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Mi=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};
/* eslint-disable new-cap */
let Ii=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const mi=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},vi=(e,t)=>{Wr(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,mi(e.strm)},bi=(e,t)=>{e.pending_buf[e.pending++]=t},wi=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ni=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Er(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Yr(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Ti=(e,t)=>{let n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const c=e.strstart>e.w_size-ui?e.strstart-(e.w_size-ui):0,l=e.window,u=e.w_mask,g=e.prev,d=e.strstart+li;let h=l[a+o-1],p=l[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,l[n+o]===p&&l[n+o-1]===h&&l[n]===l[a]&&l[++n]===l[a+1]){a+=2,n++;do{}while(l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&a<d);if(r=li-(d-a),a=d-li,r>o){if(e.match_start=t,o=r,r>=s)break;h=l[a+o-1],p=l[a+o]}}}while((t=g[t&u])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead},Ai=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ui)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Mi(e),r+=t),0===e.strm.avail_in)break;if(n=Ni(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Ii(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Ii(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ui&&0!==e.strm.avail_in)},_i=(e,t)=>{let n,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&t!==Fr||t===Gr||n!==r+e.strm.avail_in))break;o=t===Fr&&n===r+e.strm.avail_in?1:0,Rr(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,mi(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Ni(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Gr&&t!==Fr&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Ni(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=a||(r||t===Fr)&&t!==Gr&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=t===Fr&&0===e.strm.avail_in&&n===r?1:0,Rr(e,e.block_start,n,o),e.block_start+=n,mi(e.strm)),o?3:1)},ki=(e,t)=>{let n,r;for(;;){if(e.lookahead<ui){if(Ai(e),e.lookahead<ui&&t===Gr)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Ii(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ui&&(e.match_length=Ti(e,n)),e.match_length>=3)if(r=Br(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Ii(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ii(e,e.ins_h,e.window[e.strstart+1]);else r=Br(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(vi(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Fr?(vi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(vi(e,!1),0===e.strm.avail_out)?1:2},xi=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<ui){if(Ai(e),e.lookahead<ui&&t===Gr)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Ii(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ui&&(e.match_length=Ti(e,n),e.match_length<=5&&(e.strategy===ni||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Br(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Ii(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(vi(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Br(e,0,e.window[e.strstart-1]),r&&vi(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Br(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Fr?(vi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(vi(e,!1),0===e.strm.avail_out)?1:2};function Di(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const zi=[new Di(0,0,0,0,_i),new Di(4,4,8,4,ki),new Di(4,5,16,8,ki),new Di(4,6,32,32,ki),new Di(4,4,16,16,xi),new Di(8,16,32,32,xi),new Di(8,16,128,128,xi),new Di(8,32,128,256,xi),new Di(32,128,258,1024,xi),new Di(32,258,258,4096,xi)];function Ci(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ci,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),yi(this.dyn_ltree),yi(this.dyn_dtree),yi(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),yi(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),yi(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ji=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==gi&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==di&&t.status!==hi?1:0},Li=e=>{if(ji(e))return pi(e,Xr);e.total_in=e.total_out=0,e.data_type=si;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?gi:di,e.adler=2===t.wrap?0:1,t.last_flush=-2,Qr(t),Kr},Oi=e=>{const t=Li(e);return t===Kr&&(e=>{e.window_size=2*e.w_size,yi(e.head),e.max_lazy_match=zi[e.level].max_lazy,e.good_match=zi[e.level].good_length,e.nice_match=zi[e.level].nice_length,e.max_chain_length=zi[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},Ei=(e,t,n,r,i,a)=>{if(!e)return Xr;let o=1;if(t===ti&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==ci||r<8||r>15||t<0||t>9||a<0||a>ai||8===r&&1!==o)return pi(e,Xr);8===r&&(r=9);const s=new Ci;return e.state=s,s.strm=e,s.status=gi,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=n,Oi(e)};var Si=(e,t)=>{if(ji(e)||t>Jr||t<0)return e?pi(e,Xr):Xr;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===hi&&t!==Fr)return pi(e,0===e.avail_out?ei:Xr);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(mi(e),0===e.avail_out)return n.last_flush=-1,Kr}else if(0===e.avail_in&&fi(t)<=fi(r)&&t!==Fr)return pi(e,ei);if(n.status===hi&&0!==e.avail_in)return pi(e,ei);if(n.status===gi&&0===n.wrap&&(n.status=di),n.status===gi){let t=ci+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=ri||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,wi(n,t),0!==n.strstart&&(wi(n,e.adler>>>16),wi(n,65535&e.adler)),e.adler=1,n.status=di,mi(e),0!==n.pending)return n.last_flush=-1,Kr}if(57===n.status)if(e.adler=0,bi(n,31),bi(n,139),bi(n,8),n.gzhead)bi(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),bi(n,255&n.gzhead.time),bi(n,n.gzhead.time>>8&255),bi(n,n.gzhead.time>>16&255),bi(n,n.gzhead.time>>24&255),bi(n,9===n.level?2:n.strategy>=ri||n.level<2?4:0),bi(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(bi(n,255&n.gzhead.extra.length),bi(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Yr(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(bi(n,0),bi(n,0),bi(n,0),bi(n,0),bi(n,0),bi(n,9===n.level?2:n.strategy>=ri||n.level<2?4:0),bi(n,3),n.status=di,mi(e),0!==n.pending)return n.last_flush=-1,Kr;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,mi(e),0!==n.pending)return n.last_flush=-1,Kr;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-r,r)),mi(e),0!==n.pending)return n.last_flush=-1,Kr;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,bi(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-r,r)),mi(e),0!==n.pending)return n.last_flush=-1,Kr;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,bi(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(mi(e),0!==n.pending))return n.last_flush=-1,Kr;bi(n,255&e.adler),bi(n,e.adler>>8&255),e.adler=0}if(n.status=di,mi(e),0!==n.pending)return n.last_flush=-1,Kr}if(0!==e.avail_in||0!==n.lookahead||t!==Gr&&n.status!==hi){let r=0===n.level?_i(n,t):n.strategy===ri?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Ai(e),0===e.lookahead)){if(t===Gr)return 1;break}if(e.match_length=0,n=Br(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(vi(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Fr?(vi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(vi(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ii?((e,t)=>{let n,r,i,a;const o=e.window;for(;;){if(e.lookahead<=li){if(Ai(e),e.lookahead<=li&&t===Gr)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+li;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=li-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Br(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Br(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(vi(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Fr?(vi(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(vi(e,!1),0===e.strm.avail_out)?1:2})(n,t):zi[n.level].func(n,t);if(3!==r&&4!==r||(n.status=hi),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Kr;if(2===r&&(t===Hr?Zr(n):t!==Jr&&(Rr(n,0,0,!1),t===Vr&&(yi(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),mi(e),0===e.avail_out))return n.last_flush=-1,Kr}return t!==Fr?Kr:n.wrap<=0?qr:(2===n.wrap?(bi(n,255&e.adler),bi(n,e.adler>>8&255),bi(n,e.adler>>16&255),bi(n,e.adler>>24&255),bi(n,255&e.total_in),bi(n,e.total_in>>8&255),bi(n,e.total_in>>16&255),bi(n,e.total_in>>24&255)):(wi(n,e.adler>>>16),wi(n,65535&e.adler)),mi(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Kr:qr)},Yi=(e,t)=>{let n=t.length;if(ji(e))return Xr;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==gi||r.lookahead)return Xr;if(1===i&&(e.adler=Er(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(yi(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ai(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Ii(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,Ai(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,Kr},Ui={deflateInit:(e,t)=>Ei(e,t,ci,15,8,oi),deflateInit2:Ei,deflateReset:Oi,deflateResetKeep:Li,deflateSetHeader:(e,t)=>ji(e)||2!==e.state.wrap?Xr:(e.state.gzhead=t,Kr),deflate:Si,deflateEnd:e=>{if(ji(e))return Xr;const t=e.state.status;return e.state=null,t===di?pi(e,$r):Kr},deflateSetDictionary:Yi,deflateInfo:"pako deflate (from Nodeca project)"};const Pi=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Qi={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Pi(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n}};let Ri=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ri=!1}const Wi=new Uint8Array(256);for(let e=0;e<256;e++)Wi[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Wi[254]=Wi[254]=1;var Bi={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const a=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){a[i++]=t;continue}let o=Wi[t];if(o>4)a[i++]=65533,r+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&r<n;)t=t<<6|63&e[r++],o--;o>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Ri)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Wi[e[n]]>t?n:t}};var Zi=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Gi=Object.prototype.toString,{Z_NO_FLUSH:Hi,Z_SYNC_FLUSH:Vi,Z_FULL_FLUSH:Fi,Z_FINISH:Ji,Z_OK:Ki,Z_STREAM_END:qi,Z_DEFAULT_COMPRESSION:Xi,Z_DEFAULT_STRATEGY:$i,Z_DEFLATED:ea}=Pr;function ta(e){this.options=Qi.assign({level:Xi,method:ea,chunkSize:16384,windowBits:15,memLevel:8,strategy:$i},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zi,this.strm.avail_out=0;let n=Ui.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Ki)throw new Error(Ur[n]);if(t.header&&Ui.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Bi.string2buf(t.dictionary):"[object ArrayBuffer]"===Gi.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Ui.deflateSetDictionary(this.strm,e),n!==Ki)throw new Error(Ur[n]);this._dict_set=!0}}function na(e,t){const n=new ta(t);if(n.push(e,!0),n.err)throw n.msg||Ur[n.err];return n.result}ta.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Ji:Hi,"string"==typeof e?n.input=Bi.string2buf(e):"[object ArrayBuffer]"===Gi.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===Vi||a===Fi)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Ui.deflate(n,a),i===qi)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Ui.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ki;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ta.prototype.onData=function(e){this.chunks.push(e)},ta.prototype.onEnd=function(e){e===Ki&&(this.result=Qi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ra=function(e,t){return(t=t||{}).raw=!0,na(e,t)},ia=function(e,t){return(t=t||{}).gzip=!0,na(e,t)},aa={Deflate:ta,deflate:na,deflateRaw:ra,gzip:ia,constants:Pr};const oa=16209;var sa=function(e,t){let n,r,i,a,o,s,c,l,u,g,d,h,p,f,y,M,I,m,v,b,w,N,T,A;const _=e.state;n=e.next_in,T=e.input,r=n+(e.avail_in-5),i=e.next_out,A=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=_.dmax,c=_.wsize,l=_.whave,u=_.wnext,g=_.window,d=_.hold,h=_.bits,p=_.lencode,f=_.distcode,y=(1<<_.lenbits)-1,M=(1<<_.distbits)-1;e:do{h<15&&(d+=T[n++]<<h,h+=8,d+=T[n++]<<h,h+=8),I=p[d&y];t:for(;;){if(m=I>>>24,d>>>=m,h-=m,m=I>>>16&255,0===m)A[i++]=65535&I;else{if(!(16&m)){if(64&m){if(32&m){_.mode=16191;break e}e.msg="invalid literal/length code",_.mode=oa;break e}I=p[(65535&I)+(d&(1<<m)-1)];continue t}for(v=65535&I,m&=15,m&&(h<m&&(d+=T[n++]<<h,h+=8),v+=d&(1<<m)-1,d>>>=m,h-=m),h<15&&(d+=T[n++]<<h,h+=8,d+=T[n++]<<h,h+=8),I=f[d&M];;){if(m=I>>>24,d>>>=m,h-=m,m=I>>>16&255,16&m){if(b=65535&I,m&=15,h<m&&(d+=T[n++]<<h,h+=8,h<m&&(d+=T[n++]<<h,h+=8)),b+=d&(1<<m)-1,b>s){e.msg="invalid distance too far back",_.mode=oa;break e}if(d>>>=m,h-=m,m=i-a,b>m){if(m=b-m,m>l&&_.sane){e.msg="invalid distance too far back",_.mode=oa;break e}if(w=0,N=g,0===u){if(w+=c-m,m<v){v-=m;do{A[i++]=g[w++]}while(--m);w=i-b,N=A}}else if(u<m){if(w+=c+u-m,m-=u,m<v){v-=m;do{A[i++]=g[w++]}while(--m);if(w=0,u<v){m=u,v-=m;do{A[i++]=g[w++]}while(--m);w=i-b,N=A}}}else if(w+=u-m,m<v){v-=m;do{A[i++]=g[w++]}while(--m);w=i-b,N=A}for(;v>2;)A[i++]=N[w++],A[i++]=N[w++],A[i++]=N[w++],v-=3;v&&(A[i++]=N[w++],v>1&&(A[i++]=N[w++]))}else{w=i-b;do{A[i++]=A[w++],A[i++]=A[w++],A[i++]=A[w++],v-=3}while(v>2);v&&(A[i++]=A[w++],v>1&&(A[i++]=A[w++]))}break}if(64&m){e.msg="invalid distance code",_.mode=oa;break e}I=f[(65535&I)+(d&(1<<m)-1)]}}break}}while(n<r&&i<o);v=h>>3,n-=v,h-=v<<3,d&=(1<<h)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<o?o-i+257:257-(i-o),_.hold=d,_.bits=h};const ca=15,la=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ua=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ga=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),da=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ha=(e,t,n,r,i,a,o,s)=>{const c=s.bits;let l,u,g,d,h,p,f=0,y=0,M=0,I=0,m=0,v=0,b=0,w=0,N=0,T=0,A=null;const _=new Uint16Array(16),k=new Uint16Array(16);let x,D,z,C=null;for(f=0;f<=ca;f++)_[f]=0;for(y=0;y<r;y++)_[t[n+y]]++;for(m=c,I=ca;I>=1&&0===_[I];I--);if(m>I&&(m=I),0===I)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(M=1;M<I&&0===_[M];M++);for(m<M&&(m=M),w=1,f=1;f<=ca;f++)if(w<<=1,w-=_[f],w<0)return-1;if(w>0&&(0===e||1!==I))return-1;for(k[1]=0,f=1;f<ca;f++)k[f+1]=k[f]+_[f];for(y=0;y<r;y++)0!==t[n+y]&&(o[k[t[n+y]]++]=y);if(0===e?(A=C=o,p=20):1===e?(A=la,C=ua,p=257):(A=ga,C=da,p=0),T=0,y=0,f=M,h=a,v=m,b=0,g=-1,N=1<<m,d=N-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){x=f-b,o[y]+1<p?(D=0,z=o[y]):o[y]>=p?(D=C[o[y]-p],z=A[o[y]-p]):(D=96,z=0),l=1<<f-b,u=1<<v,M=u;do{u-=l,i[h+(T>>b)+u]=x<<24|D<<16|z}while(0!==u);for(l=1<<f-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,y++,0==--_[f]){if(f===I)break;f=t[n+o[y]]}if(f>m&&(T&d)!==g){for(0===b&&(b=m),h+=M,v=f-b,w=1<<v;v+b<I&&(w-=_[v+b],!(w<=0));)v++,w<<=1;if(N+=1<<v,1===e&&N>852||2===e&&N>592)return 1;g=T&d,i[g]=m<<24|v<<16|h-a}}return 0!==T&&(i[h+T]=f-b<<24|64<<16),s.bits=m,0};const{Z_FINISH:pa,Z_BLOCK:fa,Z_TREES:ya,Z_OK:Ma,Z_STREAM_END:Ia,Z_NEED_DICT:ma,Z_STREAM_ERROR:va,Z_DATA_ERROR:ba,Z_MEM_ERROR:wa,Z_BUF_ERROR:Na,Z_DEFLATED:Ta}=Pr,Aa=16180,_a=16190,ka=16191,xa=16192,Da=16194,za=16199,Ca=16200,ja=16206,La=16209,Oa=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Ea(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Sa=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Aa||t.mode>16211?1:0},Ya=e=>{if(Sa(e))return va;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Aa,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Ma},Ua=e=>{if(Sa(e))return va;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Ya(e)},Pa=(e,t)=>{let n;if(Sa(e))return va;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?va:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Ua(e))},Qa=(e,t)=>{if(!e)return va;const n=new Ea;e.state=n,n.strm=e,n.window=null,n.mode=Aa;const r=Pa(e,t);return r!==Ma&&(e.state=null),r};let Ra,Wa,Ba=!0;const Za=e=>{if(Ba){Ra=new Int32Array(512),Wa=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ha(1,e.lens,0,288,Ra,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ha(2,e.lens,0,32,Wa,0,e.work,{bits:5}),Ba=!1}e.lencode=Ra,e.lenbits=9,e.distcode=Wa,e.distbits=5},Ga=(e,t,n,r)=>{let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Ha=(e,t)=>{let n,r,i,a,o,s,c,l,u,g,d,h,p,f,y,M,I,m,v,b,w,N,T=0;const A=new Uint8Array(4);let _,k;const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Sa(e)||!e.output||!e.input&&0!==e.avail_in)return va;n=e.state,n.mode===ka&&(n.mode=xa),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,g=s,d=c,N=Ma;e:for(;;)switch(n.mode){case Aa:if(0===n.wrap){n.mode=xa;break}for(;u<16;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,A[0]=255&l,A[1]=l>>>8&255,n.check=Yr(n.check,A,2,0),l=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=La;break}if((15&l)!==Ta){e.msg="unknown compression method",n.mode=La;break}if(l>>>=4,u-=4,w=8+(15&l),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=La;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:ka,l=0,u=0;break;case 16181:for(;u<16;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if(n.flags=l,(255&n.flags)!==Ta){e.msg="unknown compression method",n.mode=La;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=La;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(A[0]=255&l,A[1]=l>>>8&255,n.check=Yr(n.check,A,2,0)),l=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(A[0]=255&l,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,n.check=Yr(n.check,A,4,0)),l=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(A[0]=255&l,A[1]=l>>>8&255,n.check=Yr(n.check,A,2,0)),l=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(A[0]=255&l,A[1]=l>>>8&255,n.check=Yr(n.check,A,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(h=n.length,h>s&&(h=s),h&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),w)),512&n.flags&&4&n.wrap&&(n.check=Yr(n.check,r,h,a)),s-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;h=0;do{w=r[a+h++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=Yr(n.check,r,h,a)),s-=h,a+=h,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;h=0;do{w=r[a+h++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=Yr(n.check,r,h,a)),s-=h,a+=h,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=La;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=ka;break;case 16189:for(;u<32;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}e.adler=n.check=Oa(l),l=0,u=0,n.mode=_a;case _a:if(0===n.havedict)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,ma;e.adler=n.check=1,n.mode=ka;case ka:if(t===fa||t===ya)break e;case xa:if(n.last){l>>>=7&u,u-=7&u,n.mode=ja;break}for(;u<3;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}switch(n.last=1&l,l>>>=1,u-=1,3&l){case 0:n.mode=16193;break;case 1:if(Za(n),n.mode=za,t===ya){l>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=La}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=La;break}if(n.length=65535&l,l=0,u=0,n.mode=Da,t===ya)break e;case Da:n.mode=16195;case 16195:if(h=n.length,h){if(h>s&&(h=s),h>c&&(h=c),0===h)break e;i.set(r.subarray(a,a+h),o),s-=h,a+=h,c-=h,o+=h,n.length-=h;break}n.mode=ka;break;case 16196:for(;u<14;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=La;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}n.lens[x[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[x[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,_={bits:n.lenbits},N=ha(0,n.lens,0,19,n.lencode,0,n.work,_),n.lenbits=_.bits,N){e.msg="invalid code lengths set",n.mode=La;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;T=n.lencode[l&(1<<n.lenbits)-1],y=T>>>24,M=T>>>16&255,I=65535&T,!(y<=u);){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if(I<16)l>>>=y,u-=y,n.lens[n.have++]=I;else{if(16===I){for(k=y+2;u<k;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if(l>>>=y,u-=y,0===n.have){e.msg="invalid bit length repeat",n.mode=La;break}w=n.lens[n.have-1],h=3+(3&l),l>>>=2,u-=2}else if(17===I){for(k=y+3;u<k;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}l>>>=y,u-=y,w=0,h=3+(7&l),l>>>=3,u-=3}else{for(k=y+7;u<k;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}l>>>=y,u-=y,w=0,h=11+(127&l),l>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=La;break}for(;h--;)n.lens[n.have++]=w}}if(n.mode===La)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=La;break}if(n.lenbits=9,_={bits:n.lenbits},N=ha(1,n.lens,0,n.nlen,n.lencode,0,n.work,_),n.lenbits=_.bits,N){e.msg="invalid literal/lengths set",n.mode=La;break}if(n.distbits=6,n.distcode=n.distdyn,_={bits:n.distbits},N=ha(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,_),n.distbits=_.bits,N){e.msg="invalid distances set",n.mode=La;break}if(n.mode=za,t===ya)break e;case za:n.mode=Ca;case Ca:if(s>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,sa(e,d),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,n.mode===ka&&(n.back=-1);break}for(n.back=0;T=n.lencode[l&(1<<n.lenbits)-1],y=T>>>24,M=T>>>16&255,I=65535&T,!(y<=u);){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if(M&&!(240&M)){for(m=y,v=M,b=I;T=n.lencode[b+((l&(1<<m+v)-1)>>m)],y=T>>>24,M=T>>>16&255,I=65535&T,!(m+y<=u);){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}l>>>=m,u-=m,n.back+=m}if(l>>>=y,u-=y,n.back+=y,n.length=I,0===M){n.mode=16205;break}if(32&M){n.back=-1,n.mode=ka;break}if(64&M){e.msg="invalid literal/length code",n.mode=La;break}n.extra=15&M,n.mode=16201;case 16201:if(n.extra){for(k=n.extra;u<k;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;T=n.distcode[l&(1<<n.distbits)-1],y=T>>>24,M=T>>>16&255,I=65535&T,!(y<=u);){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if(!(240&M)){for(m=y,v=M,b=I;T=n.distcode[b+((l&(1<<m+v)-1)>>m)],y=T>>>24,M=T>>>16&255,I=65535&T,!(m+y<=u);){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}l>>>=m,u-=m,n.back+=m}if(l>>>=y,u-=y,n.back+=y,64&M){e.msg="invalid distance code",n.mode=La;break}n.offset=I,n.extra=15&M,n.mode=16203;case 16203:if(n.extra){for(k=n.extra;u<k;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=La;break}n.mode=16204;case 16204:if(0===c)break e;if(h=d-c,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=La;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),f=n.window}else f=i,p=o-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do{i[o++]=f[p++]}while(--h);0===n.length&&(n.mode=Ca);break;case 16205:if(0===c)break e;i[o++]=n.length,c--,n.mode=Ca;break;case ja:if(n.wrap){for(;u<32;){if(0===s)break e;s--,l|=r[a++]<<u,u+=8}if(d-=c,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?Yr(n.check,i,d,o-d):Er(n.check,i,d,o-d)),d=c,4&n.wrap&&(n.flags?l:Oa(l))!==n.check){e.msg="incorrect data check",n.mode=La;break}l=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,l+=r[a++]<<u,u+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=La;break}l=0,u=0}n.mode=16208;case 16208:N=Ia;break e;case La:N=ba;break e;case 16210:return wa;default:return va}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,(n.wsize||d!==e.avail_out&&n.mode<La&&(n.mode<ja||t!==pa))&&Ga(e,e.output,e.next_out,d-e.avail_out),g-=e.avail_in,d-=e.avail_out,e.total_in+=g,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?Yr(n.check,i,d,e.next_out-d):Er(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===ka?128:0)+(n.mode===za||n.mode===Da?256:0),(0===g&&0===d||t===pa)&&N===Ma&&(N=Na),N},Va={inflateReset:Ua,inflateReset2:Pa,inflateResetKeep:Ya,inflateInit:e=>Qa(e,15),inflateInit2:Qa,inflate:Ha,inflateEnd:e=>{if(Sa(e))return va;let t=e.state;return t.window&&(t.window=null),e.state=null,Ma},inflateGetHeader:(e,t)=>{if(Sa(e))return va;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,Ma):va},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,a;return Sa(e)?va:(r=e.state,0!==r.wrap&&r.mode!==_a?va:r.mode===_a&&(i=1,i=Er(i,t,n,0),i!==r.check)?ba:(a=Ga(e,t,n,n),a?(r.mode=16210,wa):(r.havedict=1,Ma)))},inflateInfo:"pako inflate (from Nodeca project)"};var Fa=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ja=Object.prototype.toString,{Z_NO_FLUSH:Ka,Z_FINISH:qa,Z_OK:Xa,Z_STREAM_END:$a,Z_NEED_DICT:eo,Z_STREAM_ERROR:to,Z_DATA_ERROR:no,Z_MEM_ERROR:ro}=Pr;function io(e){this.options=Qi.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zi,this.strm.avail_out=0;let n=Va.inflateInit2(this.strm,t.windowBits);if(n!==Xa)throw new Error(Ur[n]);if(this.header=new Fa,Va.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Bi.string2buf(t.dictionary):"[object ArrayBuffer]"===Ja.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Va.inflateSetDictionary(this.strm,t.dictionary),n!==Xa)))throw new Error(Ur[n])}function ao(e,t){const n=new io(t);if(n.push(e),n.err)throw n.msg||Ur[n.err];return n.result}io.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?qa:Ka,"[object ArrayBuffer]"===Ja.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Va.inflate(n,o),a===eo&&i&&(a=Va.inflateSetDictionary(n,i),a===Xa?a=Va.inflate(n,o):a===no&&(a=eo));n.avail_in>0&&a===$a&&n.state.wrap>0&&0!==e[n.next_in];)Va.inflateReset(n),a=Va.inflate(n,o);switch(a){case to:case no:case eo:case ro:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||a===$a))if("string"===this.options.to){let e=Bi.utf8border(n.output,n.next_out),t=n.next_out-e,i=Bi.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==Xa||0!==s){if(a===$a)return a=Va.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},io.prototype.onData=function(e){this.chunks.push(e)},io.prototype.onEnd=function(e){e===Xa&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Qi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var oo=function(e,t){return(t=t||{}).raw=!0,ao(e,t)},so={Inflate:io,inflate:ao,inflateRaw:oo,ungzip:ao,constants:Pr};const{Deflate:co,deflate:lo,deflateRaw:uo,gzip:go}=aa,{Inflate:ho,inflate:po,inflateRaw:fo,ungzip:yo}=so;var Mo={Deflate:co,deflate:lo,deflateRaw:uo,gzip:go,Inflate:ho,inflate:po,inflateRaw:fo,ungzip:yo,constants:Pr},Io=n(872),mo=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},vo=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},bo=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},wo=function(){function e(){this.tombstones=[],this.apiImplementations={showDialog:function(e){var t=e.title,n=e.content,r=e.okAction,i=e.cancelAction;return Eo.showDialog({title:t,content:n,okAction:r,cancelAction:i})},showToast:function(e){var t=e.text;return Ut.showToast({text:t})},ACEV2Log:{info:function(e){var n=e.message;return t.info({message:n})},success:function(e){var n=e.message;return t.success({message:n})},warn:function(e){var n=e.message;return t.warn({message:n})},error:function(e){var n=e.message;return t.error({message:n})}},isDarkMode:function(){return Ho.isDarkMode()},ACEV2DOM:{injectHTML:function(e){var t=e.HTMLCode;return pt.injectHTML({HTMLCode:t})},removeHTML:function(e){var t=e.tracker;return pt.removeElement({tracker:t})}}}}return e.prototype.installPlugin=function(e){return mo(this,arguments,void 0,(function(e){var t,n,r,i=e.pluginPack,a=e.bridged;return vo(this,(function(e){switch(e.label){case 0:t=!1,e.label=1;case 1:return e.trys.push([1,5,,6]),"none"===Ho.getPreference({category:"developer",k:"psv"})?[3,3]:[4,Wt.psv({signature:i.signature,pluginSelf:i.self})];case 2:return t=e.sent(),[3,4];case 3:t=!0,e.label=4;case 4:return[3,6];case 5:return e.sent(),Ut.showToast({text:Vo.t({key:"psv-check-failed-installation-denied"})}),[3,6];case 6:return t?this.checkIfInstalled({pluginPack:i})?(Ut.showToast({text:"安装被拒绝, 此插件「".concat(i.manifest.id,"」已经安装。")}),[2]):(a?(r=this.getInstalledPlugins(),i.enabled=!0,i.manifest.bridged=!0,-1!==(n=r.findIndex((function(e){return e.manifest.id===i.manifest.id})))?r[n]=i:r.push(i),this.saveInstalledPlugins({installedPlugins:r})):(r=this.getInstalledPlugins(),i.enabled=!0,r.push(i),this.saveInstalledPlugins({installedPlugins:r}),Eo.showDialog({title:Vo.t({key:"installation-succeed"}),content:Vo.t({key:"plugin"})+" "+i.manifest.id+" version"+i.manifest.versions[i.manifest.versions.length-1]+" "+Vo.t({key:"installation-succeed"})+". "+Vo.t({key:"press-ok-to-reload"}),okAction:function(){return location.reload()}})),[2]):(Ut.showToast({text:"安装被拒绝, 此插件「".concat(i.manifest.id,"」未通过PSV检查。")}),[2])}}))}))},e.prototype.uninstallPlugin=function(e){var n=e.manifest.id;Bt.draw();try{var r=this.getInstalledPlugins().filter((function(e){return e.manifest.id!==n}));this.saveInstalledPlugins({installedPlugins:r}),Eo.showDialog({title:Vo.t({key:"uninstallation-succeed"}),content:"插件「".concat(n,"」卸载完成，点击「好」以刷新页面。"),okAction:function(){return location.reload()}})}catch(e){Ut.showToast({text:"插件解除安装失败，在尝试解除安装插件「".concat(n,"」时出现错误，请再试一次。")}),t.error({message:JSON.stringify(e)})}Bt.destroy()},e.prototype.dangerUninstallPluginWithoutReloadAndNotice=function(e){var n=e.manifest.id;Bt.draw();try{var r=this.getInstalledPlugins().filter((function(e){return e.manifest.id!==n}));this.saveInstalledPlugins({installedPlugins:r})}catch(e){Ut.showToast({text:"插件解除安装失败，在尝试解除安装插件「".concat(n,"」时出现错误，请再试一次。")}),t.error({message:JSON.stringify(e)})}Bt.destroy()},e.prototype.uninstallBridgedPlugin=function(){var e=this.getInstalledPlugins().filter((function(e){return!0===e.manifest.bridged}));if(0!==e.length){var n=e[0].manifest.id;if(n)try{var r=this.getInstalledPlugins().filter((function(e){return e.manifest.id!==n}));this.saveInstalledPlugins({installedPlugins:r}),t.success({message:Vo.t({key:"uninstalled-bridged-plugin"})+n}),Ut.showToast({text:Vo.t({key:"uninstalled-bridged-plugin"})+n+Vo.t({key:"please-reload-page"})})}catch(e){Ut.showToast({text:Vo.t({key:"uninstall-bridged-plugin-failed"})+n+Vo.t({key:"please-try-again"})}),t.error({message:JSON.stringify(e)})}}},e.prototype.checkIfInstalled=function(e){var t=e.pluginPack,n=this.getInstalledPlugins(),r=!1;return n.forEach((function(e){e.manifest.id===t.manifest.id&&(r=!0)})),r},e.prototype.getInstalledPlugins=function(){var e=Zo.getPlugins();return e||(e=[],this.saveInstalledPlugins({installedPlugins:e})),e},e.prototype.saveInstalledPlugins=function(e){var t=e.installedPlugins;Zo.updatePluginsStorage({newPlugins:t})},e.prototype.getSelfPreference=function(e){var t=e.manifest;return this.getInstalledPlugins().find((function(e){return e.manifest.id===t.id})).manifest.settings},e.prototype.saveSelfPreference=function(e){var t=e.manifest,n=e.settings,r=this.getInstalledPlugins();r.find((function(e){return e.manifest.id===t.id})).manifest.settings=n,this.saveInstalledPlugins({installedPlugins:r})},e.prototype.initializePluginExecutionAndSetTrigger=function(){return mo(this,void 0,void 0,(function(){var e,n,r,i,a,o,s=this;return vo(this,(function(c){switch(c.label){case 0:if(e=this.getInstalledPlugins(),n=[],0===e.length)return[2];r=function(e){var r,i,a,o,c;return vo(this,(function(l){switch(l.label){case 0:return e.enabled?(r=e.self,i=e.manifest,a=!0,[4,Promise.all(i.requestedAPIs.map((function(e){return mo(s,void 0,void 0,(function(){return vo(this,(function(n){return this.apiImplementations[e]?[2,{name:e,target:this.apiImplementations[e]}]:(t.error({message:"Error loading plugin tombstone ".concat(i.id,", cannot resolve API ").concat(e," of undefined.")}),Ut.showToast({text:"插件「".concat(i.id,"」请求了一个未定义的API「").concat(e,"」，因此拒绝载入此插件。")}),a=!1,[2,void 0])}))}))})))]):[2,"continue"];case 1:if(o=l.sent(),!a)return[2,"continue"];if((c=o.filter((function(e){return void 0!==e}))).length===i.requestedAPIs.length)try{n.push({self:r,manifest:i,args:c,executed:!1})}catch(e){t.error({message:"Error creating plugin tombstone ".concat(i.id,": ").concat(JSON.stringify(e))}),Eo.showDialog({title:Vo.t({key:"request-reload"}),content:"插件载入器在生成插件「".concat(i.id,"」的墓碑中出现错误").concat(e,"，因此AcFun Evolved已中止运行，按下「好」以重新启动AcFun Evolved."),okAction:function(){return location.reload()}})}return[2]}}))},i=0,a=e,c.label=1;case 1:return i<a.length?(o=a[i],[5,r(o)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return this.tombstones=n,[4,this.ferryman()];case 5:return c.sent(),[2]}}))}))},e.prototype.ferryman=function(){return mo(this,void 0,void 0,(function(){var e,n=this;return vo(this,(function(r){switch(r.label){case 0:return e=function(e){return mo(n,[e],void 0,(function(e){var n,r,i,a,o,s,c,l,u=this,g=e.currentUrl;return vo(this,(function(e){for(n=this.tombstones,r=0,i=n;r<i.length;r++)if(!(a=i[r]).executed&&(o=a.self,s=a.args,(c=a.manifest).trigger.matches&&c.trigger.matches.length>0&&(l=c.trigger.matches.flatMap((function(e){return sn[e]||[]})),l.some((function(e){return e.test(g)})))))try{t.info({message:"executed ".concat(c.id)}),(new(Function.bind.apply(Function,bo(bo([void 0],s.map((function(e){return e.name})),!1),["manifest","getSelfPreference",o],!1)))).apply(void 0,bo(bo([],s.map((function(e){return e.target})),!1),[c,function(e){var t=e.manifest;return u.getSelfPreference({manifest:t})}],!1)),a.executed=!0}catch(e){t.error({message:"Error ferrying plugin ".concat(c.id,": ").concat(JSON.stringify(e))}),Ut.showToast({text:"摆渡人在执行插件「".concat(c.id,"」中出现错误").concat(JSON.stringify(e),"，因此已中止运行此插件。")})}return this.tombstones=n,[2]}))}))},[4,e({currentUrl:window.location.href})];case 1:return r.sent(),ln.urlChange((function(t){return mo(n,void 0,void 0,(function(){return vo(this,(function(n){switch(n.label){case 0:return[4,e({currentUrl:t})];case 1:return n.sent(),[2]}}))}))})),[2]}}))}))},e.prototype.wakeUpBuildInPlugins=function(){"full"!==Ho.getPreference({category:"developer",k:"psv"})&&Vn.wakeUp(),Wn.wakeUp()},e.prototype.extractAndInstallPlugin=function(e){var n=this,r=e.compressedData;Eo.showDialog({title:Vo.t({key:Vo.t({key:"wants-to-extract-and-install-plugin-package"})}),content:Vo.t({key:"do-you-really-want-to-do-that"}),okAction:function(){return mo(n,void 0,void 0,(function(){var e,n,i,a,o;return vo(this,(function(s){switch(s.label){case 0:Bt.draw(),s.label=1;case 1:return s.trys.push([1,3,,4]),(e=Mo.inflate(new Uint8Array(r))).buffer?(n=(0,Io.P)(e.buffer))&&0!==n.length?(i=n[0],i=(new TextDecoder).decode(i.fileData),a=JSON.parse(i),[4,this.installPlugin({pluginPack:a,bridged:!1})]):(Ut.showToast({text:Vo.t({key:"no-files-extracted-from-the-compressed-data"})}),[2]):(Ut.showToast({text:Vo.t({key:"decompressed-data-does-not-contain-valid-buffer-property"})}),[2]);case 2:return s.sent(),[3,4];case 3:return o=s.sent(),t.error({message:"Error extracting and installing plugin package: ".concat(JSON.stringify(o))}),Ut.showToast({text:Vo.t({key:"error-extracting-and-installing-plugin-package"})}),[3,4];case 4:return Bt.destroy(),[2]}}))}))},cancelAction:function(){return Ut.showToast({text:"canceled"})}})},e.prototype.downloadAndInstallPluginPack=function(e){var t=this,n=e.manifest,r=ko.pluginDownloadURL({manifest:n});Eo.showDialog({title:ko.MASTER_MANIFEST.id+" "+Vo.t({key:"wants-to-download-and-install-plugin-package"}),content:Vo.t({key:"download-url"})+": ["+r+"] | "+Vo.t({key:"target-plugin-id"})+n.id,okAction:function(){return mo(t,void 0,void 0,(function(){var e,t,n,i,a,o;return vo(this,(function(s){switch(s.label){case 0:return Bt.draw(),[4,Qo.monkey({method:"GET",url:r,responseType:"arraybuffer"})];case 1:e=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),t=Mo.inflate(e),n=(0,Io.P)(t),i=n[0],a=JSON.parse((new TextDecoder).decode(i.fileData)),[4,this.installPlugin({pluginPack:a,bridged:!1})];case 3:return s.sent(),[3,5];case 4:return o=s.sent(),Ut.showToast({text:Vo.t({key:"error-extracting-and-installing-plugin-package"})}),console.error("解压缩失败",o),[3,5];case 5:return Bt.destroy(),[2]}}))}))},cancelAction:function(){return Ut.showToast({text:Vo.t({key:"canceled"})})}})},e.prototype.dangerDownloadAndInstallPluginPackWithoutUserConfirm=function(e){return mo(this,arguments,void 0,(function(e){var t,n,r,i,a,o,s,c=e.manifest;return vo(this,(function(e){switch(e.label){case 0:return t=ko.pluginDownloadURL({manifest:c}),Bt.draw(),[4,Qo.monkey({method:"GET",url:t,responseType:"arraybuffer"})];case 1:n=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),r=Mo.inflate(n),i=(0,Io.P)(r),a=i[0],o=JSON.parse((new TextDecoder).decode(a.fileData)),[4,this.installPlugin({pluginPack:o,bridged:!1})];case 3:return e.sent(),[3,5];case 4:return s=e.sent(),Ut.showToast({text:Vo.t({key:"error-extracting-and-installing-plugin-package"})}),console.error("解压缩失败",s),[3,5];case 5:return Bt.destroy(),[2]}}))}))},e}();const No=new wo;var To=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},Ao=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const _o=new(function(){function t(){}return t.prototype.getPluginLatestVersion=function(e){var t=e.manifest;return t.versions[t.versions.length-1]},t.prototype.checkSelfUpdate=function(){return To(this,void 0,void 0,(function(){var t,n,r,i,a;return Ao(this,(function(o){switch(o.label){case 0:return t=ko.getSelfLatestVersionManifestURL(),[4,Qo.monkey({method:"GET",url:t,responseType:"text"})];case 1:return n=o.sent(),r=JSON.parse(n),i=r[r.length-1],a=e.compareVersion({version1:e.getCurrentVersion(),version2:i.version+" "+i.versionTag,target:Ho.getPreference({category:"general",k:"updateRuntimeTo"})}),[2,{latestVersionInfo:i,compareResult:a}]}}))}))},t.prototype.checkPluginsUpdate=function(){return To(this,void 0,void 0,(function(){var e,t,n,r,i,a,o,s,c,l;return Ao(this,(function(u){switch(u.label){case 0:return[4,Qo.monkey({method:"GET",url:ko.bigManifestURL()})];case 1:if(e=u.sent(),0===(t=No.getInstalledPlugins()).length)return[2,[]];for(n=JSON.parse(e),r=[],i=0,a=n;i<a.length;i++)for(o=a[i],s=0,c=t;s<c.length;s++)l=c[s],o.id===l.manifest.id&&o.versions[o.versions.length-1]!==l.manifest.versions[l.manifest.versions.length-1]&&r.push({latestRelease:o,currentRelease:l});return[2,r]}}))}))},t.prototype.updateSelf=function(){Zo.localSet({k:"selfUpdateRecord",v:{timestamp:Fo.getTimestamp()}}),window.open(ko.getSelfLatestScriptURL())},t.prototype.updatePlugin=function(e){return To(this,arguments,void 0,(function(e){var t=e.manifest,n=e.remainingUpdatablePlugins;return Ao(this,(function(e){switch(e.label){case 0:return 0===n.length&&Zo.localSet({k:"pluginsUpdateRecord",v:{timestamp:Fo.getTimestamp()}}),No.dangerUninstallPluginWithoutReloadAndNotice({manifest:t}),[4,No.dangerDownloadAndInstallPluginPackWithoutUserConfirm({manifest:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.timeToCheckSelfUpdate=function(){var e=Ho.getPreference({category:"general",k:"updateRuntimeWhen"}),t=Zo.localGet({k:"selfUpdateRecord"});if(!t){var n=Fo.getTimestamp();Zo.localSet({k:"selfUpdateRecord",v:{timestamp:n}}),t={timestamp:n}}if("startup"===e)return!0;if("daily"===e){var r=t.timestamp;return Fo.getTimestamp()-r>=864e5}if("weekly"===e){r=t.timestamp;return Fo.getTimestamp()-r>=6048e5}if("monthly"===e){r=t.timestamp;return Fo.getTimestamp()-r>=2592e6}return!1},t.prototype.timeToCheckPluginsUpdate=function(){var e=Ho.getPreference({category:"general",k:"updatePluginsWhen"}),t=Zo.localGet({k:"pluginsUpdateRecord"});if(!t){var n=Fo.getTimestamp();Zo.localSet({k:"pluginsUpdateRecord",v:{timestamp:n}}),t={timestamp:n}}if("startup"===e)return!0;if("daily"===e){var r=t.timestamp;return Fo.getTimestamp()-r>=864e5}if("weekly"===e){r=t.timestamp;return Fo.getTimestamp()-r>=6048e5}if("monthly"===e){r=t.timestamp;return Fo.getTimestamp()-r>=2592e6}return!1},t.prototype.selfReleaseTracker=function(){return To(this,void 0,void 0,(function(){var t,n=this;return Ao(this,(function(r){switch(r.label){case 0:return this.timeToCheckSelfUpdate()?[4,this.checkSelfUpdate()]:[3,2];case 1:(t=r.sent()).compareResult<0&&Eo.showDialog({title:Vo.t({key:"version"})+" "+t.latestVersionInfo.version+" "+t.latestVersionInfo.versionTag+" "+Vo.t({key:"has-been-released"}),content:Vo.t({key:"newer-runtime-version-has-been-released-please-consider-updating"})+" "+Vo.t({key:"current-version"})+" "+e.getCurrentVersion()+" "+Vo.t({key:"to"})+" "+t.latestVersionInfo.version+" "+t.latestVersionInfo.versionTag,okAction:function(){return n.updateSelf()},cancelAction:function(){Ut.showToast({text:Vo.t({key:"cancelled"})})}}),r.label=2;case 2:return[2]}}))}))},t.prototype.pluginsReleaseTracker=function(){return To(this,void 0,void 0,(function(){var e,t=this;return Ao(this,(function(n){switch(n.label){case 0:return this.timeToCheckPluginsUpdate()?[4,this.checkPluginsUpdate()]:[3,2];case 1:(e=n.sent()).length>0&&Eo.showDialog({title:Vo.t({key:"newer-version-of"})+" "+e[0].latestRelease.id+" "+Vo.t({key:"has-been-released"}),content:Vo.t({key:"do-you-want-to-update-this-plugin-from"})+" "+e[0].currentRelease.manifest.versions[e[0].currentRelease.manifest.versions.length-1]+" "+Vo.t({key:"to"})+" "+e[0].latestRelease.versions[e[0].latestRelease.versions.length-1],okAction:function(){return To(t,void 0,void 0,(function(){return Ao(this,(function(t){switch(t.label){case 0:return[4,this.updatePlugin({manifest:e[0].latestRelease,remainingUpdatablePlugins:e.slice(1)})];case 1:return t.sent(),[2]}}))}))},cancelAction:function(){Ut.showToast({text:Vo.t({key:"cancelled"})})}}),n.label=2;case 2:return[2]}}))}))},t}());const ko=new(function(){function t(){this.ANIMATION_DURATION=200,this.TOAST_DURATION=2e3,this.DEBOUNCE_DURATION=500,this.MASTER_MANIFEST={icon:"data:image/svg+xml;base64,IDxzdmcgIHZlcnNpb249IjEuMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjkwMC4wMDAwMDBwdCIgaGVpZ2h0PSIzMDAuMDAwMDAwcHQiIHZpZXdCb3g9IjAgMCA5MDAuMDAwMDAwIDMwMC4wMDAwMDAiICBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0Ij4gIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLDMwMC4wMDAwMDApIHNjYWxlKDAuMTAwMDAwLC0wLjEwMDAwMCkiIGZpbGw9IiNmZDRjNWQiIHN0cm9rZT0ibm9uZSI+IDxwYXRoIGQ9Ik03NDUzIDI0OTcgYy0yIC00IDIgLTIwIDEwIC0zNSA4IC0xNSAyNyAtNTEgNDIgLTgxIGwyNyAtNTMgMjQ2IDMgYzIwMSAzIDI0NiAyIDI1MCAtMTAgMiAtNyAxIC0xNiAtNCAtMjAgLTE4IC0xMyAtNjQgLTg4IC02NCAtMTA0IDAgLTIwIDMgLTIwIC0xODYgLTE3IGwtMTUxIDIgLTU5IC00NCBjLTMyIC0yNSAtOTAgLTY1IC0xMjkgLTkwIC01MyAtMzUgLTc1IC01NyAtOTEgLTkwIC02NSAtMTMzIC03NiAtMTU2IC05NCAtMTgzIC0zNiAtNTYgLTUxIC04NyAtNDYgLTkyIDMgLTQgMTY5IC02IDM2OCAtNSAzNjAgMSAzNjMgMSAzODAgMjIgMTAgMTIgMTggMjggMTggMzYgMCA3IDkgMjggMjAgNDYgMjMgMzggMjYgNjQgOCA3MCAtMTYgNSAtMzMwIC04IC00MTUgLTE3IC02MyAtNyAtNjMgLTYgLTYzIDE5IDAgMTQgNCAyNiA4IDI2IDUgMCAxNCAxMCAyMCAyMyA3IDEyIDIzIDQwIDM2IDYyIGwyNCAzOSAxNjAgLTMgMTYwIC0zIDU0IDM5IGMyOSAyMSA4NiA2MSAxMjcgODggNDggMzMgNzggNjAgODYgODAgMjAgNDkgMjQgNTggNDggMTAwIDYxIDEwNCA5NiAxNzYgOTIgMTg4IC00IDkgLTEwNCAxMiAtNDQxIDEyIC0yNDAgMCAtNDM4IC0zIC00NDEgLTh6IG02OTEgLTEwMyBjMjcgLTEwIDE5IC02MiAtMTUgLTEwNSAtMzcgLTQ3IC00NiAtNDkgLTQxIC02IDMgMjYgLTIgMzYgLTI3IDU1IC01MiAzOCAtMzkgNTUgNDYgNjEgMTIgMCAyOCAtMiAzNyAtNXogbS02NzkgLTQ4NyBjLTQgLTE1IDIgLTM1IDE5IC02MCA0MyAtNjIgMzkgLTcyIC0yNCAtNzMgLTkzIC0xIC0xMDQgMjkgLTM5IDEwNyAyMiAyNyA0MyA0OSA0NSA0OSAyIDAgMiAtMTAgLTEgLTIzeiIvPiA8cGF0aCBkPSJNNjUwMCAyNDczIGMwIC0xMiA0IC0yNCA5IC0yOCA1IC0zIDIyIC0yNyAzOCAtNTMgbDI4IC00NyAwIC0zMzUgMCAtMzM1IDEyNSAtMyAxMjUgLTIgMjggNDcgYzE1IDI3IDU2IDg5IDkyIDEzOCAzNSA1MCA5NCAxMzMgMTMwIDE4NSAzNiA1MiA4NCAxMjAgMTA2IDE1MCAyMiAzMCA1NSA3OCA3NCAxMDUgMTkgMjggNDIgNjEgNTIgNzUgOSAxNCAzMCA0MCA0NSA1OCAxNSAxOCAyOCA0MSAyOCA1MiAwIDE3IC03IDE4IC0xMTcgMTMgLTg4IC00IC0xMjEgLTkgLTEyOCAtMjAgLTUgLTggLTI5IC00MiAtNTIgLTc2IC0yMyAtMzQgLTY4IC0xMDAgLTk5IC0xNDcgLTYyIC05MSAtNzMgLTEwOCAtMTExIC0xODIgLTE2IC0zMyAtMzAgLTQ4IC00NCAtNDggLTIzIDAgLTI1IC0xNSAtMyAtMjQgOSAtNCAzMiAzIDUxIDE0IDY2IDM5IDcwIDE5IDE2IC03MSAtMjEgLTMzIC00MyAtNzAgLTQ5IC04MSAtNyAtMTEgLTI3IC0zNSAtNDUgLTU0IC00MCAtNDIgLTEwMSAtNDggLTExOSAtMTMgLTggMTMgLTExIDk5IC0xMSAyNDcgMCAxMjUgMSAyNTMgMCAyODUgMCA2MyAxMCA3MSAzOSAzMCAxNCAtMjEgMjEgLTUzIDI2IC0xMjggNiAtOTQgMjkgLTE5NSA0NCAtMTk1IDI0IDAgNjQgNDMxIDQzIDQ1MyAtNSA1IC03OSA5IC0xNjUgMTAgLTE1NSAyIC0xNTYgMiAtMTU2IC0yMHoiLz4gPHBhdGggZD0iTTE1ODcgMjExNCBjLTEwIC0xMSAtOSAtNTIgMiAtNTkgNiAtMyAyNiAtMzggNDYgLTc3IDIwIC00MCA0MiAtNzkgNTAgLTg4IDcgLTggMTYgLTI3IDIwIC00MSA2IC0yMiAtMyAtMzggLTUyIC05NSAtOTcgLTExNSAtMTM3IC0xNjQgLTE1NSAtMTkyIC0xMCAtMTUgLTMyIC00MyAtNTEgLTYyIC0xOCAtMTkgLTQ2IC01NCAtNjEgLTc4IC0xNiAtMjQgLTM1IC00NiAtNDIgLTUwIC03IC00IC0yNyAtMjggLTQ2IC01MyAtMzIgLTQ2IC05OSAtMTI5IC0xNDEgLTE3OSAtMTIgLTE0IC01MSAtNjQgLTg3IC0xMTEgLTY2IC04NiAtMTE5IC0xNTMgLTE3NiAtMjE4IC0yOSAtMzUgLTEwOSAtMTM1IC0xNDkgLTE4OSAtMTEgLTE1IC0zOSAtNDUgLTYxIC02NyAtMjMgLTIyIC00NCAtNDkgLTQ1IC02MCAtNCAtMjAgMiAtMjAgMTAwOSAtMjMgbDEwMTIgLTIgMCAzNiBjMCAyMCAtNyA2MyAtMTYgOTYgLTggMzMgLTEzIDcyIC05IDg3IDMgMTQgLTIgNjQgLTEwIDExMSAtOCA0NyAtMTIgMTA1IC05IDEzMCAzIDI1IDEgNjUgLTYgODkgLTYgMjQgLTEzIDg1IC0xNSAxMzUgLTIgNTAgLTkgMTA3IC0xNCAxMjYgLTYgMTkgLTExIDYyIC0xMSA5NSAwIDMzIC03IDk1IC0xNSAxMzggLTggNDMgLTE1IDEwNCAtMTUgMTM1IC0xIDMyIC02IDg3IC0xMyAxMjMgLTggMzggLTEwIDc3IC01IDk0IDQgMTYgMyA0NiAtMiA2NyAtNiAyMCAtMTEgNjQgLTExIDk3IC0xIDM0IC02IDY0IC0xMSA2NyAtNiA0IC0yMDIgNyAtNDM3IDggLTIzNCAxIC00MzUgNSAtNDQ2IDEwIC0xMSA0IC0yNCA0IC0yOCAweiBtNzU2IC0xMDEgYzQxIC00IDYxIC0xMSA2NyAtMjQgMTQgLTI1IDg4IC02OTAgOTYgLTg2NCAzIC00OSA5IC0xMDMgMTQgLTEyMCA0IC0xNiAxMSAtNzcgMTUgLTEzNSA0IC01OCAxMSAtMTI1IDE1IC0xNTAgMTEgLTU5IDIgLTEzMCAtMTcgLTEzMCAtNyAwIC0xNiAtNiAtMTkgLTEzIC0zIC05IC0yMSAtMTQgLTUyIC0xMyAtMjYgMCAtMTU5IC0xIC0yOTcgLTMgLTU5OSAtNiAtMTIyNyAwIC0xMjcxIDExIC0yNCA3IC00NCAxNiAtNDQgMjAgMCAyMiA2MiAxMDggMTk1IDI2OCAzOSA0NyA5NyAxMjEgMTMwIDE2NSAzMyA0NCAxMDIgMTMyIDE1NSAxOTUgNTMgNjMgMTAzIDEyNiAxMTIgMTQwIDkgMTQgNDUgNTkgODIgMTAwIDM2IDQxIDY2IDgwIDY2IDg2IDAgNiAxMCAxOSAyMSAzMCAzMyAyOSAxMjYgMTU2IDEzOSAxODkgNyAxNyAxNyA0MCAyMyA1MyA4IDE3IDYgMzcgLTExIDg2IC0yNSA3MyAtMjcgODcgLTEwIDEwNCAxMyAxMyA0NzkgMTcgNTkxIDV6Ii8+IDxwYXRoIGQ9Ik0yMDQzIDE3NTAgYy0xMiAtNSAtMzEgLTE4IC00MiAtMjkgLTEyIC0xMiAtMjUgLTIxIC0zMCAtMjEgLTYgMCAtNTAgLTUxIC0xMDAgLTExMiAtNTAgLTYyIC0xMDAgLTEyNCAtMTExIC0xMzggLTExIC0xNCAtMzggLTQ3IC02MCAtNzUgLTIyIC0yNyAtNDkgLTYxIC02MCAtNzUgLTExIC0xNCAtNDIgLTUyIC02NyAtODUgLTI2IC0zMyAtNzAgLTg3IC05OCAtMTIwIC0yOCAtMzMgLTY3IC04NSAtODUgLTExNSAtMTkgLTMwIC0zNyAtNTcgLTQxIC02MCAtMjIgLTE4IC00NCAtMTA2IC0yOSAtMTE1IDE3IC0xMCAyMDggMjA1IDI5NiAzMzMgMjAgMjggNDAgNTIgNDUgNTIgNCAwIDIyIDIxIDM5IDQ2IDE3IDI1IDQyIDU4IDU1IDcyIDMzIDM2IDEwNyAxMzAgMTIxIDE1NCA2IDExIDIzIDMxIDM2IDQ2IDQwIDQ0IDExMiAxNDQgMTMzIDE4NiAxMSAyMSAyOCA0MSAzNyA0NCAxMCAyIDE1IDggMTIgMTMgLTYgMTEgLTIyIDExIC01MSAtMXoiLz4gPHBhdGggZD0iTTIxMjQgMTY5MyBjLTQgLTE2IC0xMSAtMzMgLTE2IC00MCAtNiAtNyAtOCAtMzYgLTUgLTY1IDMgLTI5IDEwIC0xMDcgMTYgLTE3MyA2IC02NiAxNSAtMTM4IDIwIC0xNjAgNiAtMjIgMTEgLTY1IDExIC05NyAwIC0zMSA3IC05MSAxNSAtMTMzIDggLTQyIDEyIC04OSA5IC0xMDQgLTQgLTE4IDIgLTQ0IDE1IC03MSAyNiAtNTUgMTcgLTYzIC02NCAtNTIgLTEwNyAxMyAtNjY0IDYgLTcxNCAtMTAgbC00NCAtMTMgMjYgLTMwIDI1IC0zMCAzNTQgMCBjMzkzIDAgMzY3IC00IDQ0NiA3MSBsMzcgMzUgLTIgODggYy0xIDQ4IC0xMCAxNTUgLTE4IDIzNyAtOSA4MiAtMjMgMjEwIC0zMCAyODQgLTE4IDE2OCAtMjcgMjE2IC00OCAyNTggLTIxIDM5IC0yNSA0MCAtMzMgNXoiLz4gPHBhdGggZD0iTTMwODcgMjExNCBjLTE0IC0xNCAtNyAtNDQgMjIgLTg2IDE2IC0yNCAzMiAtNTQgMzYgLTY4IDQgLTE0IDE5IC00MiAzMSAtNjIgMTMgLTIxIDI0IC00NSAyNCAtNTMgMCAtOSA2IC0xOCAxNCAtMjEgOCAtMyAxOCAtMTkgMjEgLTM1IDUgLTIyIC0xIC00MiAtMjkgLTg4IC0yMCAtMzIgLTUyIC05MiAtNzEgLTEzMiAtMTkgLTQxIC0zOSAtODEgLTQ0IC04OSAtNSAtOCAtODAgLTE1NyAtMTY2IC0zMzAgLTg2IC0xNzMgLTE2MiAtMzIzIC0xNjggLTMzMiAtOSAtMTQgLTUgLTI2IDIxIC02MyAxOCAtMjUgMzIgLTQ4IDMyIC01MSAwIC01IDgyIC0xODIgOTkgLTIxNCA3IC0xMyA3NiAtMTUgNTI3IC0xNSBsNTE5IDAgMjIgNDUgYzEyIDI1IDMzIDcwIDQ3IDEwMCAzMSA2NSA0MSA4MiA4MCAxMzMgMjMgMzEgMjYgNDAgMTUgNTMgLTEwIDEyIC0yNCAxNCAtNjAgOSAtMjYgLTQgLTE3MiAtNyAtMzI1IC03IC0yNTcgMCAtNDYzIC0xMCAtNDg1IC0yNCAtMTcgLTEwIDIzIC01MyA1NCAtNTkgMTggLTMgMTYzIC03IDMyMyAtOSAxNjAgLTIgMjk2IC02IDMwMyAtMTAgMTUgLTEwIDE0IC01MiAtNCAtODYgLTMxIC01OSAtMzggLTYwIC00ODAgLTYwIC00OTMgMCAtNDY2IC03IC01NDEgMTM1IC0zMSA2MCAtMzUgNzcgLTMxIDEyMCA0IDQ5IDMxIDExMyA4NyAyMTAgMTYgMjggMzUgNjYgNDEgODUgNyAxOSAzNCA3NCA2MCAxMjMgMjYgNDkgNTEgOTggNTUgMTEwIDQgMTIgMTQgMzMgMjQgNDcgMTkgMjcgNjAgMTA4IDgwIDE1NSA3IDE3IDI3IDU5IDQ1IDk1IDUxIDEwMSA1MyAxNjUgOCAyNDYgLTIwIDM1IC0yNyAxMDIgLTEzIDExOSAxMSAxMyA5NCAxNSA2NDkgMTUgMzUwIDAgNjQ2IC0zIDY1OSAtNiAzMyAtOSAyOSAtNTcgLTEwIC0xMjIgLTI0IC0zOCAtNDEgLTU1IC02MCAtNTkgLTE2IC0zIC0yOCAtOSAtMjggLTEzIDAgLTQgLTEyIC0xMSAtMjcgLTE1IC0xNiAtMyAtMzUgLTEzIC00MyAtMjAgLTggLTcgLTQ0IC0yMyAtODAgLTM1IC0zNiAtMTIgLTkwIC0zMyAtMTIwIC00NyAtNjkgLTMxIC0xMDEgLTI0IC0xMTEgMjYgLTQgMTggLTE0IDQwIC0yMyA0OSAtMTUgMTUgLTE2IDE0IC0xNiAtMTQgMCAtMjEgLTEwIC0zOSAtMzAgLTU5IC0xNiAtMTYgLTMwIC0zNCAtMzAgLTM5IDAgLTYgLTI1IC00OSAtNTUgLTk2IC0zMCAtNDcgLTU1IC05MSAtNTUgLTk4IDAgLTI3IDMyIC0yNCA3NSA3IDI0IDE3IDgxIDQ5IDEyNyA3MiA0NiAyMiA5NyA0OSAxMTMgNTkgMTcgMTAgMzkgMTkgNTAgMTkgMTIgMSAyNSA1IDMwIDkgNiA1IDMwIDE1IDU1IDIyIDI1IDcgNTYgMTkgNzAgMjYgNjcgMzQgMTQwIDY0IDE1NSA2NCAxOCAwIDc1IDU1IDc1IDcyIDAgMTYgNzggMTcyIDEwNSAyMDggMjYgMzYgMzMgNzYgMTMgODIgLTYgMiAtNDMgMCAtODIgLTQgLTg1IC0xMSAtMTUyMyAtNSAtMTU1MSA2IC0xMSA0IC0yNCA0IC0yOCAweiIvPiA8cGF0aCBkPSJNNDkwOCAyMTEyIGMtMzAgLTYgLTI5IC0zMyAyIC03MiAxNiAtMjEgMzAgLTQyIDMwIC00OCAwIC01IDcgLTE1IDE1IC0yMiA4IC03IDE1IC0yMCAxNSAtMjkgMCAtOSAyMCAtNTIgNDUgLTk1IGw0NSAtNzkgLTI4IC00MSBjLTI4IC00MiAtNDQgLTczIC02MiAtMTE2IC01IC0xNCAtMTQgLTMyIC0xOCAtNDAgLTI1IC00NCAtODUgLTE2NCAtMTAyIC0yMDIgLTYgLTEzIC0xNCAtMzEgLTIwIC00MCAtMjQgLTQzIC0zMSAtNTYgLTUxIC05OCAtMjUgLTU0IC01NiAtMTE2IC03NSAtMTUwIC03IC0xNCAtMjcgLTU0IC00NCAtOTAgLTMyIC02NyAtMzggLTc4IC03NyAtMTQyIGwtMjMgLTM4IDE5IC0zNyBjMTEgLTIxIDM2IC03MiA1NiAtMTEzIDIwIC00MSA0OCAtMTAwIDYzIC0xMzAgbDI3IC01NSA0ODQgMCBjNDIwIDAgNDg1IDIgNDkyIDE1IDQgOCAyNCA1MSA0NSA5NSAyMCA0MyA1NCAxMDggNzYgMTQzIDQ4IDc4IDQxIDk3IC0zMSA4OCAtMjUgLTMgLTE4NyAtOCAtMzYwIC0xMiAtMTczIC0zIC0zMjQgLTEwIC0zMzcgLTE0IC0xMiAtNSAtMzIgLTYgLTQ0IC0zIC0zMiA5IC0yMiAtMTYgMTggLTQzIDI5IC0yMCA0OSAtMjIgMjI0IC0yNyAxMDYgLTMgMjM1IC01IDI4NyAtNSA1MSAwIDk4IC01IDEwNCAtMTEgNyAtNyA1IC0yMyAtOCAtNTAgLTI5IC02NCAtNTQgLTgyIC0xMjcgLTg3IC03NyAtNiAtOTUgLTcgLTEzMyAtNSAtMTYgMSAtMTQ5IDEgLTI5NCAxIC0yOTIgMCAtMzI1IDUgLTM1OCA1MyAtNDMgNjMgLTgzIDE1MyAtODMgMTg3IDAgMzAgNzMgMTk2IDE0NyAzMzUgMjMgNDMgMTQ3IDI5NCAxNjYgMzM1IDkgMTkgMjUgNTEgMzUgNzAgNDAgNzEgODAgMTc2IDg2IDIyMyA0IDM3IDEgNTkgLTE5IDEwMyAtMzMgNzUgLTQ0IDExOSAtMzQgMTM1IDcgMTIgMTA2IDE1IDU2NiAxNyAzMDcgMiA1OTEgMCA2MzEgLTMgNjUgLTYgNzIgLTkgNzIgLTI4IC0xIC0zMCAtMzMgLTk5IC01NSAtMTE3IC0xNSAtMTIgLTY3IC0xNSAtMzA5IC0xNyAtNDc0IC0yIC00MTYgNCAtNDc5IC00OCAtNDkgLTQwIC02OSAtNjcgLTEyNCAtMTcwIC0zMSAtNTkgLTQ4IC0xMzMgLTM5IC0xNzAgOCAtMzMgMTggLTMxIDM2IDUgOCAxNiA0MCA2OSA3MCAxMTcgMzAgNDggNjIgMTExIDcyIDEzOCAxMSAzMiAyMiA0OCAzMCA0NSA3IC0yIDE5MiAtNiA0MTAgLTggbDM5NyAtMyAxNSAzMCBjOSAxNiAxNiAzNiAxNyA0MyAwIDcgMTMgMzggMjkgNjggNTAgOTcgNzAgMTM0IDg0IDE1OSA4IDEzIDEyIDI5IDEwIDM1IC0zIDggLTIwNCAxMCAtNzIyIDggLTM5NSAtMiAtNzQ3IDEgLTc4MyA1IC0zNSA1IC03MSA3IC04MSA1eiIvPiA8cGF0aCBkPSJNMzc3NiAxODUyIGMtNDYgLTQgLTExMSAtNDYgLTE0OCAtOTQgLTE0IC0xOSAtNzAgLTEyMSAtMTI0IC0yMjggLTUzIC0xMDcgLTEwMyAtMjAyIC0xMTAgLTIxMCAtNiAtOCAtMTUgLTI5IC0xOSAtNDcgLTMgLTE3IC0xMiAtMzcgLTIwIC00MyAtNyAtNiAtMTYgLTIzIC0yMCAtMzggLTQgLTE1IC0xNyAtNDAgLTI5IC01NyAtMjYgLTM1IC01MCAtODYgLTk2IC0yMDQgLTI2IC02NSAtMzEgLTg5IC0yNCAtMTA5IDExIC0zMSAzNCAtNDEgMzQgLTE1IDAgMTAgMTAgMzEgMjMgNDYgMzUgNDQgNTUgODIgMjIzIDQxNyA4NyAxNzMgMTY4IDMzMSAxNzkgMzUwIDEyIDE5IDMyIDYzIDQ1IDk4IDI0IDYxIDI1IDYyIDU1IDU1IDE2IC01IDgwIC03IDE0MiAtNyA5NiAyIDExNiA1IDEzOCAyMiBsMjYgMjEgLTI1IDE2IGMtMTQgOSAtNDIgMTggLTYzIDIxIC03NSA3IC0xNDkgMTAgLTE4NyA2eiIvPiA8cGF0aCBkPSJNNTkyNSAxNDYwIGMtMzMgLTQgLTE1MCAtOCAtMjYwIC05IC0yNTEgLTIgLTMzOCAtMjIgLTI3MyAtNjUgMTggLTEyIDY2IC0xNiAyMjIgLTE5IDE3NCAtMyAyMDEgLTYgMjEyIC0yMSAxNCAtMjAgNCAtNjkgLTIxIC05NiAtMjggLTMxIC05MyAtMzggLTMzOSAtMzkgbC0yMzkgMCAtNDAgLTI4IGMtNTAgLTM1IC05MCAtODggLTEzMiAtMTc4IC01MSAtMTA5IC03MyAtMjEzIC00MiAtMjAzIDI5IDEwIDE3NSAyNTggMTc2IDMwMCAxIDEwIDkgMjEgMTkgMjUgOSA1IDE1NCA2IDMyMiAzIDE2OCAtMyAzMTAgLTQgMzE3IC0yIDkgMyAxMTMgMjAwIDExMyAyMTYgMCAzIDE0IDI2IDMxIDUxIDMwIDQ0IDMzIDc3IDcgNzQgLTcgLTEgLTQwIC01IC03MyAtOXoiLz4gPC9nPiA8L3N2Zz4g",name:"AcFun Evolved Runtime",id:"@wenzi7777/acev2_runtime",versions:[e.getCurrentVersion()],description:"AcFun Evolved Runtime V2.",createdAt:new Date("2024-08-09").getTime()+"",updatedAt:(new Date).getTime()+"",author:"wenzi7777",copyright:"(c)2024 wenzi7777, licensed under the MIT License.",requestedAPIs:[],website:"https://acev2.1205.moe/",trigger:{receiveHandler:!0,matches:["*"]},settings:[]},this.PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAilgGwC2CNm3zSSUzaz7j\ncIM08uKKGGmWs1yoQNUzBsgX/cnuVQsuPL79RDtt5P8/aPwKyzFKcd2kxIzKbLr/\nXTOhPz6miVcRd86HiFJmEC1zO/9FQITMNcN4/xjGGnKZWa80su7CpFdHkTLifLiO\nP2U7qi/yiNOrjEfo4ymCjFToFBYQ2VQ6Te5mnQxvmK9arKwm/wT40OPk9H8YpJnx\nZiPLyCCYhzOQCHHijlc/iI2oNw0UnqLJ4wDsBSnuePC9QWyz3QdV+o//AVZpjGq6\nXWWtEOgGfY5nyOSzp19FbiVgbxV3QX8RWBP3ifPtJhv0D16X1joCELgnqtKbaVkG\nL6+m0r+YSoZojY2HY0159PafKkYg5xhTTCLyXtsWscEFd/PK2sm4Ag/htuGYEX2n\nHH9XGyi1oV/8zeFF4YKe5DlEyxy5KaBnRBGyo4YSfDZD4+PGTponUOaJc1iC/qPu\nYnCFobD55bs2zlDWpJUNLaUIkijFWMwNbtqlRGp5wUnNrFdv8k6L2vR9fUnetxoO\nxowBvt/quZbgpn5K/WVF8QML3dY4clPDGYvYceKPGVCdZUI+NTnfeeH45ldOYSin\n3z+cDYEA7wQaPtu57mRRQOBVUaa5tCP43OJHtlsFjKJmvx4Iw2Z4OEUZZJThZcJG\nyl8yJuhgZ/FJ6NU5dSVzRjkCAwEAAQ==\n-----END PUBLIC KEY-----",this.PAGE_SIZE=8}return t.prototype.baseSelfRepoURL=function(){var e=Ho.getPreference({category:"general",k:"source"});return"github"===e?"https://raw.githubusercontent.com/wenzi7777/AcFun_Evolved/v2/":"cloudflare"===e?"https://acev2.1205.moe/":"jsdelivr"===e?"https://cdn.jsdelivr.net/gh/wenzi7777/AcFun_Evolved@vv2/":void Ut.showToast({text:Vo.t({key:"invalid-source-please-select-again"})})},t.prototype.basePluginRepoURL=function(){var e=Ho.getPreference({category:"general",k:"source"});return"github"===e?"https://raw.githubusercontent.com/wenzi7777/acev2_plugins/main/":"cloudflare"===e?"https://acev2-plugins.1205.moe":"jsdelivr"===e?"https://cdn.jsdelivr.net/gh/wenzi7777/acev2_plugins/@main/":void Ut.showToast({text:Vo.t({key:"invalid-source-please-select-again"})})},t.prototype.bigManifestURL=function(){return this.basePluginRepoURL()+"bigManifest.json?t="+Fo.getTimestamp()},t.prototype.developerKitURL=function(){return this.basePluginRepoURL()+"developer-kit.zip?t="+Fo.getTimestamp()},t.prototype.pluginDownloadURL=function(e){var t=e.manifest;return"".concat(this.basePluginRepoURL()).concat(t.id,"/").concat(_o.getPluginLatestVersion({manifest:t}),"/raw.json.tar.gz")+"?t="+Fo.getTimestamp()},t.prototype.getSelfLatestVersionManifestURL=function(){return this.baseSelfRepoURL()+"versions.json?t="+Fo.getTimestamp()},t.prototype.getSelfLatestScriptURL=function(){return this.baseSelfRepoURL()+"dist/acfun.evolved.bundle.min.user.js?t="+Fo.getTimestamp()},t}());var xo=pt.createRoot(),Do=pt.locateElement({tracker:xo.root}),zo=pt.locateElement({tracker:xo.sideMenu}),Co=pt.locateElement({tracker:xo.plugins}),jo={renderUI:function(e){var n,r=e.canvas,i=e.slot;if(Do){if("root"===i){var a=Yt({canvas:r,slotElement:Do}),o=a.element;n=l=a.tracker,R(o,pt.locateElement({tracker:l})),Ot({target:l,selector:"div.aceSizer"})}else if("sideMenu"===i){var s=Yt({canvas:r,slotElement:zo});o=s.element;n=l=s.tracker,R(o,pt.locateElement({tracker:l})),Ot({target:l,selector:"div.aceSizer"})}else if("plugins"===i){var c=Yt({canvas:r,slotElement:Co});o=c.element;n=l=c.tracker,R(o,pt.locateElement({tracker:l})),Ot({target:l,selector:"div.aceSizer"})}else{var l,u=Yt({canvas:r,slotElement:pt.locateElement({tracker:i})});o=u.element;n=l=u.tracker,R(o,pt.locateElement({tracker:l})),Ot({target:l,selector:"div.aceSizer"})}return t.info({message:"UI rendered."}),n}return t.error({message:"Root element not found"}),null},unmountUI:function(e){var n=e.tracker,r=pt.locateElement({tracker:n});r&&r.parentElement?(Ot({target:n,selector:"div.aceSizer"}),setTimeout((function(){var e;null===(e=r.parentElement)||void 0===e||e.removeChild(r)}),ko.ANIMATION_DURATION),t.info({message:"UI unmounted."})):t.error({message:"Element to unmount not found or parent element is missing."})}},Lo=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},Oo=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const Eo=new(function(){function e(){this.canvas=[],this.tracker=[]}return e.prototype.updateCanvas=function(e){var t=this,n=e.title,r=e.content,i=e.trackerTimestamp,a=e.okAction,o=e.cancelAction;this.canvas=o?[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},children:[{type:"window",title:n,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",justifyContent:"space-between"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",padding:"1vw 1vh",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw"},children:[{type:"text",label:r}]}]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:Vo.t({key:"cancel"}),actions:[function(){return Lo(t,void 0,void 0,(function(){return Oo(this,(function(e){switch(e.label){case 0:return[4,o()];case 1:return e.sent(),this.destroy({trackerTimestamp:i}),[2]}}))}))}]}]},{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:Vo.t({key:"ok"}),actions:[function(){return Lo(t,void 0,void 0,(function(){return Oo(this,(function(e){switch(e.label){case 0:return[4,a()];case 1:return e.sent(),this.destroy({trackerTimestamp:i}),[2]}}))}))}]}]}]}]}]}]}]}]:[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},children:[{type:"window",title:n,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",justifyContent:"space-between"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",padding:"1vw 1vh",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw"},children:[{type:"text",label:r}]}]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:Vo.t({key:"ok"}),actions:[function(){return Lo(t,void 0,void 0,(function(){return Oo(this,(function(e){switch(e.label){case 0:return[4,a()];case 1:return e.sent(),this.destroy({trackerTimestamp:i}),[2]}}))}))}]}]}]}]}]}]}]}]},e.prototype.existed=function(e){var t=e.tracker,n=!1;return this.tracker.forEach((function(e){e.tracker===t&&(n=!0)})),n},e.prototype.draw=function(){var e=Fo.getTimestamp()+Math.random();this.updateCanvas({title:"title",content:"content",trackerTimestamp:e,okAction:function(){},cancelAction:function(){}});var t=jo.renderUI({canvas:this.canvas,slot:"plugins"});return this.tracker.push({tracker:t,timestamp:e}),t},e.prototype.destroy=function(e){var t=e.trackerTimestamp,n=this.tracker.find((function(e){return e.timestamp===t}));this.existed({tracker:n.tracker})&&(jo.unmountUI({tracker:n.tracker}),this.tracker=this.tracker.filter((function(e){return e.timestamp!==t})))},e.prototype.showDialog=function(e){var t=e.title,n=e.content,r=e.okAction,i=e.cancelAction,a=Fo.getTimestamp()+Math.random();this.updateCanvas({title:t,content:n,trackerTimestamp:a,okAction:r,cancelAction:i});var o=jo.renderUI({canvas:this.canvas,slot:"plugins"});return this.tracker.push({tracker:o,timestamp:a}),o},e}());var So=function(){return So=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},So.apply(this,arguments)},Yo=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},Uo=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Po=function(){function e(){}return e.prototype.send=function(e){var t=e.createRequest,n=new XMLHttpRequest,r=t(n),i=r.isText,a=void 0===i||i,o=r.body;return new Promise((function(e,t){n.addEventListener("load",(function(){return e(a?n.responseText:n.response)})),n.addEventListener("error",(function(){return t(n.status)})),n.send(o)}))},e.prototype.withCredentials=function(e){var t=e.createRequest;return function(e){return e.withCredentials=!0,t(e)}},e.prototype.blobRequest=function(e){var t=e.url;return function(e){return e.responseType="blob",e.open("GET",t),{isText:!1}}},e.prototype.getBlob=function(e){var t=e.url;return this.send({createRequest:this.blobRequest({url:t})})},e.prototype.getBlobWithCredentials=function(e){var t=e.url;return this.send({createRequest:this.withCredentials({createRequest:this.blobRequest({url:t})})})},e.prototype.textRequest=function(e){var t=e.url;return function(e){return e.responseType="text",e.open("GET",t),{isText:!0}}},e.prototype.getText=function(e){var t=e.url;return this.send({createRequest:this.textRequest({url:t})})},e.prototype.getTextWithCredentials=function(e){var t=e.url;return this.send({createRequest:this.withCredentials({createRequest:this.textRequest({url:t})})})},e.prototype.jsonRequest=function(e){var t=e.url;return function(e){return e.responseType="json",e.open("GET",t),{isText:!1}}},e.prototype.convertToJson=function(e){return"string"==typeof e?JSON.parse(e):e},e.prototype.getJson=function(e){return Yo(this,arguments,void 0,(function(e){var t,n=e.url;return Uo(this,(function(e){switch(e.label){case 0:return[4,this.send({createRequest:this.jsonRequest({url:n})})];case 1:return t=e.sent(),[2,this.convertToJson(t)]}}))}))},e.prototype.getJsonWithCredentials=function(e){return Yo(this,arguments,void 0,(function(e){var t,n=e.url;return Uo(this,(function(e){switch(e.label){case 0:return[4,this.send({createRequest:this.withCredentials({createRequest:this.jsonRequest({url:n})})})];case 1:return t=e.sent(),[2,this.convertToJson(t)]}}))}))},e.prototype.postText=function(e){var t=e.url,n=e.text;return this.send({createRequest:function(e){return e.open("POST",t),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),{isText:!1,body:n}}})},e.prototype.postTextWithCredentials=function(e){var t=e.url,n=e.text;return this.send({createRequest:function(e){return e.open("POST",t),e.withCredentials=!0,e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),{isText:!1,body:n}}})},e.prototype.postJson=function(e){var t=e.url,n=e.json;return this.send({createRequest:function(e){return e.open("POST",t),e.setRequestHeader("Content-Type","application/json"),{isText:!1,body:JSON.stringify(n)}}})},e.prototype.postJsonWithCredentials=function(e){var t=e.url,n=e.json;return this.send({createRequest:function(e){return e.open("POST",t),e.withCredentials=!0,e.setRequestHeader("Content-Type","application/json"),{isText:!1,body:JSON.stringify(n)}}})},e.prototype.monkey=function(e){return new Promise((function(n,r){GM_xmlhttpRequest||t.error({message:"Cannot resolve function GM_xmlhttpRequest"});var i=So(So({nocache:!0},e),{onload:function(e){return n(e.response)},onerror:function(e){var t=So(So({},JSON.parse(JSON.stringify(e))),{toString:function(){return JSON.stringify(this)}});r(t)}});"method"in i||(i.method="GET"),GM_xmlhttpRequest(i)}))},e.prototype.ACEV2Download=function(e){var t=e.object,n=e.filename,r=new Blob([JSON.stringify(t)],{type:"text/plain"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=n,a.style.display="none",document.body.appendChild(a),a.click(),URL.revokeObjectURL(i),document.body.removeChild(a)},e.prototype.ACEV2Upload=function(e){var n=e.readType,r=e.callback,i=document.createElement("input");i.type="file",i.style.display="none",i.addEventListener("change",(function(e){var i,a=null===(i=e.target.files)||void 0===i?void 0:i[0];if(a){var o=new FileReader;o.onload=function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.result;r({content:n,file:a})},"text"===n?o.readAsText(a):"arrayBuffer"===n&&o.readAsArrayBuffer(a)}else t.error({message:"No file selected"})})),document.body.appendChild(i),i.click(),document.body.removeChild(i)},e.prototype.openPageInNewTab=function(e){var t=e.url,n=e.manifest;Eo.showDialog({title:n.name+" "+Vo.t({key:"wants-to-open-a-new-tab"}),content:"".concat(Vo.t({key:"target-url"}),": ").concat(t," \n ").concat(Vo.t({key:"source-plugin-id"}),": ").concat(n.id," \n ").concat(Vo.t({key:"ace-v2-runtime-does-not-responsible-for-the-content"})),okAction:function(){return window.open(t)},cancelAction:function(){}})},e}();const Qo=new Po;var Ro=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},Wo=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Bo=function(){function e(){this.defaultValue={monkey:{plugins:[],pluginData:[],preferences:{general:{pluginLoadOrder:"when-body-loaded",source:"github",updateRuntimeWhen:"startup",updateRuntimeTo:"stable",updatePluginsWhen:"startup"},visual:{theme:"auto",language:"auto"},developer:{PSV:"full",IPC:"enabled",logLevel:"error"}}},local:[]},this.runtimeStorage=this.defaultValue}return e.prototype.start=function(){return Ro(this,void 0,void 0,(function(){var e,n;return Wo(this,(function(r){switch(r.label){case 0:return t.info({message:"StorageService is starting..."}),e=this,n={},[4,this.readMonkey({outputType:"JSON"})];case 1:return e.runtimeStorage=(n.monkey=r.sent(),n.local=this.readLocal({outputType:"JSON"}),n),[4,this.initialize()];case 2:return r.sent(),[2]}}))}))},e.prototype.stop=function(){return Ro(this,void 0,void 0,(function(){return Wo(this,(function(e){switch(e.label){case 0:return t.info({message:"StorageService is stopping..."}),this.saveLocal(),[4,this.saveMonkey()];case 1:return e.sent(),[2]}}))}))},e.prototype.initialize=function(){return Ro(this,void 0,void 0,(function(){var e,t;return Wo(this,(function(n){switch(n.label){case 0:return t={},[4,this.readMonkey({outputType:"JSON"})];case 1:return t.monkey=n.sent(),t.local=this.readLocal({outputType:"JSON"}),(e=t).monkey.pluginData&&e.monkey.plugins&&e.monkey.preferences||this.setDefaultValue(),e.local||this.setDefaultValue(),[2]}}))}))},e.prototype.setDefaultValue=function(){this.runtimeStorage=this.defaultValue,this.saveLocal(),this.saveMonkey()},e.prototype.localSet=function(e){var t=e.k,n=e.v,r=this.keyConstructor({k:t}),i=this.runtimeStorage.local.findIndex((function(e){return e.k===r}));-1!==i?(this.runtimeStorage.local[i].v=JSON.stringify(n),this.runtimeStorage.local[i].timestamp=Fo.getTimestamp()):this.runtimeStorage.local.push({k:r,v:JSON.stringify(n),timestamp:Fo.getTimestamp()})},e.prototype.localGet=function(e){var n=this,r=e.k,i=this.runtimeStorage.local.find((function(e){return e.k===n.keyConstructor({k:r})}));if(!i)return null;try{return JSON.parse(i.v)}catch(e){return t.error({message:"Error parsing value for key: ".concat(r,", error: ").concat(JSON.stringify(e))}),null}},e.prototype.localRemove=function(e){var t=this,n=e.k;this.runtimeStorage.local=this.runtimeStorage.local.filter((function(e){return e.k!==t.keyConstructor({k:n})}))},e.prototype.largeSet=function(e){var t=e.k,n=e.v,r=this.keyConstructor({k:t}),i=this.runtimeStorage.monkey.pluginData.findIndex((function(e){return e.k===r}));-1!==i?(this.runtimeStorage.monkey.pluginData[i].v=JSON.stringify(n),this.runtimeStorage.monkey.pluginData[i].timestamp=Fo.getTimestamp()):this.runtimeStorage.monkey.pluginData.push({k:r,v:JSON.stringify(n),timestamp:Fo.getTimestamp()})},e.prototype.largeGet=function(e){var n=this,r=e.k,i=this.runtimeStorage.monkey.pluginData.find((function(e){return e.k===n.keyConstructor({k:r})}));if(!i)return null;try{return JSON.parse(i.v)}catch(e){return t.error({message:"Error parsing value for key: ".concat(r,", error: ").concat(JSON.stringify(e))}),null}},e.prototype.largeRemove=function(e){var t=this,n=e.k;this.runtimeStorage.monkey.pluginData=this.runtimeStorage.monkey.pluginData.filter((function(e){return e.k!==t.keyConstructor({k:n})}))},e.prototype.updatePluginsStorage=function(e){var t=e.newPlugins;this.runtimeStorage.monkey.plugins=t},e.prototype.getPlugins=function(){return this.runtimeStorage.monkey.plugins},e.prototype.updatePreferencesStorage=function(e){var t=e.newPreferences;this.runtimeStorage.monkey.preferences=t},e.prototype.keyConstructor=function(e){var n=e.k;return-1!==n.indexOf(".")&&t.error({message:'Key cannot contain "."'}),"".concat(n)},e.prototype.readMonkey=function(e){return Ro(this,arguments,void 0,(function(e){var t,n,r=e.outputType;return Wo(this,(function(e){switch(e.label){case 0:return"raw"!==r?[3,2]:[4,GM.getValue("ace.runtimeStorage.monkey")];case 1:return[2,e.sent()||"{}"];case 2:return n=(t=JSON).parse,[4,GM.getValue("ace.runtimeStorage.monkey")];case 3:return[2,n.apply(t,[e.sent()||"{}"])]}}))}))},e.prototype.readLocal=function(e){return"raw"===e.outputType?localStorage.getItem("ace.runtimeStorage.local")||"[]":JSON.parse(localStorage.getItem("ace.runtimeStorage.local")||"[]")},e.prototype.saveLocal=function(){localStorage.setItem("ace.runtimeStorage.local",JSON.stringify(this.runtimeStorage.local))},e.prototype.saveMonkey=function(){return Ro(this,void 0,void 0,(function(){return Wo(this,(function(e){switch(e.label){case 0:return[4,GM.setValue("ace.runtimeStorage.monkey",JSON.stringify(this.runtimeStorage.monkey))];case 1:return e.sent(),[2]}}))}))},e.prototype.getRuntimeStorage=function(){return this.runtimeStorage},e.prototype.clearMonkey=function(){GM_listValues().forEach((function(e){GM_deleteValue(e)}))},e.prototype.clearLocal=function(){localStorage.setItem("ace.runtimeStorage.local",JSON.stringify([]))},e.prototype.exportMonkey=function(){var e=this.readMonkey({outputType:"raw"});Qo.ACEV2Download({object:e,filename:"monkey.ace.".concat(Fo.getTimestamp(),".json")})},e.prototype.importMonkey=function(e){var t=e.data;Object.keys(t).forEach((function(e){GM_setValue(e,t[e])}))},e.prototype.exportLocal=function(){var e=this.readLocal({outputType:"raw"});Qo.ACEV2Download({object:e,filename:"local.ace.".concat(Fo.getTimestamp(),".json")})},e.prototype.importLocal=function(e){var t=e.data;Object.keys(t).forEach((function(e){localStorage.setItem(e,t[e])}))},e.prototype.exportAll=function(){GM_listValues||t.error({message:"Cannot resolve function GM_listValues"});var e={};GM_listValues().forEach((function(t){e[t]=GM_getValue(t)}));for(var n={},r=0;r<localStorage.length;r++){var i=localStorage.key(r);i&&(n[i]=localStorage.getItem(i))}Qo.ACEV2Download({object:{monkey:e,local:n},filename:"all.ace.".concat(Fo.getTimestamp(),".json")})},e.prototype.importAll=function(e){var t=e.data,n=JSON.parse(t);Object.keys(n.monkey).forEach((function(e){GM_setValue(e,n.monkey[e])})),Object.keys(n.local).forEach((function(e){localStorage.setItem(e,n.local[e])}))},e}();const Zo=new Bo;var Go=function(){function e(){}return e.prototype.updatePreferences=function(e){var t=e.category,n=e.k,r=e.v,i=Zo.getRuntimeStorage().monkey.preferences;i[t]&&(i[t][n]=r)},e.prototype.getPreference=function(e){var t=e.category,n=e.k,r=Zo.getRuntimeStorage().monkey.preferences;return r[t]?r[t][n]:""},e.prototype.isDarkMode=function(){return"auto"===this.getPreference({category:"visual",k:"theme"})?Fo.isNight():"dark"===this.getPreference({category:"visual",k:"theme"})},e.prototype.getBridgeConfigurations=function(){var e=Zo.largeGet({k:"bridgeConfigurations"});return e||(Zo.largeSet({k:"bridgeConfigurations",v:{enabled:!1,pluginLoadOrder:"when-body-loaded",connect:"localhost"}}),{enabled:!1,pluginLoadOrder:"when-body-loaded",connect:"localhost"})},e.prototype.updateBridgePreferences=function(e){var t=e.newBridgeConfigurations;Zo.largeSet({k:"bridgeConfigurations",v:t})},e}();const Ho=new Go;const Vo=new(function(){function e(){this.translations={english:{preferences:"Preferences",general:"General","plugin-load-order":"Plugin Load Order","when-head-loaded":"When head loaded","when-body-loaded":"When body loaded","after-all":"After all",source:"Source",github:"Github",cloudflare:"Cloudflare",jsdelivr:"JSDelivr","update-runtime-when":"Update Runtime When","update-plugins-when":"Update Plugins When",startup:"Startup",daily:"Daily",weekly:"Weekly",monthly:"Monthly","update-runtime-to":"Update Runtime To",stable:"Stable",beta:"Beta",visual:"Visual",theme:"Theme",auto:"Auto",light:"Light",dark:"Dark",language:"Language",english:"English",japanese:"Japanese","simplified-chinese":"Simplified Chinese","traditional-chinese":"Traditional Chinese (Taiwan)",developer:"Developer",psv:"Plugin Signature Verification",full:"Full",half:"Half",none:"None",ipc:"Inter-Plugin Communication",enabled:"Enabled",disabled:"Disabled","log-level":"Log Level",error:"Error",warn:"Warn",info:"Info",debug:"Debug",ok:"OK",cancel:"Cancel",close:"Close",launchpad:"Launchpad"},"simplified-chinese":{preferences:"偏好设置",general:"通用","plugin-load-order":"插件加载顺序","when-head-loaded":"head 加载后","when-body-loaded":"body 加载后","after-all":"全部加载后",source:"来源",github:"Github",cloudflare:"Cloudflare",jsdelivr:"JSDelivr","update-runtime-when":"运行时更新时间","update-plugins-when":"插件更新时间",startup:"启动时",daily:"每天",weekly:"每周",monthly:"每月","update-runtime-to":"运行时更新至",stable:"稳定版",beta:"测试版",visual:"视觉",theme:"主题",auto:"自动",light:"浅色",dark:"深色",language:"语言",english:"英语",japanese:"日语","simplified-chinese":"简体中文","traditional-chinese":"繁体中文（台湾）",developer:"开发者",psv:"插件签名验证 (PSV)",full:"严格 (Full)",half:"简化 (Half)",none:"不验证 (None)",ipc:"插件间通信 (IPC)",enabled:"已启用",disabled:"已禁用","log-level":"日志级别",error:"错误",warn:"警告",info:"信息",debug:"调试",ok:"好",cancel:"取消"},"traditional-chinese":{preferences:"偏好設置",general:"一般","plugin-load-order":"插件載入順序","when-head-loaded":"在 head 載入后","when-body-loaded":"在 body 載入后","after-all":"全部載入後",source:"來源",github:"Github",cloudflare:"Cloudflare",jsdelivr:"JSDelivr","update-runtime-when":"更新運行時機制","update-plugins-when":"更新插件時機制",startup:"啟動時",daily:"每日",weekly:"每週",monthly:"每月","update-runtime-to":"更新運行時至",stable:"穩定版",beta:"測試版",visual:"視覺",theme:"主題",auto:"自動",light:"亮色",dark:"暗色",language:"語言",english:"英語",japanese:"日語","simplified-chinese":"簡體中文","traditional-chinese":"繁體中文（台灣）",developer:"開發者",psv:"插件簽名驗證",full:"完整",half:"半個",none:"無",ipc:"插件間通訊",enabled:"已啟用",disabled:"已停用","log-level":"日誌級別",error:"錯誤",warn:"警告",info:"信息",debug:"調試",ok:"確定",cancel:"取消"},japanese:{preferences:"設定",general:"一般","plugin-load-order":"プラグイン読み込み順序","when-head-loaded":"ヘッダー読み込み時","when-body-loaded":"ボディ読み込み時","after-all":"全ての読み込み後",source:"ソース",github:"Github",cloudflare:"Cloudflare",jsdelivr:"JSDelivr","update-runtime-when":"ランタイム更新タイミング","update-plugins-when":"プラグイン更新タイミング",startup:"起動時",daily:"毎日",weekly:"毎週",monthly:"毎月","update-runtime-to":"ランタイム更新先",stable:"安定版",beta:"ベータ版",visual:"ビジュアル",theme:"テーマ",auto:"自動",light:"ライト",dark:"ダーク",language:"言語",english:"英語",japanese:"日本語","simplified-chinese":"簡体字中国語","traditional-chinese":"繁体字中国語（台湾）",developer:"開発者",psv:"プラグイン署名検証",full:"完全",half:"半分",none:"なし",ipc:"プラグイン間通信",enabled:"有効",disabled:"無効","log-level":"ログレベル",error:"エラー",warn:"警告",info:"情報",debug:"デバッグ",ok:"OK",cancel:"キャンセル"}}}return e.prototype.t=function(e){var t=e.key;return this.translations[this.getCurrentLanguage()][t]||t},e.prototype.reverseT=function(e){var t=this,n=e.value;return Object.keys(this.translations[this.getCurrentLanguage()]).find((function(e){return t.translations[t.getCurrentLanguage()][e]===n}))||n},e.prototype.getCurrentLanguage=function(){return"auto"===Ho.getPreference({category:"visual",k:"language"})?this.autoLanguage():Ho.getPreference({category:"visual",k:"language"})||"english"},e.prototype.autoLanguage=function(){var e=navigator.language;return e.includes("zh")?e.includes("Hans")?"simplified-chinese":e.includes("Hant")?"traditional-chinese":"simplified-chinese":e.includes("ja")?"japanese":"english"},e.prototype.getLocate=function(){return navigator.language},e}());const Fo=new(function(){function e(){this.runtimeDate=null,this.sunriseTime="06:00",this.sunsetTime="18:00"}return e.prototype.start=function(){t.info({message:"ClockService is starting..."}),this.runtimeDate=new Date},e.prototype.stop=function(){this.runtimeDate=null,t.info({message:"ClockService is stopping..."})},e.prototype.now=function(){return this.runtimeDate},e.prototype.getTimestamp=function(){var e;return null===(e=this.runtimeDate)||void 0===e?void 0:e.getTime()},e.prototype.isNight=function(){var e=new Date,t=e.getHours()+":"+e.getMinutes().toString().padStart(2,"0"),n=new Date(e.toDateString()+" "+this.sunriseTime),r=new Date(e.toDateString()+" "+this.sunsetTime),i=new Date(e.toDateString()+" "+t);return i>=r||i<=n},e.prototype.toReadableTime=function(e){var t,n=e.timestamp,r=(((null===(t=this.runtimeDate)||void 0===t?void 0:t.getTime())||Date.now())-n)/1e3/60/60,i=r/24;if(i>=7){return new Date(n).toLocaleString(Vo.getLocate(),{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0})}if(i>=1){var a=Math.floor(i);return"".concat(a," day").concat(a>1?"s":""," ago")}if(r>=1){var o=Math.floor(r);return"".concat(o," hour").concat(o>1?"s":""," ago")}return Vo.t({key:"just-now"})},e}());const Jo=new(function(){function e(){}return e.prototype.start=function(){gn.registerChannel({channel:"runtime:launchpad"})},e.prototype.stop=function(){gn.unregisterChannel({channel:"runtime:launchpad"})},e}());var Ko=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},qo=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const Xo=new(function(){function e(){this.hintTracker=""}return e.prototype.start=function(){return Ko(this,void 0,void 0,(function(){var e,n;return qo(this,(function(r){switch(r.label){case 0:return(e=Ho.getBridgeConfigurations()).enabled?(this.insertHint(),t.info({message:"["+Vo.t({key:"debug-bridge"})+"]"+Vo.t({key:"downloading-plugin-from"})+e.connect}),[4,Qo.monkey({method:"GET",url:"".concat(e.connect,"?t=").concat(Fo.getTimestamp()),responseType:"text"})]):[3,3];case 1:return n=r.sent(),t.info({message:"["+Vo.t({key:"debug-bridge"})+"]"+Vo.t({key:"installing-plugin"})}),[4,No.installPlugin({pluginPack:JSON.parse(n),bridged:!0})];case 2:r.sent(),t.info({message:"["+Vo.t({key:"debug-bridge"})+"]"+Vo.t({key:"installed-plugin"})}),r.label=3;case 3:return[2]}}))}))},e.prototype.stop=function(){return Ko(this,void 0,void 0,(function(){return qo(this,(function(e){return this.hintTracker&&jo.unmountUI({tracker:this.hintTracker}),No.uninstallBridgedPlugin(),[2]}))}))},e.prototype.insertHint=function(){this.hintTracker=jo.renderUI({canvas:[{type:"sizer",size:{width:12,height:3},styleObject:{zIndex:101,cursor:"pointer",right:"1vw",bottom:"1vw",position:"fixed"},draggable:!0,filled:!0,events:[{event:"click",handler:function(){return Vn.renderConfigurePanel()}}],children:[{type:"text",label:Vo.t({key:"debug-bridge-enabled"})}]}],slot:"sideMenu"})},e}());const $o=new(function(){function e(){}return e.prototype.headLoaded=function(e){var t=e.callback;return new Promise((function(e){if(null!==document.head)e(t());else var n=ln.childList({target:document.documentElement,callback:function(){null!==document.head&&(n.disconnect(),e(t()))}})[0]}))},e.prototype.contentLoaded=function(e){var t=e.callback;return new Promise((function(e){"loading"!==document.readyState?e(t()):document.addEventListener("DOMContentLoaded",(function(){return e(t())}))}))},e.prototype.fullyLoaded=function(e){var t=e.callback;return new Promise((function(e){"complete"===document.readyState?e(t()):unsafeWindow.addEventListener("load",(function(){return e(t())}))}))},e.prototype.beforeDestroy=function(e){var t=e.callback;return new Promise((function(e){unsafeWindow.addEventListener("beforeunload",(function(){return e(t())}))}))},e.prototype.raiseLifeCycleEvent=function(e){var t=e.type;unsafeWindow.dispatchEvent(new CustomEvent(t))},e}());const es=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(e){var t=this,n=e.manifest,r=n.icon,i=r.startsWith("<svg"),a=i?r:"defaultIcon"===r?Pn:r;this.canvas=[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},filled:!0,draggable:!0,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",alignItems:"center",justifyContent:"space-around",padding:"1vw"},children:[{type:"sizer",size:{width:10,height:10},children:[{type:"image",asHTML:i,src:a}]},{type:"sizer",children:[{type:"text",text:n.description}]},{type:"sizer",children:[{type:"text",text:n.name+" version "+n.versions[n.versions.length-1]}]},{type:"sizer",children:[{type:"text",text:n.author+" | "+n.id}]},{type:"sizer",children:[{type:"text",text:n.copyright}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"ok"}),actions:[function(){return t.destroy()}]}]}]}]}]},e.prototype.showAboutUI=function(e){var t=e.manifest;this.updateCanvas({manifest:t}),this.draw()},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):this.tracker=jo.renderUI({canvas:this.canvas,slot:"plugins"})},e.prototype.destroy=function(){this.existed()&&(jo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());const ts=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(e){var t=this,n=e.manifest,r=e.updatePreferencesHook,i=[];n.settings?(n.settings.forEach((function(e){"select"===e.type?i.push({type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[{type:"text",text:e.label},{type:"select",options:e.options,value:e.value,onChange:function(t){r({setting:e,newValue:t})}}]}):"input"===e.type?i.push({type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[{type:"text",text:e.label},{type:"input",value:e.value,onChange:function(t){r({setting:e,newValue:t})}}]}):"checkbox"===e.type?i.push({type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[{type:"text",text:e.label},{type:"checkbox",checked:e.checked,onChange:function(t){r({setting:e,newValue:t})}}]}):Ut.showToast({text:"未知的设置类型「".concat(e.type,"」，请检查插件「").concat(n.id,"」的设置。")})})),this.canvas=[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},children:[{type:"window",title:Vo.t({key:"preferences"})+" | "+n.name,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",height:"100%"},children:[{type:"sizer",styleObject:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:i},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"ok"}),actions:[function(){t.destroy()}]}]}]}]}]}]}]}]):Ut.showToast({text:"插件「"+n.id+"」没有设置。"})},e.prototype.showPluginPreferencesUI=function(e){var t=e.manifest,n=e.updatePreferencesHook;t.settings?(this.updateCanvas({manifest:t,updatePreferencesHook:n}),this.draw()):Ut.showToast({text:"插件「"+t.id+"」没有设置。"})},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):this.tracker=jo.renderUI({canvas:this.canvas,slot:"plugins"})},e.prototype.destroy=function(){this.existed()&&(jo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());var ns=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};const rs=new(function(){function e(){this.canvas=[],this.tracker="",this.targetPanels=[]}return e.prototype.updateCanvas=function(){var e=this;this.canvas=[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},draggable:!0,children:[{type:"window",title:Vo.t({key:"launchpad"}),children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",height:"100%"},children:[{type:"sizer",styleObject:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",gap:"1vw",width:"100%",flexWrap:"wrap",flexGrow:1},children:ns([],this.getShortcuts(),!0)},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"close"}),actions:[function(){e.destroy()}]}]}]}]}]}]}]}]},e.prototype.getShortcuts=function(){var e=this,t=[],n=[];return n=No.getInstalledPlugins(),t.push(this.generateIcon({manifest:Wn.manifest})),"full"!==Ho.getPreference({category:"developer",k:"psv"})&&t.push(this.generateIcon({manifest:Vn.manifest})),n.forEach((function(n){t.push(e.generateIcon({manifest:n.manifest}))})),t},e.prototype.generateIcon=function(e){var t=this,n=e.manifest,r=n.icon,i=r.startsWith("<svg");return{type:"sizer",styleObject:{width:"7vw",height:"10vw",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",gap:"1vw",cursor:"pointer"},events:[{event:"click",handler:function(){return t.openTargetPanel({manifest:n})}}],children:[{type:"sizer",styleObject:{width:"7vw",height:"7vw"},children:[{type:"image",asHTML:i,src:i?r:"default"===r?Pn:r}]},{type:"sizer",styleObject:{width:"7vw",height:"3vw",display:"flex",justifyContents:"center",alignItems:"center"},children:[{type:"text",label:"".concat(n.name," ").concat(n.bridged?Vo.t({key:"bridged-installation"}):"")}]}]}},e.prototype.generateTargetPanel=function(e){var t=this,n=e.manifest,r="";n.trigger.receiveHandler&&(r=ht.v4());return{canvas:n.settings?[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},draggable:!0,children:[{type:"window",title:n.name,children:[{type:"sizer",styleObject:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",width:"96%",height:"86%",margin:"1%",padding:"1%",overflowY:"auto"},assignHandler:""===r?void 0:r,children:""===r?[{type:"text",label:Vo.t({key:"welcome-to"})+" "+n.name,text:Vo.t({key:"this-plugin-does-not-support-interactive-ui"})}]:[]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%",height:"10%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"preferences"}),actions:[function(){return t.openPluginPreferencesPanel({manifest:n})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"uninstall"}),actions:[function(){"@wenzi7777/acev2_plugin_store"!==n.id&&"@wenzi7777/acev2_debug_bridge"!==n.id?No.uninstallPlugin({manifest:n}):Ut.showToast({text:Vo.t({key:"cant-uninstall-build-in-plugins"})})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"about"}),actions:[function(){return es.showAboutUI({manifest:n})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"website"}),actions:[function(){return Qo.openPageInNewTab({url:n.website,manifest:n})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"close"}),actions:[function(){t.destroyTargetPanel({manifest:n})}]}]}]}]}]}]}]}]:[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},draggable:!0,children:[{type:"window",title:n.name,children:[{type:"sizer",styleObject:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",width:"96%",height:"86%",margin:"1%",padding:"1%",overflowY:"auto"},assignHandler:""===r?void 0:r,children:""===r?[{type:"text",label:Vo.t({key:"welcome-to"})+" "+n.name,text:Vo.t({key:"this-plugin-does-not-support-interactive-ui"})}]:[]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%",height:"10%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"uninstall"}),actions:[function(){"@wenzi7777/acev2_plugin_store"!==n.id&&"@wenzi7777/acev2_debug_bridge"!==n.id?No.uninstallPlugin({manifest:n}):Ut.showToast({text:Vo.t({key:"cant-uninstall-build-in-plugins"})})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"about"}),actions:[function(){return es.showAboutUI({manifest:n})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"website"}),actions:[function(){return Qo.openPageInNewTab({url:n.website,manifest:n})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"close"}),actions:[function(){t.destroyTargetPanel({manifest:n})}]}]}]}]}]}]}],handler:r}},e.prototype.openTargetPanel=function(e){var t=e.manifest,n=this.generateTargetPanel({manifest:t}),r=n.canvas,i=n.handler;this.targetPanels.push({manifest:t,tracker:jo.renderUI({canvas:r,slot:"plugins"})}),gn.sendMessage({channel:"runtime:launchpad",data:{type:"pluginStarted",manifest:t,handler:i}})},e.prototype.openPluginPreferencesPanel=function(e){var t=e.manifest;ts.showPluginPreferencesUI({manifest:t,updatePreferencesHook:function(e){e.setting;var n=e.newValue,r=t.settings;r.forEach((function(e){e.label==e.label&&(e.value=n)})),No.saveSelfPreference({manifest:t,settings:r})}})},e.prototype.destroyTargetPanel=function(e){var t=e.manifest,n=this.targetPanels.find((function(e){return e.manifest.id===t.id}));n&&(jo.unmountUI({tracker:n.tracker}),this.targetPanels=this.targetPanels.filter((function(e){return e.manifest.id!==t.id})))},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):(this.updateCanvas(),this.tracker=jo.renderUI({canvas:this.canvas,slot:"plugins"}))},e.prototype.destroy=function(){this.existed()&&(jo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());const is=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(){var e=this;this.canvas=[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},children:[{type:"window",title:Vo.t({key:"preferences"}),children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw"},children:[{type:"text",label:Vo.t({key:"general"})},{type:"select",label:Vo.t({key:"plugin-load-order"}),options:[Vo.t({key:"when-head-loaded"}),Vo.t({key:"when-body-loaded"}),Vo.t({key:"after-all"})],value:Vo.t({key:Ho.getPreference({category:"general",k:"pluginLoadOrder"})}),onChange:function(e){Ho.updatePreferences({category:"general",k:"pluginLoadOrder",v:Vo.reverseT({value:e})})}},{type:"select",label:Vo.t({key:"source"}),options:[Vo.t({key:"github"}),Vo.t({key:"cloudflare"}),Vo.t({key:"jsdelivr"})],value:Vo.t({key:Ho.getPreference({category:"general",k:"source"})}),onChange:function(e){Ho.updatePreferences({category:"general",k:"source",v:Vo.reverseT({value:e})})}},{type:"select",label:Vo.t({key:"update-runtime-when"}),options:[Vo.t({key:"startup"}),Vo.t({key:"daily"}),Vo.t({key:"weekly"}),Vo.t({key:"monthly"})],value:Vo.t({key:Ho.getPreference({category:"general",k:"updateRuntimeWhen"})}),onChange:function(e){Ho.updatePreferences({category:"general",k:"updateRuntimeWhen",v:Vo.reverseT({value:e})})}},{type:"select",label:Vo.t({key:"update-runtime-to"}),options:[Vo.t({key:"stable"}),Vo.t({key:"beta"})],value:Vo.t({key:Ho.getPreference({category:"general",k:"updateRuntimeTo"})}),onChange:function(e){Ho.updatePreferences({category:"general",k:"updateRuntimeTo",v:Vo.reverseT({value:e})})}},{type:"select",label:Vo.t({key:"update-plugins-when"}),options:[Vo.t({key:"startup"}),Vo.t({key:"daily"}),Vo.t({key:"weekly"}),Vo.t({key:"monthly"})],value:Vo.t({key:Ho.getPreference({category:"general",k:"updatePluginsWhen"})}),onChange:function(e){Ho.updatePreferences({category:"general",k:"updatePluginsWhen",v:Vo.reverseT({value:e})})}}]},{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw"},children:[{type:"text",label:Vo.t({key:"visual"})},{type:"select",label:Vo.t({key:"theme"}),options:[Vo.t({key:"auto"}),Vo.t({key:"light"}),Vo.t({key:"dark"})],value:Vo.t({key:Ho.getPreference({category:"visual",k:"theme"})}),onChange:function(e){Ho.updatePreferences({category:"visual",k:"theme",v:Vo.reverseT({value:e})})}},{type:"select",label:Vo.t({key:"language"}),options:[Vo.t({key:"auto"}),Vo.t({key:"english"}),Vo.t({key:"japanese"}),Vo.t({key:"simplified-chinese"}),Vo.t({key:"traditional-chinese"})],value:Vo.t({key:Ho.getPreference({category:"visual",k:"language"})}),onChange:function(e){Ho.updatePreferences({category:"visual",k:"language",v:Vo.reverseT({value:e})})}}]},{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw"},children:[{type:"text",label:Vo.t({key:"developer"}),text:""},{type:"select",label:Vo.t({key:"psv"}),options:[Vo.t({key:"full"}),Vo.t({key:"half"}),Vo.t({key:"none"})],value:Vo.t({key:Ho.getPreference({category:"developer",k:"psv"})}),onChange:function(e){Ho.updatePreferences({category:"developer",k:"psv",v:Vo.reverseT({value:e})})}},{type:"select",label:Vo.t({key:"ipc"}),options:[Vo.t({key:"enabled"}),Vo.t({key:"disabled"})],value:Vo.t({key:Ho.getPreference({category:"developer",k:"ipc"})}),onChange:function(e){Ho.updatePreferences({category:"developer",k:"ipc",v:Vo.reverseT({value:e})})}},{type:"select",label:Vo.t({key:"log-level"}),options:[Vo.t({key:"error"}),Vo.t({key:"warn"}),Vo.t({key:"info"}),Vo.t({key:"debug"})],value:Vo.t({key:Ho.getPreference({category:"developer",k:"logLevel"})}),onChange:function(e){Ho.updatePreferences({category:"developer",k:"logLevel",v:Vo.reverseT({value:e})})}}]}]},{type:"sizer",styleObject:{flexGrow:1,display:"flex",justifyContent:"flex-start",alignItems:"flex-end",width:"100%"},children:[{type:"text",label:"Hint",text:"Please note that some settings may require a restart to take effect."}]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"about"}),actions:[function(){return es.showAboutUI({manifest:ko.MASTER_MANIFEST})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:Vo.t({key:"ok"}),actions:[function(){e.destroy()}]}]}]}]}]}]}]}]},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):(this.updateCanvas(),this.tracker=jo.renderUI({canvas:this.canvas,slot:"plugins"}))},e.prototype.destroy=function(){this.existed()&&(jo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());const as=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(){this.canvas=[{type:"sizer",position:{top:38,bottom:38,left:0},size:{width:5,height:24},styleObject:{position:"fixed",flexDirection:"column",gap:"3vh"},children:[{type:"sizer",size:{width:5,height:5},events:[{event:"click",handler:function(){return rs.draw()}}],styleObject:{cursor:"pointer"},children:[{type:"image",src:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzMjA5MjExMDY4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iMjgxMzYiIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiI+CiAgICA8cGF0aCBkPSJNMzM3LjMwMjU2NiA2MjkuMDk4NzY5bDU2LjU3MzE2OSA1Ni41NzMxNjktMC4wNDI3MjkgOTUuMzI4MzU0LTE5OC45MDM0IDQ3LjA4NzMzNiA0Ny4wNDQ2MDYtMTk4Ljk4ODg1OWg5NS4zMjgzNTR6TTU1NS4wMDY3MTggMTk1LjE4NTk4TDQ1MC4zNjM0NDcgMjk5LjgyOTI1MUgzMjAuMTI1NTE2TDIwNy44MzM3NTggNDEyLjE2MzczOWw2NS4xMTg5NjUgNjUuMTE4OTY1IDI3My45NzgyMTggMjc0LjAyMDk0NyA2NC45NDgwNDkgNjQuOTkwNzc4IDAuNDcwMDE5IDAuNDcwMDE5IDExMS45OTI2NTYtMTExLjk0OTkyN3YtMTMwLjkyMTU5NGwxMDQuNjAwNTQyLTEwNC42NDMyNzFWMTk1LjIyODcwOXogbTE2OS40MjA0MDUgMjk3LjIyMjc4M0g2NDUuMjA3NTk0VjM3OS4wMDYwNWgtMTEzLjM1OTk4M1YyOTkuODI5MjUxaDE5Mi41Nzk1MTJ6IgogICAgICAgICAgcC1pZD0iMjgxMzciIGRhdGEtc3BtLWFuY2hvci1pZD0iYTMxM3guc2VhcmNoX2luZGV4LjAuaTkuMTE4MTNhODFhMWZoZFoiIGNsYXNzPSJzZWxlY3RlZCIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiPjwvcGF0aD4KPC9zdmc+"}]},{type:"sizer",size:{width:5,height:5},events:[{event:"click",handler:function(){return is.draw()}}],styleObject:{cursor:"pointer"},children:[{type:"image",src:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzMjA5MzgyNzIzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjU0MzciCiAgICAgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KICAgIDxwYXRoIGQ9Ik01MTIuNTEyIDk2YzMxLjMxNzMzMyAwLjM4NCA2Mi41MDY2NjcgMy45NjggOTMuMDk4NjY3IDEwLjc5NDY2N2EzMiAzMiAwIDAgMSAyNC44MzIgMjcuNjkwNjY2bDcuMjUzMzMzIDY1LjE1MmE1OS4wNTA2NjcgNTkuMDUwNjY3IDAgMCAwIDgyLjIxODY2NyA0Ny42MTZsNTkuNzMzMzMzLTI2LjI0YTMyIDMyIDAgMCAxIDM2LjI2NjY2NyA3LjQyNCA0MTcuODM0NjY3IDQxNy44MzQ2NjcgMCAwIDEgOTQuMDggMTYxLjc5MiAzMiAzMiAwIDAgMS0xMS42MDUzMzQgMzUuMjQyNjY3bC01Mi45NDkzMzMgMzkuMDRhNTguODggNTguODggMCAwIDAgMCA5NC45NzZsNTMuMDM0NjY3IDM5LjA0YTMyIDMyIDAgMCAxIDExLjYwNTMzMyAzNS4yNDI2NjcgNDE4LjA5MDY2NyA0MTguMDkwNjY3IDAgMCAxLTk0LjAzNzMzMyAxNjEuNzkyIDMyIDMyIDAgMCAxLTM2LjIyNCA3LjQ2NjY2NmwtNTkuOTg5MzM0LTI2LjI4MjY2NmE1OC45MjI2NjcgNTguOTIyNjY3IDAgMCAwLTgyLjE3NiA0Ny40ODhsLTcuMjUzMzMzIDY1LjEwOTMzM2EzMiAzMiAwIDAgMS0yNC4zNjI2NjcgMjcuNjQ4IDQwNi4xMDEzMzMgNDA2LjEwMTMzMyAwIDAgMS0xODcuOTg5MzMzIDAgMzIgMzIgMCAwIDEtMjQuNDA1MzMzLTI3LjY0OGwtNy4yMTA2NjctNjUuMDI0YTU4Ljk2NTMzMyA1OC45NjUzMzMgMCAwIDAtODIuMTMzMzMzLTQ3LjM2bC01OS45ODkzMzQgMjYuMjgyNjY3YTMyIDMyIDAgMCAxLTM2LjI2NjY2Ni03LjQ2NjY2NyA0MTguMDQ4IDQxOC4wNDggMCAwIDEtOTMuOTk0NjY3LTE2MS45NjI2NjcgMzIgMzIgMCAwIDEgMTEuNjA1MzMzLTM1LjI0MjY2Nmw1My4wMzQ2NjctMzkuMDgyNjY3YTU4Ljg4IDU4Ljg4IDAgMCAwIDAtOTQuOTc2bC01My4wMzQ2NjctMzguOTk3MzMzYTMyIDMyIDAgMCAxLTExLjYwNTMzMy0zNS4yNDI2NjcgNDE3LjgzNDY2NyA0MTcuODM0NjY3IDAgMCAxIDk0LjA4LTE2MS43OTIgMzIgMzIgMCAwIDEgMzYuMjY2NjY3LTcuNDI0bDU5LjczMzMzMyAyNi4yNGE1OS4xNzg2NjcgNTkuMTc4NjY3IDAgMCAwIDgyLjM0NjY2Ny00Ny43MDEzMzNsNy4yNTMzMzMtNjUuMTA5MzM0YTMyIDMyIDAgMCAxIDI0Ljg3NDY2Ny0yNy42OTA2NjZjMzAuNTkyLTYuODI2NjY3IDYxLjgyNC0xMC40MTA2NjcgOTMuOTA5MzMzLTEwLjc5NDY2N3pNNTEyIDM4NGExMjggMTI4IDAgMSAwIDAgMjU2IDEyOCAxMjggMCAwIDAgMC0yNTZ6IgogICAgICAgICAgZmlsbD0iIzJjMmMyYyIgcC1pZD0iNTQzOCIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pNi40NjYxM2E4MWVhbWhPcCIKICAgICAgICAgIGNsYXNzPSJzZWxlY3RlZCI+PC9wYXRoPgo8L3N2Zz4="}]}]}]},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):(this.updateCanvas(),this.tracker=jo.renderUI({canvas:this.canvas,slot:"sideMenu"}))},e.prototype.destroy=function(){this.existed()&&(jo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());var os=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},ss=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const cs=new(function(){function e(){}return e.prototype.start=function(){return os(this,void 0,void 0,(function(){return ss(this,(function(e){switch(e.label){case 0:return t.info({message:"Kernel is starting..."}),t.info({message:"Handing control to the lifecycle API..."}),[4,this.init()];case 1:return e.sent(),[2]}}))}))},e.prototype.init=function(){return os(this,void 0,void 0,(function(){var e=this;return ss(this,(function(t){switch(t.label){case 0:return $o.raiseLifeCycleEvent({type:"acev2:before-start"}),[4,this.startServices()];case 1:return t.sent(),$o.raiseLifeCycleEvent({type:"acev2:start"}),[4,$o.headLoaded({callback:function(){return os(e,void 0,void 0,(function(){return ss(this,(function(e){switch(e.label){case 0:return"when-head-loaded"!==Ho.getPreference({category:"general",k:"pluginLoadOrder"})?[3,2]:[4,No.initializePluginExecutionAndSetTrigger()];case 1:e.sent(),$o.raiseLifeCycleEvent({type:"acev2:plugins-loaded"}),e.label=2;case 2:return[2]}}))}))}})];case 2:return t.sent(),$o.raiseLifeCycleEvent({type:"acev2:loaded"}),[4,$o.contentLoaded({callback:function(){return os(e,void 0,void 0,(function(){return ss(this,(function(e){switch(e.label){case 0:return this.initUI(),"when-body-loaded"!==Ho.getPreference({category:"general",k:"pluginLoadOrder"})?[3,2]:[4,No.initializePluginExecutionAndSetTrigger()];case 1:e.sent(),$o.raiseLifeCycleEvent({type:"acev2:plugins-loaded"}),e.label=2;case 2:return[2]}}))}))}})];case 3:return t.sent(),[4,$o.fullyLoaded({callback:function(){return os(e,void 0,void 0,(function(){return ss(this,(function(e){switch(e.label){case 0:return"after-all"!==Ho.getPreference({category:"general",k:"pluginLoadOrder"})?[3,2]:[4,No.initializePluginExecutionAndSetTrigger()];case 1:e.sent(),$o.raiseLifeCycleEvent({type:"acev2:plugins-loaded"}),e.label=2;case 2:return[2]}}))}))}})];case 4:return t.sent(),No.wakeUpBuildInPlugins(),[4,_o.selfReleaseTracker()];case 5:return t.sent(),[4,_o.pluginsReleaseTracker()];case 6:return t.sent(),$o.raiseLifeCycleEvent({type:"acev2:end"}),[4,$o.beforeDestroy({callback:function(){return os(e,void 0,void 0,(function(){return ss(this,(function(e){switch(e.label){case 0:return[4,this.stopServices()];case 1:return e.sent(),$o.raiseLifeCycleEvent({type:"acev2:before-destroy"}),[2]}}))}))}})];case 7:return t.sent(),[2]}}))}))},e.prototype.startServices=function(){return os(this,void 0,void 0,(function(){return ss(this,(function(e){switch(e.label){case 0:return Fo.start(),gn.start(),Jo.start(),[4,Zo.start()];case 1:return e.sent(),[4,Xo.start()];case 2:return e.sent(),[2]}}))}))},e.prototype.stopServices=function(){return os(this,void 0,void 0,(function(){return ss(this,(function(e){switch(e.label){case 0:return[4,Xo.stop()];case 1:return e.sent(),Fo.stop(),[4,Zo.stop()];case 2:return e.sent(),gn.stop(),Jo.stop(),[2]}}))}))},e.prototype.initUI=function(){as.draw()},e}());t.success({message:"AcFun Evolved v".concat(e.getFullVersion(),", Made with ❤ by Nick Hsu. Official site https://ace-v2.1205.moe/")}),cs.start()})()})();