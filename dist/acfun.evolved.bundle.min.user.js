// ==UserScript==
// @name            AcFun Evolved
// @description     一个强大的AcFun脚本管理器
// @version         2.0.0
// @author          Nick Hsu
// @copyright       2024, Nick Hsu(wenzi7777@1205.moe)
// @license         MIT
// @match           *://*.acfun.cn/*
// @run-at          document-start
// @grant           unsafeWindow
// @grant           GM_getValue
// @grant           GM_setValue
// @grant           GM_deleteValue
// @grant           GM_listValues
// @grant           GM_info
// @grant           GM_xmlhttpRequest
// @connect         raw.githubusercontent.com
// @connect         wenzi7777.github.io
// @connect         cdn.jsdelivr.net
// @connect         acev2-plugins.1205.moe
// @connect         acev2.1205.moe
// @connect         github.com
// @connect         localhost
// @connect         *
// ==/UserScript==
(()=>{var e={42:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},425:e=>{"use strict";e.exports=function(e){return e[1]}},98:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}ByteStream=function(e,t,n){var r=t||0,a=n||e.byteLength;this.bytes=new Uint8Array(e,r,a),this.ptr=0},ByteStream.prototype.peekNumber=function(e){if(e<=0||t(e)!=t(1))return-1;for(var n=0,r=this.ptr+e-1;r>=this.ptr;)n<<=8,n|=this.bytes[r],--r;return n},ByteStream.prototype.readNumber=function(e){var t=this.peekNumber(e);return this.ptr+=e,t},ByteStream.prototype.peekSignedNumber=function(e){var t=this.peekNumber(e),n=Math.pow(2,8*e-1);return t>=n&&(t-=2*n),t},ByteStream.prototype.readSignedNumber=function(e){var t=this.peekSignedNumber(e);return this.ptr+=e,t},ByteStream.prototype.peekBytes=function(e,n){if(e<=0||t(e)!=t(1))return null;var r=this.bytes.subarray(this.ptr,this.ptr+e);return n&&(this.ptr+=e),r},ByteStream.prototype.readBytes=function(e){return this.peekBytes(e,!0)},ByteStream.prototype.peekString=function(e){if(e<=0||t(e)!=t(1))return"";for(var n="",r=this.ptr,a=this.ptr+e;r<a;++r)n+=String.fromCharCode(this.bytes[r]);return n},ByteStream.prototype.readString=function(e){var t=this.peekString(e);return this.ptr+=e,t},e.exports=ByteStream},872:(e,t,n)=>{var r=n(98),a=function(e,t){var n=e.readString(t),r=n.indexOf(String.fromCharCode(0));return-1!=r?n.substr(0,r):n};function i(e){if(this.isValid=!1,this.name=a(e,100),this.mode=a(e,8),this.uid=a(e,8),this.gid=a(e,8),this.size=parseInt(a(e,12),8),this.mtime=a(e,12),this.chksum=a(e,8),this.typeflag=a(e,1),this.linkname=a(e,100),this.maybeMagic=a(e,6),"ustar"==this.maybeMagic?(this.version=a(e,2),this.uname=a(e,32),this.gname=a(e,32),this.devmajor=a(e,8),this.devminor=a(e,8),this.prefix=a(e,155),this.prefix.length&&(this.name=this.prefix+this.name),e.readBytes(12)):e.readBytes(249),this.filename=this.name,this.fileData=null,0==this.typeflag){parseInt(this.size);this.fileData=new Uint8Array(e.bytes.buffer,e.ptr,this.size),this.name.length>0&&this.size>0&&this.fileData&&this.fileData.buffer&&(this.isValid=!0)}else this.typeflag;e.ptr+=this.size;var t=512-e.ptr%512;t>0&&t<512&&e.readBytes(t)}t.P=function(e){for(var t=new r(e),n=[];0!=t.peekNumber(4);){var a=new i(t);a&&a.isValid&&n.push(a)}return n}},654:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceAudioWrapper {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 10px;\n    background-color: #f7f7f7;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    transition: box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out;\n}\n\n.aceAudioWrapper:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceAudioPlayer {\n    width: 100%;\n    max-width: 400px;\n    outline: none;\n    border-radius: 10px;\n    transition: background-color 0.3s ease-in-out;\n}\n\n.aceAudioPlayer::-webkit-media-controls-panel {\n    background-color: #fff;\n    border-radius: 10px;\n}\n\n.aceAudioPlayer::-webkit-media-controls-play-button,\n.aceAudioPlayer::-webkit-media-controls-pause-button,\n.aceAudioPlayer::-webkit-media-controls-mute-button,\n.aceAudioPlayer::-webkit-media-controls-volume-slider,\n.aceAudioPlayer::-webkit-media-controls-timeline {\n    filter: invert(1);\n}\n\n/* 黑夜模式样式 */\n.aceAudioWrapper.aceDark {\n    background-color: #1c1c1e;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);\n}\n\n.aceAudioWrapper.aceDark:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);\n}\n\n.aceAudioWrapper.aceDark .aceAudioPlayer {\n    background-color: #2c2c2e;\n}\n\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-panel {\n    background-color: #2c2c2e;\n}\n\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-play-button,\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-pause-button,\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-mute-button,\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-volume-slider,\n.aceAudioWrapper.aceDark .aceAudioPlayer::-webkit-media-controls-timeline {\n    filter: invert(0.8);\n}",""]);const s=o},572:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceButton {\n    background-color: #007aff;\n    color: white;\n    border: none;\n    border-radius: 12px;\n    padding: 10px 20px;\n    font-size: .8rem;\n    cursor: pointer;\n    transition: background-color 0.3s, transform 0.3s;\n    width: 100%;\n    height: 100%;\n}\n\n.aceButton.hovered {\n    background-color: #005bb5;\n    transform: scale(1.05);\n}\n\n/* 黑夜模式样式 */\n.aceButton.aceDark {\n    background-color: #444;\n    color: #f7f7f7;\n}\n\n.aceButton.aceDark.hovered {\n    background-color: #222;\n    transform: scale(1.05);\n}\n",""]);const s=o},170:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceCheckboxWrapper {\n    display: flex;\n    align-items: center;\n}\n\n.aceCheckboxLabel {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    font-size: 16px;\n    color: #000;\n}\n\n.aceCheckbox {\n    width: 20px;\n    height: 20px;\n    margin-right: 10px;\n    cursor: pointer;\n    border-radius: 4px;\n    appearance: none;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    background-color: #f7f7f7;\n    border: 1px solid #ddd;\n    transition: background-color 0.3s, border-color 0.3s;\n}\n\n.aceCheckbox:checked {\n    background-color: #007aff;\n    border-color: #007aff;\n}\n\n.aceCheckbox:checked::before {\n    content: '';\n    display: block;\n    width: 12px;\n    height: 12px;\n    margin: 4px;\n    background-color: white;\n    border-radius: 2px;\n}\n\n/* 黑夜模式样式 */\n.aceCheckboxWrapper.aceDark .aceCheckboxLabel {\n    color: #f7f7f7;\n}\n\n.aceCheckboxWrapper.aceDark .aceCheckbox {\n    background-color: #333335;\n    border-color: #444;\n}\n\n.aceCheckboxWrapper.aceDark .aceCheckbox:checked {\n    background-color: #007aff;\n    border-color: #007aff;\n}\n\n.aceCheckboxWrapper.aceDark .aceCheckbox:checked::before {\n    background-color: #1c1c1e;\n}\n",""]);const s=o},78:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceColorPickerWrapper {\n    display: flex;\n    align-items: center;\n}\n\n.aceColorPickerLabel {\n    display: flex;\n    align-items: center;\n    font-size: 16px;\n    margin-right: 10px;\n    color: #000;\n}\n\n.aceColorPicker {\n    width: 36px;\n    height: 36px;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: transform 0.3s;\n}\n\n.aceColorPicker:hover {\n    transform: scale(1.1);\n}\n\n/* 黑夜模式样式 */\n.aceColorPickerWrapper.aceDark .aceColorPickerLabel {\n    color: #f7f7f7;\n}\n\n.aceColorPickerWrapper.aceDark .aceColorPicker {\n    background-color: #1c1c1e;\n    border: 1px solid #444;\n}\n\n.aceColorPickerWrapper.aceDark .aceColorPicker:hover {\n    transform: scale(1.1);\n}\n",""]);const s=o},358:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceImageWrapper {\n    overflow: hidden;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    transition: box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out;\n    background-color: #ffffff;\n}\n\n.aceImageWrapper:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceImage {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: 12px;\n    filter: invert(17%) sepia(0%) saturate(0%) hue-rotate(180deg) brightness(90%) contrast(85%);\n}\n\n.aceSvgIcon {\n    fill: #333333;\n}\n\n/* 黑夜模式样式 */\n.aceImageWrapper.aceDark {\n    background-color: #444;\n    box-shadow: 0 4px 8px rgba(68, 68, 68, 0.3);\n}\n\n.aceImageWrapper.aceDark:hover {\n    box-shadow: 0 8px 16px rgba(68, 68, 68, 0.7);\n}\n\n.aceImageWrapper.aceDark .aceSvgIcon {\n    fill: #fff;\n}\n\n.aceImageWrapper.aceDark .aceImage {\n    filter: invert(100%) brightness(100%);\n}",""]);const s=o},866:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceInputWrapper {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n}\n\n.aceInputLabel {\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #333;\n}\n\n.aceInput {\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    font-size: 14px;\n    transition: border-color 0.3s, box-shadow 0.3s;\n}\n\n.aceInput:focus {\n    border-color: #007aff;\n    box-shadow: 0 0 5px rgba(0, 122, 255, 0.5);\n    outline: none;\n}\n\n/* 黑夜模式样式 */\n.aceInputWrapper.aceDark .aceInputLabel {\n    color: #f7f7f7;\n}\n\n.aceInputWrapper.aceDark .aceInput {\n    background-color: #333335;\n    border: 1px solid #444;\n    color: #f7f7f7;\n}\n\n.aceInputWrapper.aceDark .aceInput:focus {\n    border-color: #007aff;\n    box-shadow: 0 0 5px rgba(0, 122, 255, 0.5);\n}\n",""]);const s=o},32:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceLinkWrapper {\n    display: flex;\n    align-items: center;\n    margin-bottom: 10px;\n}\n\n.aceLink {\n    font-size: 16px;\n    color: #007aff;\n    text-decoration: none;\n    transition: color 0.3s;\n}\n\n.aceLink:hover {\n    color: #005bb5;\n}\n\n/* 黑夜模式样式 */\n.aceLinkWrapper.aceDark .aceLink {\n    color: #5ac8fa; /* 在黑夜模式下使用较浅的蓝色 */\n}\n\n.aceLinkWrapper.aceDark .aceLink:hover {\n    color: #007aff;\n}\n",""]);const s=o},192:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".acePaginationContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 10px 0;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    border-radius: 12px;\n}\n\n.acePaginationButton {\n    background-color: #007aff;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    padding: 10px;\n    margin: 0 10px;\n    cursor: pointer;\n    font-size: 18px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 40px;\n    height: 40px;\n    transition: background-color 0.2s ease-in-out;\n}\n\n.acePaginationButton:disabled {\n    background-color: #c7c7cc;\n    cursor: not-allowed;\n}\n\n.acePaginationInfo {\n    font-size: 16px;\n    color: #000;\n}\n\n.aceIconChevronLeft:before,\n.aceIconChevronRight:before {\n    content: '';\n    display: inline-block;\n    border: solid white;\n    border-width: 0 2px 2px 0;\n    padding: 5px;\n    margin-top: 2px;\n}\n\n.aceIconChevronLeft:before {\n    transform: rotate(135deg);\n    -webkit-transform: rotate(135deg);\n}\n\n.aceIconChevronRight:before {\n    transform: rotate(-45deg);\n    -webkit-transform: rotate(-45deg);\n}\n\n/* 黑夜模式样式 */\n.acePaginationContainer.aceDark {\n    background-color: #444;\n}\n\n.acePaginationContainer.aceDark .acePaginationButton {\n    background-color: #444;\n}\n\n.acePaginationContainer.aceDark .acePaginationButton:disabled {\n    background-color: #555;\n}\n\n.acePaginationContainer.aceDark .acePaginationInfo {\n    color: #f7f7f7;\n}\n",""]);const s=o},286:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceRangeWrapper {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n}\n\n.aceRangeLabel {\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #333;\n}\n\n.aceRange {\n    -webkit-appearance: none;\n    width: 100%;\n    height: 8px;\n    border-radius: 5px;\n    background: #ddd;\n    outline: none;\n    transition: background 0.3s;\n}\n\n.aceRange:hover {\n    background: #ccc;\n}\n\n.aceRange::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    background: #007aff;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n.aceRange::-webkit-slider-thumb:hover {\n    background: #005bb5;\n}\n\n.aceRange::-moz-range-thumb {\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    background: #007aff;\n    cursor: pointer;\n    transition: background 0.3s;\n}\n\n.aceRange::-moz-range-thumb:hover {\n    background: #005bb5;\n}\n\n/* 黑夜模式样式 */\n.aceRangeWrapper.aceDark .aceRangeLabel {\n    color: #f7f7f7;\n}\n\n.aceRangeWrapper.aceDark .aceRange {\n    background: #444;\n}\n\n.aceRangeWrapper.aceDark .aceRange:hover {\n    background: #555;\n}\n\n.aceRangeWrapper.aceDark .aceRange::-webkit-slider-thumb {\n    background: #5ac8fa;\n}\n\n.aceRangeWrapper.aceDark .aceRange::-webkit-slider-thumb:hover {\n    background: #007aff;\n}\n\n.aceRangeWrapper.aceDark .aceRange::-moz-range-thumb {\n    background: #5ac8fa;\n}\n\n.aceRangeWrapper.aceDark .aceRange::-moz-range-thumb:hover {\n    background: #007aff;\n}\n",""]);const s=o},159:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceSelectWrapper {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n}\n\n.aceSelectLabel {\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #333;\n}\n\n.aceSelect {\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n    font-size: 14px;\n    transition: border-color 0.3s, box-shadow 0.3s;\n}\n\n.aceSelect:focus {\n    border-color: #007aff;\n    box-shadow: 0 0 5px rgba(0, 122, 255, 0.5);\n    outline: none;\n}\n\n/* 黑夜模式样式 */\n.aceSelectWrapper.aceDark .aceSelectLabel {\n    color: #f7f7f7;\n}\n\n.aceSelectWrapper.aceDark .aceSelect {\n    background-color: #333335;\n    border: 1px solid #444;\n    color: #f7f7f7;\n}\n\n.aceSelectWrapper.aceDark .aceSelect:focus {\n    border-color: #5ac8fa;\n    box-shadow: 0 0 5px rgba(90, 200, 250, 0.5);\n    outline: none;\n}\n",""]);const s=o},902:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceSizer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transform: translate(-50%, 0) scale(0.8);\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity .2s ease-out, transform .2s ease-out, box-shadow 0.3s ease-in-out, border 0.3s ease-in-out, background-color 0.3s ease-in-out;\n}\n\n.aceSizer.ani {\n    transform: translateX(0) translateY(0) scale(1);\n    opacity: 1;\n    pointer-events: initial;\n}\n\n.aceSizerFilled {\n    background-color: white;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    box-sizing: border-box;\n}\n\n.aceSizerFilled:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceSizerDragHandler {\n    width: 1vw;\n    height: 1vw;\n    max-width: 16px;\n    max-height: 16px;\n    background-color: #888;\n    border-radius: 50%;\n    position: absolute;\n    bottom: 16px;\n    right: 16px;\n    cursor: move;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    transition: background-color .2s ease-out, box-shadow 0.3s ease-in-out;\n}\n\n.aceSizerDragHandler:hover {\n    background-color: #333;\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);\n}\n\n/* 黑夜模式样式 */\n.aceSizer.aceDark .aceSizerDragHandler {\n    background-color: #555;\n}\n\n.aceSizer.aceDark .aceSizerDragHandler:hover {\n    background-color: #222;\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);\n}\n\n.aceSizerFilled.aceDark {\n    background-color: #333;\n    box-shadow: 0 4px 8px rgba(68, 68, 68, 0.3);\n}\n\n.aceSizerFilled.aceDark:hover {\n    box-shadow: 0 8px 16px rgba(68, 68, 68, 0.7);\n}\n",""]);const s=o},746:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceTextWrapper {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n}\n\n.aceTextLabel {\n    margin-bottom: 5px;\n    font-size: .8rem;\n    color: #333;\n}\n\n.aceText {\n    font-size: 1rem;\n    color: #333;\n    line-height: 1.5;\n    margin: 0;\n}\n\n/* 黑夜模式样式 */\n.aceTextWrapper.aceDark .aceTextLabel {\n    color: #f7f7f7;\n}\n\n.aceTextWrapper.aceDark .aceText {\n    color: #f7f7f7;\n}\n",""]);const s=o},738:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceVideoWrapper {\n    overflow: hidden;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    transition: box-shadow 0.3s ease-in-out;\n}\n\n.aceVideoWrapper:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceVideoPlayer {\n    width: 100%;\n    height: 100%;\n    border-radius: 12px;\n    outline: none;\n    transition: background-color 0.3s ease-in-out;\n}\n\n.aceVideoPlayer::-webkit-media-controls-panel {\n    background-color: #fff;\n    border-radius: 10px;\n}\n\n.aceVideoPlayer::-webkit-media-controls-play-button,\n.aceVideoPlayer::-webkit-media-controls-pause-button,\n.aceVideoPlayer::-webkit-media-controls-mute-button,\n.aceVideoPlayer::-webkit-media-controls-volume-slider,\n.aceVideoPlayer::-webkit-media-controls-timeline {\n    filter: invert(1);\n}\n\n/* 黑夜模式样式 */\n.aceVideoWrapper.aceDark {\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);\n}\n\n.aceVideoWrapper.aceDark:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);\n}\n\n.aceVideoWrapper.aceDark .aceVideoPlayer::-webkit-media-controls-panel {\n    background-color: #333335;\n}\n\n.aceVideoWrapper.aceDark .aceVideoPlayer::-webkit-media-controls-play-button,\n.aceVideoWrapper.aceDark .aceVideoPlayer::-webkit-media-controls-pause-button,\n.aceVideoWrapper.aceDark.aceVideoPlayer::-webkit-media-controls-mute-button,\n.aceVideoWrapper.aceDark.aceVideoPlayer::-webkit-media-controls-volume-slider,\n.aceVideoWrapper.aceDark.aceVideoPlayer::-webkit-media-controls-timeline {\n    filter: invert(0.8);\n}\n",""]);const s=o},776:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(425),a=n.n(r),i=n(42),o=n.n(i)()(a());o.push([e.id,".aceWindowWrapper {\n    background-color: white;\n    border-radius: 12px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    overflow: hidden;\n    transition: box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n}\n\n.aceWindowWrapper:hover {\n    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n}\n\n.aceWindowTitleBar {\n    background-color: #f7f7f7;\n    border-bottom: 1px solid #ddd;\n    height: 10%;\n    min-height: 52px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    padding: 0 20px;\n}\n\n.aceWindowTitle {\n    margin: 0;\n    font-size: 16px;\n    color: #333;\n}\n\n.aceWindowContent {\n    padding: 20px;\n    height: 90%;\n}\n\n/* 黑夜模式样式 */\n.aceWindowWrapper.aceDark {\n    background-color: #333;\n    box-shadow: 0 4px 8px rgba(68, 68, 68, 0.3);\n}\n\n.aceWindowWrapper.aceDark:hover {\n    box-shadow: 0 8px 16px rgba(68, 68, 68, 0.7);\n}\n\n.aceWindowWrapper.aceDark .aceWindowTitleBar {\n    background-color: #444;\n    border-bottom: 1px solid #555;\n}\n\n.aceWindowWrapper.aceDark .aceWindowTitle {\n    color: #f7f7f7;\n}\n\n.aceWindowWrapper.aceDark .aceWindowContent {\n    background-color: #333;\n    color: #f7f7f7;\n}\n",""]);const s=o},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},o=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=i[c]||0,d="".concat(c," ").concat(u);i[c]=u+1;var g=n(d),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==g)t[g].references++,t[g].updater(p);else{var f=a(p,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:f,references:1})}o.push(d)}return o}function a(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=n(i[o]);t[s].references--}for(var l=r(e,a),c=0;c<i.length;c++){var u=n(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";const e=new(function(){function e(){this.currentVersion="2.0.0",this.versionTag="Developer Beta",this.environment="Development"}return e.prototype.getCurrentVersion=function(){return this.currentVersion+" "+this.versionTag},e.prototype.getVersionTag=function(){return this.versionTag},e.prototype.getEnvironment=function(){return this.environment},e.prototype.getFullVersion=function(){return this.currentVersion+" "+this.environment+" "+this.versionTag},e.prototype.setCurrentVersion=function(e){var t=e.version;this.currentVersion=t},e.prototype.setVersionTag=function(e){var t=e.tag;this.versionTag=t},e.prototype.setEnvironment=function(e){var t=e.env;this.environment=t},e.prototype.parseVersion=function(e){var t=e.version,n=t.split(" ")[0],r=t.split(" ")[1]+" "+t.split(" ")[2],a=n.split(".").map(Number);return{major:a[0],minor:a[1],patch:a[2],tag:r}},e.prototype.tagPriority=function(e){switch(e.tag){case"Public Stable":return 4;case"Developer Stable":return 3;case"Public Beta":return 2;case"Developer Beta":return 1;default:return 0}},e.prototype.targetTagPriority=function(e){var t=e.tag;return"stable"===e.target?"Public Stable"===t||"Developer Stable"===t?this.tagPriority({tag:t}):0:"Public Beta"===t||"Developer Beta"===t?this.tagPriority({tag:t}):0},e.prototype.compareVersion=function(e){var t=e.version1,n=e.version2,r=e.target,a=this.parseVersion({version:t}),i=this.parseVersion({version:n});return a.major!==i.major?a.major-i.major:a.minor!==i.minor?a.minor-i.minor:a.patch!==i.patch?a.patch-i.patch:this.targetTagPriority({tag:a.tag,target:r})-this.targetTagPriority({tag:i.tag,target:r})},e}());const t=new(function(){function e(){this.translations={english:{changelog:"Changelog","changes-will-take-effect-after-reload":"Changes will take effect after reload","reload-now":"Reload now",install:"Install",preferences:"Preferences",general:"General","plugin-load-order":"Plugin Load Order","when-head-loaded":"When <head> loaded","when-body-loaded":"When <body> loaded","after-all":"After all",source:"Source",github:"Github",cloudflare:"Cloudflare",jsdelivr:"JSDelivr","update-runtime-when":"Update Runtime When","update-plugins-when":"Update Plugins When",startup:"Startup",daily:"Daily",weekly:"Weekly",monthly:"Monthly","update-runtime-to":"Update Runtime To",stable:"Stable",beta:"Beta",visual:"Visual",theme:"Theme",auto:"Auto",light:"Light",dark:"Dark",language:"Language",english:"English",japanese:"Japanese","simplified-chinese":"Simplified Chinese","traditional-chinese":"Traditional Chinese (Taiwan)",developer:"Developer",psv:"Plugin Signature Verification",full:"Full",half:"Half",none:"None",ipc:"Inter-Plugin Communication",enabled:"Enabled",disabled:"Disabled","log-level":"Log Level",error:"Error",warn:"Warn",info:"Info",debug:"Debug",ok:"OK",cancel:"Cancel",close:"Close",launchpad:"Launchpad","wants-to-open-a-new-tab":"wants to open a new tab","target-url":"Target URL","source-plugin-id":"Source Plugin ID","ace-v2-runtime-does-not-responsible-for-the-content":"ACE V2 Runtime does not responsible for the content","psv-check-failed-installation-denied":"PSV check failed, installation denied",plugin:"Plugin","this-plugin-is-already-installed":"This plugin is already installed","installation-succeed":"Installation succeed","press-ok-to-reload":"Press OK to reload","uninstallation-succeed":"Uninstallation succeed","uninstalled-bridged-plugin":"Uninstalled bridged plugin","please-reload-page":"Please reload page","uninstall-bridged-plugin-failed":"Uninstall bridged plugin failed","please-try-again":"Please try again","request-reload":"Request reload","wants-to-extract-and-install-plugin-package":"wants to extract and install plugin package","do-you-really-want-to-do-that":"Do you really want to do that","decompressed-data-does-not-contain-valid-buffer-property":"Decompressed data does not contain valid buffer property","no-files-extracted-from-the-compressed-data":"No files extracted from the compressed data","error-extracting-and-installing-plugin-package":"Error extracting and installing plugin package",canceled:"Canceled","wants-to-download-and-install-plugin-package":"wants to download and install plugin package","download-url":"Download URL","target-plugin-id":"Target Plugin ID",version:"Version","has-been-released":"has been released","newer-runtime-version-has-been-released-please-consider-updating":"Newer runtime version has been released, please consider updating","current-version":"Current version",to:"to","newer-version-of":"Newer version of","do-you-want-to-update-this-plugin-from":"Do you want to update this plugin from","just-now":"Just now","debug-bridge":"Debug Bridge","downloading-plugin-from":"Downloading plugin from","installing-plugin":"Installing plugin","installed-plugin":"Installed plugin","debug-bridge-enabled":"Debug Bridge Enabled","loading-data":"Loading data","do-you-really-want-to-clear-monkey-storage":"Do you really want to clear Monkey Storage","all-plugins-and-preferences-will-be-lose-its-unrecoverable":"All plugins and preferences will be lose, it's unrecoverable","clear-monkey-storage":"Clear Monkey Storage","do-you-really-want-to-clear-local-storage":"Do you really want to clear Local Storage","all-preferences-stored-in-local-storage-will-be-lose-its-unrecoverable":"All preferences stored in Local Storage will be lose, it's unrecoverable","clear-local-storage":"Clear LocalStorage","do-you-really-want-to-import-monkey-backup":"Do you really want to import Monkey Backup","failed-to-import-filename-is-invalid":"Failed to import, filename is invalid","import-succeed":"Import succeed","click-ok-to-reload-page":"Click OK to reload page","import-monkey-storage":"Import Monkey Storage","do-you-really-want-to-import-local-storage-backup":"Do you really want to import Local Storage Backup","import-local-storage":"Import LocalStorage","do-you-really-want-to-install-external-plugin":"Do you really want to install external plugin","you-need-to-be-sure-you-trust-the-origin-especially-when-psv-is-half-or-off":"You need to be sure you trust the origin, especially when PSV is half or off","failed-to-install":"Failed to install","invalid-plugin-package-it-may-because-you-do-not-name-it-correctly-or-pack-it-correctly-please-use-the-developer-kit-in-github":"Invalid plugin package, it may because you do not name it correctly or pack it correctly, please use the developer kit in Github","install-plugin-package":"Install Plugin Package","install-unpacked-plugin":"Install Unpacked Plugin","configure-bridge":"Configure Bridge","enable-bridge":"Enable Bridge",connect:"Connect","bridged-installation":"Bridged Installation","welcome-to":"Welcome to","this-plugin-does-not-support-interactive-ui-use-preferences-to-configure-its-behavior":"This plugin does not support interactive UI, use preferences to configure its behavior",uninstall:"Uninstall","cant-uninstall-build-in-plugins":"Can't uninstall build-in plugins",website:"Website",description:"Description","latest-version":"Latest Version","requested-apis":"Requested APIs",matches:"Matches","created-at":"Created At","updated-at":"Updated At","reactive-ui":"Reactive UI","save-and-reload":"Save and Reload",about:"About","please-notice-that-some-preferences-need-to-reload-the-page-to-take-effect":"Please notice that some preferences need to reload the page to take effect",note:"Note"},"simplified-chinese":{changelog:"更新日志","changes-will-take-effect-after-reload":"更改将在重新加载后生效","reload-now":"立即重新加载",install:"安装",preferences:"偏好设置",general:"通用","plugin-load-order":"插件加载顺序","when-head-loaded":"当 <head> 加载后","when-body-loaded":"当 <body> 加载后","after-all":"全部加载后",source:"源",github:"GitHub",cloudflare:"Cloudflare",jsdelivr:"JSDelivr","update-runtime-when":"检查 ACEV2 Runtime 更新时间","update-plugins-when":"检查 插件 更新时间",startup:"每次启动时",daily:"每日",weekly:"每周",monthly:"每月","update-runtime-to":"更新 ACEV2 Runtime 的目标版本",stable:"Stable(稳定版)",beta:"Beta(测试版)",visual:"视觉",theme:"主题",auto:"自动",light:"浅色",dark:"深色",language:"语言",english:"英语",japanese:"日语","simplified-chinese":"简体中文","traditional-chinese":"繁体中文（台湾）",developer:"开发者",psv:"插件签名检查(PSV)",full:"完全(Full)",half:"一般(Half)",none:"不检查(None)",ipc:"插件间通信(IPC)",enabled:"已启用(Enabled)",disabled:"已禁用(Disabled)","log-level":"日志级别(Log Level)",error:"错误(Error)",warn:"警告(Warn)",info:"信息(Info)",debug:"调试(Debug)",ok:"好",cancel:"取消",close:"关闭",launchpad:"启动台","wants-to-open-a-new-tab":"要打开一个新标签页","target-url":"目标网址","source-plugin-id":"源插件ID","ace-v2-runtime-does-not-responsible-for-the-content":"ACE V2 Runtime 不对页面内容负责","psv-check-failed-installation-denied":"插件签名验证失败，安装被拒绝",plugin:"插件","this-plugin-is-already-installed":"此插件已安装","installation-succeed":"安装成功","press-ok-to-reload":"点击确定重新加载","uninstallation-succeed":"卸载成功","uninstalled-bridged-plugin":"卸载了桥接插件","please-reload-page":"请重新加载页面","uninstall-bridged-plugin-failed":"卸载桥接插件失败","please-try-again":"请再试一次","request-reload":"请求重新加载","wants-to-extract-and-install-plugin-package":"要解压并安装插件包","do-you-really-want-to-do-that":"你真的要这样做吗","decompressed-data-does-not-contain-valid-buffer-property":"解压后的数据不包含有效的缓冲区属性","no-files-extracted-from-the-compressed-data":"未从压缩数据中提取任何文件","error-extracting-and-installing-plugin-package":"解压和安装插件包时出错",canceled:"已取消","wants-to-download-and-install-plugin-package":"要下载并安装插件包","download-url":"下载链接","target-plugin-id":"目标插件ID",version:"版本","has-been-released":"已经发布","newer-runtime-version-has-been-released-please-consider-updating":"已发布更新版的 ACEV2 Runtime ，请考虑更新","current-version":"当前版本",to:"到","newer-version-of":"更新版本的","do-you-want-to-update-this-plugin-from":"你想要将此插件从以下版本更新到","just-now":"刚刚","debug-bridge":"调试桥","downloading-plugin-from":"正从目标下载插件","installing-plugin":"正安装插件","installed-plugin":"已安装插件","debug-bridge-enabled":"调试桥已启用","loading-data":"数据正在载入","do-you-really-want-to-clear-monkey-storage":"你真的要清除Monkey存储吗","all-plugins-and-preferences-will-be-lose-its-unrecoverable":"所有插件和偏好设置将丢失，无法恢复","clear-monkey-storage":"清除Monkey存储","do-you-really-want-to-clear-local-storage":"你真的要清除本地存储吗","all-preferences-stored-in-local-storage-will-be-lose-its-unrecoverable":"存储在本地存储中的所有偏好设置将丢失，无法恢复","clear-local-storage":"清除本地存储","do-you-really-want-to-import-monkey-backup":"你真的要导入Monkey备份吗","failed-to-import-filename-is-invalid":"导入失败，文件名无效","import-succeed":"导入成功","click-ok-to-reload-page":"点击确定重新加载页面","import-monkey-storage":"导入Monkey存储","do-you-really-want-to-import-local-storage-backup":"你真的要导入本地存储备份吗","import-local-storage":"导入本地存储","do-you-really-want-to-install-external-plugin":"你真的要安装外部插件吗","you-need-to-be-sure-you-trust-the-origin-especially-when-psv-is-half-or-off":"你需要确保你信任来源，尤其当PSV为一般或关闭时","failed-to-install":"安装失败","invalid-plugin-package-it-may-because-you-do-not-name-it-correctly-or-pack-it-correctly-please-use-the-developer-kit-in-github":"无效的插件包，可能是因为命名或打包不正确，请使用GitHub中的开发工具包","install-plugin-package":"安装插件包","install-unpacked-plugin":"安装未打包插件","configure-bridge":"配置桥接","enable-bridge":"启用桥接",connect:"连接","bridged-installation":"桥接安装","welcome-to":"欢迎使用","this-plugin-does-not-support-interactive-ui-use-preferences-to-configure-its-behavior":"此插件不支持交互式UI，请使用偏好设置配置其行为",uninstall:"卸载","cant-uninstall-build-in-plugins":"无法卸载内置插件",website:"网站",description:"描述","latest-version":"最新版本","requested-apis":"请求的API",matches:"匹配","created-at":"创建时间","updated-at":"更新时间","reactive-ui":"响应式UI","save-and-reload":"保存并重新加载",about:"关于","please-notice-that-some-preferences-need-to-reload-the-page-to-take-effect":"请注意，某些偏好设置需要重新加载页面才能生效",note:"注意"},"traditional-chinese":{changelog:"更新日誌","changes-will-take-effect-after-reload":"更改將在重新整理後生效","reload-now":"立即重整",install:"安裝",preferences:"偏好設定",general:"一般","plugin-load-order":"插件載入順序","when-head-loaded":"當 <head> 載入後","when-body-loaded":"當 <body> 載入後","after-all":"全部載入後",source:"源",github:"GitHub",cloudflare:"Cloudflare",jsdelivr:"JSDelivr","update-runtime-when":"何時更新運行時","update-plugins-when":"何時更新插件",startup:"啟動時",daily:"每日",weekly:"每週",monthly:"每月","update-runtime-to":"更新運行時至",stable:"穩定版",beta:"測試版",visual:"視覺",theme:"主題",auto:"自動",light:"淺色",dark:"深色",language:"語言",english:"英語",japanese:"日語","simplified-chinese":"簡體中文","traditional-chinese":"繁體中文（臺灣）",developer:"開發者",psv:"插件簽名驗證",full:"完整",half:"部分",none:"無",ipc:"插件間通信",enabled:"啟用",disabled:"禁用","log-level":"日誌等級",error:"錯誤",warn:"警告",info:"信息",debug:"調試",ok:"好",cancel:"取消",close:"關閉",launchpad:"啟動板","wants-to-open-a-new-tab":"想要打開新標籤頁","target-url":"目標網址","source-plugin-id":"源插件ID","ace-v2-runtime-does-not-responsible-for-the-content":"ACE V2運行時不對內容負責","psv-check-failed-installation-denied":"插件簽名驗證失敗，安裝被拒絕",plugin:"插件","this-plugin-is-already-installed":"此插件已安裝","installation-succeed":"安裝成功","press-ok-to-reload":"點擊確定重新載入","uninstallation-succeed":"卸載成功","uninstalled-bridged-plugin":"卸載了橋接插件","please-reload-page":"請重新載入頁面","uninstall-bridged-plugin-failed":"卸載橋接插件失敗","please-try-again":"請再試一次","request-reload":"請求重新載入","wants-to-extract-and-install-plugin-package":"想要解壓並安裝插件包","do-you-really-want-to-do-that":"你真的要這麼做嗎","decompressed-data-does-not-contain-valid-buffer-property":"解壓數據不包含有效的緩衝區屬性","no-files-extracted-from-the-compressed-data":"未從壓縮數據中提取任何文件","error-extracting-and-installing-plugin-package":"解壓和安裝插件包時出錯",canceled:"已取消","wants-to-download-and-install-plugin-package":"想要下載並安裝插件包","download-url":"下載鏈接","target-plugin-id":"目標插件ID",version:"版本","has-been-released":"已經發布","newer-runtime-version-has-been-released-please-consider-updating":"已發布新版本運行時，請考慮更新","current-version":"當前版本",to:"到","newer-version-of":"更新版本的","do-you-want-to-update-this-plugin-from":"你想要將此插件從以下版本更新到","just-now":"剛剛","debug-bridge":"調試橋","downloading-plugin-from":"正在從以下下載插件","installing-plugin":"正在安裝插件","installed-plugin":"已安裝插件","debug-bridge-enabled":"調試橋已啟用","loading-data":"正在載入數據","do-you-really-want-to-clear-monkey-storage":"你真的要清除Monkey存儲嗎","all-plugins-and-preferences-will-be-lose-its-unrecoverable":"所有插件和偏好設置將丟失，無法恢復","clear-monkey-storage":"清除Monkey存儲","do-you-really-want-to-clear-local-storage":"你真的要清除本地存儲嗎","all-preferences-stored-in-local-storage-will-be-lose-its-unrecoverable":"存儲在本地存儲中的所有偏好設置將丟失，無法恢復","clear-local-storage":"清除本地存儲","do-you-really-want-to-import-monkey-backup":"你真的要導入Monkey備份嗎","failed-to-import-filename-is-invalid":"導入失敗，文件名無效","import-succeed":"導入成功","click-ok-to-reload-page":"點擊確定重新載入頁面","import-monkey-storage":"導入Monkey存儲","do-you-really-want-to-import-local-storage-backup":"你真的要導入本地存儲備份嗎","import-local-storage":"導入本地存儲","do-you-really-want-to-install-external-plugin":"你真的要安裝外部插件嗎","you-need-to-be-sure-you-trust-the-origin-especially-when-psv-is-half-or-off":"你需要確保你信任來源，尤其當PSV為部分或關閉時","failed-to-install":"安裝失敗","invalid-plugin-package-it-may-because-you-do-not-name-it-correctly-or-pack-it-correctly-please-use-the-developer-kit-in-github":"無效的插件包，可能是因為命名或打包不正確，請使用GitHub中的開發工具包","install-plugin-package":"安裝插件包","install-unpacked-plugin":"安裝未打包插件","configure-bridge":"配置橋接","enable-bridge":"啟用橋接",connect:"連接","bridged-installation":"橋接安裝","welcome-to":"歡迎來到","this-plugin-does-not-support-interactive-ui-use-preferences-to-configure-its-behavior":"此插件不支持互動式UI，請使用偏好設置來配置其行為",uninstall:"卸載","cant-uninstall-build-in-plugins":"無法卸載內置插件",website:"網站",description:"描述","latest-version":"最新版本","requested-apis":"請求的API",matches:"匹配","created-at":"創建時間","updated-at":"更新時間","reactive-ui":"反應式UI","save-and-reload":"保存並重整",about:"關於","please-notice-that-some-preferences-need-to-reload-the-page-to-take-effect":"請注意，某些設定可能要重整後才會生效",note:"注意"},japanese:{changelog:"更新履歴","changes-will-take-effect-after-reload":"変更は再読み込み後に有効になります","reload-now":"今すぐ再読み込み",install:"インストール",preferences:"設定",general:"一般","plugin-load-order":"プラグインの読み込み順序","when-head-loaded":"ヘッドロード時","when-body-loaded":"ボディロード時","after-all":"全てロード後",source:"ソース",github:"GitHub",cloudflare:"Cloudflare",jsdelivr:"JSDelivr","update-runtime-when":"ランタイムの更新タイミング","update-plugins-when":"プラグインの更新タイミング",startup:"起動時",daily:"毎日",weekly:"毎週",monthly:"毎月","update-runtime-to":"ランタイムを更新",stable:"安定版",beta:"ベータ版",visual:"ビジュアル",theme:"テーマ",auto:"自動",light:"ライト",dark:"ダーク",language:"言語",english:"英語",japanese:"日本語","simplified-chinese":"簡体字中国語","traditional-chinese":"繁体字中国語（台湾）",developer:"開発者",psv:"プラグイン署名検証",full:"完全",half:"部分",none:"なし",ipc:"プラグイン間通信",enabled:"有効",disabled:"無効","log-level":"ログレベル",error:"エラー",warn:"警告",info:"情報",debug:"デバッグ",ok:"OK",cancel:"キャンセル",close:"閉じる",launchpad:"ランチパッド","wants-to-open-a-new-tab":"新しいタブを開こうとしています","target-url":"ターゲットURL","source-plugin-id":"ソースプラグインID","ace-v2-runtime-does-not-responsible-for-the-content":"ACE V2ランタイムはコンテンツに責任を負いません","psv-check-failed-installation-denied":"プラグイン署名検証に失敗し、インストールが拒否されました",plugin:"プラグイン","this-plugin-is-already-installed":"このプラグインは既にインストールされています","installation-succeed":"インストールに成功しました","press-ok-to-reload":"OKを押してリロードしてください","uninstallation-succeed":"アンインストールに成功しました","uninstalled-bridged-plugin":"ブリッジプラグインをアンインストールしました","please-reload-page":"ページをリロードしてください","uninstall-bridged-plugin-failed":"ブリッジプラグインのアンインストールに失敗しました","please-try-again":"もう一度お試しください","request-reload":"リロードをリクエスト","wants-to-extract-and-install-plugin-package":"プラグインパッケージを解凍してインストールしようとしています","do-you-really-want-to-do-that":"本当にそうしたいですか","decompressed-data-does-not-contain-valid-buffer-property":"解凍されたデータに有効なバッファプロパティが含まれていません","no-files-extracted-from-the-compressed-data":"圧縮データからファイルが抽出されませんでした","error-extracting-and-installing-plugin-package":"プラグインパッケージの解凍とインストール中にエラーが発生しました",canceled:"キャンセルされました","wants-to-download-and-install-plugin-package":"プラグインパッケージをダウンロードしてインストールしようとしています","download-url":"ダウンロードURL","target-plugin-id":"ターゲットプラグインID",version:"バージョン","has-been-released":"がリリースされました","newer-runtime-version-has-been-released-please-consider-updating":"新しいランタイムバージョンがリリースされました。更新を検討してください","current-version":"現在のバージョン",to:"から","newer-version-of":"の新しいバージョン","do-you-want-to-update-this-plugin-from":"このプラグインを以下から更新しますか","just-now":"ちょうど今","debug-bridge":"デバッグブリッジ","downloading-plugin-from":"プラグインをダウンロードしています","installing-plugin":"プラグインをインストールしています","installed-plugin":"インストールされたプラグイン","debug-bridge-enabled":"デバッグブリッジが有効になりました","loading-data":"データを読み込み中","do-you-really-want-to-clear-monkey-storage":"Monkeyストレージを本当にクリアしますか","all-plugins-and-preferences-will-be-lose-its-unrecoverable":"すべてのプラグインと設定が失われ、回復できません","clear-monkey-storage":"Monkeyストレージをクリア","do-you-really-want-to-clear-local-storage":"ローカルストレージを本当にクリアしますか","all-preferences-stored-in-local-storage-will-be-lose-its-unrecoverable":"ローカルストレージに保存されたすべての設定が失われ、回復できません","clear-local-storage":"ローカルストレージをクリア","do-you-really-want-to-import-monkey-backup":"Monkeyバックアップを本当にインポートしますか","failed-to-import-filename-is-invalid":"インポートに失敗しました。ファイル名が無効です","import-succeed":"インポートに成功しました","click-ok-to-reload-page":"OKをクリックしてページをリロードしてください","import-monkey-storage":"Monkeyストレージをインポート","do-you-really-want-to-import-local-storage-backup":"ローカルストレージのバックアップを本当にインポートしますか","import-local-storage":"ローカルストレージをインポート","do-you-really-want-to-install-external-plugin":"外部プラグインを本当にインストールしますか","you-need-to-be-sure-you-trust-the-origin-especially-when-psv-is-half-or-off":"PSVが半分または無効の場合は特に、元の信頼性を確保する必要があります","failed-to-install":"インストールに失敗しました","invalid-plugin-package-it-may-because-you-do-not-name-it-correctly-or-pack-it-correctly-please-use-the-developer-kit-in-github":"無効なプラグインパッケージです。名前やパッケージングが正しくない可能性があります。GitHubの開発者キットを使用してください","install-plugin-package":"プラグインパッケージをインストール","install-unpacked-plugin":"未パックのプラグインをインストール","configure-bridge":"ブリッジを構成","enable-bridge":"ブリッジを有効にする",connect:"接続","bridged-installation":"ブリッジされたインストール","welcome-to":"ようこそ","this-plugin-does-not-support-interactive-ui-use-preferences-to-configure-its-behavior":"このプラグインはインタラクティブUIをサポートしていません。設定で動作を構成してください",uninstall:"アンインストール","cant-uninstall-build-in-plugins":"組み込みプラグインはアンインストールできません",website:"ウェブサイト",description:"説明","latest-version":"最新バージョン","requested-apis":"要求されたAPI",matches:"一致","created-at":"作成日","updated-at":"更新日","reactive-ui":"リアクティブUI","save-and-reload":"保存して再読み込み",about:"情報","please-notice-that-some-preferences-need-to-reload-the-page-to-take-effect":"一部の設定はページを再読み込みする必要があります",note:"注意"}}}return e.prototype.t=function(e){var t=e.key;return this.translations[this.getCurrentLanguage()][t]||t},e.prototype.reverseT=function(e){var t=this,n=e.value;return Object.keys(this.translations[this.getCurrentLanguage()]).find((function(e){return t.translations[t.getCurrentLanguage()][e]===n}))||n},e.prototype.getCurrentLanguage=function(){return"auto"===Fo.getPreference({category:"visual",k:"language"})?this.autoLanguage():Fo.getPreference({category:"visual",k:"language"})||"english"},e.prototype.autoLanguage=function(){var e=navigator.language;return e.includes("zh")?e.includes("Hans")?"simplified-chinese":e.includes("Hant")?"traditional-chinese":"simplified-chinese":e.includes("ja")?"japanese":"english"},e.prototype.getLocate=function(){return navigator.language},e}());const r=new(function(){function e(){this.runtimeDate=null,this.sunriseTime="06:00",this.sunsetTime="18:00"}return e.prototype.start=function(){Jo.info({message:"ClockService is starting..."}),this.runtimeDate=new Date},e.prototype.stop=function(){this.runtimeDate=null,Jo.info({message:"ClockService is stopping..."})},e.prototype.now=function(){return this.runtimeDate},e.prototype.getTimestamp=function(){var e;return null===(e=this.runtimeDate)||void 0===e?void 0:e.getTime()},e.prototype.isNight=function(){var e=new Date,t=e.getHours()+":"+e.getMinutes().toString().padStart(2,"0"),n=new Date(e.toDateString()+" "+this.sunriseTime),r=new Date(e.toDateString()+" "+this.sunsetTime),a=new Date(e.toDateString()+" "+t);return a>=r||a<=n},e.prototype.toReadableTime=function(e){var n,r=e.timestamp,a=(((null===(n=this.runtimeDate)||void 0===n?void 0:n.getTime())||Date.now())-r)/1e3/60/60,i=a/24;if(i>=7){return new Date(r).toLocaleString(t.getLocate(),{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0})}if(i>=1){var o=Math.floor(i);return"".concat(o," day").concat(o>1?"s":""," ago")}if(a>=1){var s=Math.floor(a);return"".concat(s," hour").concat(s>1?"s":""," ago")}return t.t({key:"just-now"})},e}());var a,i,o,s,l,c,u,d,g,p,f={},h=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,M=Array.isArray;function m(e,t){for(var n in t)e[n]=t[n];return e}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n){var r,i,o,s={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?a.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return w(e,s,r,i,null)}function w(e,t,n,r,a){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==a?++o:a,__i:-1,__u:0};return null==a&&null!=i.vnode&&i.vnode(s),s}function I(e){return e.children}function N(e,t){this.props=e,this.context=t}function A(e,t){if(null==t)return e.__?A(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?A(e):null}function T(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return T(e)}}function k(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!_.__r++||l!==i.debounceRendering)&&((l=i.debounceRendering)||c)(_)}function _(){var e,t,n,r,a,o,l,c;for(s.sort(u);e=s.shift();)e.__d&&(t=s.length,r=void 0,o=(a=(n=e).__v).__e,l=[],c=[],n.__P&&((r=m({},a)).__v=a.__v+1,i.vnode&&i.vnode(r),S(n.__P,r,a,n.__n,n.__P.namespaceURI,32&a.__u?[o]:null,l,null==o?A(a):o,!!(32&a.__u),c),r.__v=a.__v,r.__.__k[r.__i]=r,U(l,r,c),r.__e!=o&&T(r)),s.length>t&&s.sort(u));_.__r=0}function x(e,t,n,r,a,i,o,s,l,c,u){var d,g,p,y,M,m=r&&r.__k||h,b=t.length;for(n.__d=l,D(n,t,m),l=n.__d,d=0;d<b;d++)null!=(p=n.__k[d])&&"boolean"!=typeof p&&"function"!=typeof p&&(g=-1===p.__i?f:m[p.__i]||f,p.__i=d,S(e,p,g,a,i,o,s,l,c,u),y=p.__e,p.ref&&g.ref!=p.ref&&(g.ref&&P(g.ref,null,p),u.push(p.ref,p.__c||y,p)),null==M&&null!=y&&(M=y),65536&p.__u||g.__k===p.__k?l=z(p,l,e):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:y&&(l=y.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=l,n.__e=M}function D(e,t,n){var r,a,i,o,s,l=t.length,c=n.length,u=c,d=0;for(e.__k=[],r=0;r<l;r++)o=r+d,null!=(a=e.__k[r]=null==(a=t[r])||"boolean"==typeof a||"function"==typeof a?null:"string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?w(null,a,null,null,null):M(a)?w(I,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?w(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)?(a.__=e,a.__b=e.__b+1,s=j(a,n,o,u),a.__i=s,i=null,-1!==s&&(u--,(i=n[s])&&(i.__u|=131072)),null==i||null===i.__v?(-1==s&&d--,"function"!=typeof a.type&&(a.__u|=65536)):s!==o&&(s==o-1?d=s-o:s==o+1?d++:s>o?u>l-o?d+=s-o:d--:s<o&&d++,s!==r+d&&(a.__u|=65536))):(i=n[o])&&null==i.key&&i.__e&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=A(i)),Q(i,i,!1),n[o]=null,u--);if(u)for(r=0;r<c;r++)null!=(i=n[r])&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=A(i)),Q(i,i))}function z(e,t,n){var r,a;if("function"==typeof e.type){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=z(r[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=A(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function C(e,t){return t=t||[],null==e||"boolean"==typeof e||(M(e)?e.some((function(e){C(e,t)})):t.push(e)),t}function j(e,t,n,r){var a=e.key,i=e.type,o=n-1,s=n+1,l=t[n];if(null===l||l&&a==l.key&&i===l.type&&!(131072&l.__u))return n;if(r>(null==l||131072&l.__u?0:1))for(;o>=0||s<t.length;){if(o>=0){if((l=t[o])&&!(131072&l.__u)&&a==l.key&&i===l.type)return o;o--}if(s<t.length){if((l=t[s])&&!(131072&l.__u)&&a==l.key&&i===l.type)return s;s++}}return-1}function L(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||y.test(t)?n:n+"px"}function E(e,t,n,r,a){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||L(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||L(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=d,e.addEventListener(t,i?p:g,i)):e.removeEventListener(t,i?p:g,i);else{if("http://www.w3.org/2000/svg"==a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function O(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=d++;else if(t.t<n.u)return;return n(i.event?i.event(t):t)}}}function S(e,t,n,r,a,o,s,l,c,u){var d,g,p,f,h,y,b,v,w,A,T,k,_,D,z,C,j=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),o=[l=t.__e=n.__e]),(d=i.__b)&&d(t);e:if("function"==typeof j)try{if(v=t.props,w="prototype"in j&&j.prototype.render,A=(d=j.contextType)&&r[d.__c],T=d?A?A.props.value:d.__:r,n.__c?b=(g=t.__c=n.__c).__=g.__E:(w?t.__c=g=new j(v,T):(t.__c=g=new N(v,T),g.constructor=j,g.render=R),A&&A.sub(g),g.props=v,g.state||(g.state={}),g.context=T,g.__n=r,p=g.__d=!0,g.__h=[],g._sb=[]),w&&null==g.__s&&(g.__s=g.state),w&&null!=j.getDerivedStateFromProps&&(g.__s==g.state&&(g.__s=m({},g.__s)),m(g.__s,j.getDerivedStateFromProps(v,g.__s))),f=g.props,h=g.state,g.__v=t,p)w&&null==j.getDerivedStateFromProps&&null!=g.componentWillMount&&g.componentWillMount(),w&&null!=g.componentDidMount&&g.__h.push(g.componentDidMount);else{if(w&&null==j.getDerivedStateFromProps&&v!==f&&null!=g.componentWillReceiveProps&&g.componentWillReceiveProps(v,T),!g.__e&&(null!=g.shouldComponentUpdate&&!1===g.shouldComponentUpdate(v,g.__s,T)||t.__v===n.__v)){for(t.__v!==n.__v&&(g.props=v,g.state=g.__s,g.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),k=0;k<g._sb.length;k++)g.__h.push(g._sb[k]);g._sb=[],g.__h.length&&s.push(g);break e}null!=g.componentWillUpdate&&g.componentWillUpdate(v,g.__s,T),w&&null!=g.componentDidUpdate&&g.__h.push((function(){g.componentDidUpdate(f,h,y)}))}if(g.context=T,g.props=v,g.__P=e,g.__e=!1,_=i.__r,D=0,w){for(g.state=g.__s,g.__d=!1,_&&_(t),d=g.render(g.props,g.state,g.context),z=0;z<g._sb.length;z++)g.__h.push(g._sb[z]);g._sb=[]}else do{g.__d=!1,_&&_(t),d=g.render(g.props,g.state,g.context),g.state=g.__s}while(g.__d&&++D<25);g.state=g.__s,null!=g.getChildContext&&(r=m(m({},r),g.getChildContext())),w&&!p&&null!=g.getSnapshotBeforeUpdate&&(y=g.getSnapshotBeforeUpdate(f,h)),x(e,M(C=null!=d&&d.type===I&&null==d.key?d.props.children:d)?C:[C],t,n,r,a,o,s,l,c,u),g.base=t.__e,t.__u&=-161,g.__h.length&&s.push(g),b&&(g.__E=g.__=null)}catch(e){if(t.__v=null,c||null!=o){for(t.__u|=c?160:32;l&&8===l.nodeType&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,t.__e=l}else t.__e=n.__e,t.__k=n.__k;i.__e(e,t,n)}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Y(n.__e,t,n,r,a,o,s,c,u);(d=i.diffed)&&d(t)}function U(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)P(n[r],n[++r],n[++r]);i.__c&&i.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){i.__e(e,t.__v)}}))}function Y(e,t,n,r,i,o,s,l,c){var u,d,g,p,h,y,m,v=n.props,w=t.props,I=t.type;if("svg"===I?i="http://www.w3.org/2000/svg":"math"===I?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=o)for(u=0;u<o.length;u++)if((h=o[u])&&"setAttribute"in h==!!I&&(I?h.localName===I:3===h.nodeType)){e=h,o[u]=null;break}if(null==e){if(null===I)return document.createTextNode(w);e=document.createElementNS(i,I,w.is&&w),o=null,l=!1}if(null===I)v===w||l&&e.data===w||(e.data=w);else{if(o=o&&a.call(e.childNodes),v=n.props||f,!l&&null!=o)for(v={},u=0;u<e.attributes.length;u++)v[(h=e.attributes[u]).name]=h.value;for(u in v)if(h=v[u],"children"==u);else if("dangerouslySetInnerHTML"==u)g=h;else if("key"!==u&&!(u in w)){if("value"==u&&"defaultValue"in w||"checked"==u&&"defaultChecked"in w)continue;E(e,u,null,h,i)}for(u in w)h=w[u],"children"==u?p=h:"dangerouslySetInnerHTML"==u?d=h:"value"==u?y=h:"checked"==u?m=h:"key"===u||l&&"function"!=typeof h||v[u]===h||E(e,u,h,v[u],i);if(d)l||g&&(d.__html===g.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(g&&(e.innerHTML=""),x(e,M(p)?p:[p],t,n,r,"foreignObject"===I?"http://www.w3.org/1999/xhtml":i,o,s,o?o[0]:n.__k&&A(n,0),l,c),null!=o)for(u=o.length;u--;)null!=o[u]&&b(o[u]);l||(u="value",void 0!==y&&(y!==e[u]||"progress"===I&&!y||"option"===I&&y!==v[u])&&E(e,u,y,v[u],i),u="checked",void 0!==m&&m!==e[u]&&E(e,u,m,v[u],i))}return e}function P(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){i.__e(e,n)}}function Q(e,t,n){var r,a;if(i.unmount&&i.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||P(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){i.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&Q(r[a],t,n||"function"!=typeof e.type);n||null==e.__e||b(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function R(e,t,n){return this.constructor(e,n)}function W(e,t,n){var r,o,s,l;i.__&&i.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,s=[],l=[],S(t,e=(!r&&n||t).__k=v(I,null,[e]),o||f,f,t.namespaceURI,!r&&n?[n]:o?null:t.firstChild?a.call(t.childNodes):null,s,!r&&n?n:o?o.__e:t.firstChild,r,l),U(s,e,l)}a=h.slice,i={__e:function(e,t,n,r){for(var a,i,o;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&null!=i.getDerivedStateFromError&&(a.setState(i.getDerivedStateFromError(e)),o=a.__d),null!=a.componentDidCatch&&(a.componentDidCatch(e,r||{}),o=a.__d),o)return a.__E=a}catch(t){e=t}throw e}},o=0,N.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=m({},this.state),"function"==typeof e&&(e=e(m({},n),this.props)),e&&m(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),k(this))},N.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),k(this))},N.prototype.render=I,s=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},_.__r=0,d=0,g=O(!1),p=O(!0);var B,G,Z,H,F=0,V=[],J=i,q=J.__b,K=J.__r,X=J.diffed,$=J.__c,ee=J.unmount,te=J.__;function ne(e,t){J.__h&&J.__h(G,e,F||t),F=0;var n=G.__H||(G.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function re(e){return F=1,ae(fe,e)}function ae(e,t,n){var r=ne(B++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):fe(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=G,!G.u)){var a=function(e,t,n){if(!r.__c.__H)return!0;var a=r.__c.__H.__.filter((function(e){return!!e.__c}));if(a.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var o=!1;return a.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),!(!o&&r.__c.props===e)&&(!i||i.call(this,e,t,n))};G.u=!0;var i=G.shouldComponentUpdate,o=G.componentWillUpdate;G.componentWillUpdate=function(e,t,n){if(this.__e){var r=i;i=void 0,a(e,t,n),i=r}o&&o.call(this,e,t,n)},G.shouldComponentUpdate=a}return r.__N||r.__}function ie(e,t){var n=ne(B++,3);!J.__s&&pe(n.__H,t)&&(n.__=e,n.i=t,G.__H.__h.push(n))}function oe(e){return F=5,se((function(){return{current:e}}),[])}function se(e,t){var n=ne(B++,7);return pe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function le(){for(var e;e=V.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(de),e.__H.__h.forEach(ge),e.__H.__h=[]}catch(t){e.__H.__h=[],J.__e(t,e.__v)}}J.__b=function(e){G=null,q&&q(e)},J.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),te&&te(e,t)},J.__r=function(e){K&&K(e),B=0;var t=(G=e.__c).__H;t&&(Z===G?(t.__h=[],G.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(de),t.__h.forEach(ge),t.__h=[],B=0)),Z=G},J.diffed=function(e){X&&X(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==V.push(t)&&H===J.requestAnimationFrame||((H=J.requestAnimationFrame)||ue)(le)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),Z=G=null},J.__c=function(e,t){t.some((function(e){try{e.__h.forEach(de),e.__h=e.__h.filter((function(e){return!e.__||ge(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],J.__e(n,e.__v)}})),$&&$(e,t)},J.unmount=function(e){ee&&ee(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{de(e)}catch(e){t=e}})),n.__H=void 0,t&&J.__e(t,n.__v))};var ce="function"==typeof requestAnimationFrame;function ue(e){var t,n=function(){clearTimeout(r),ce&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ce&&(t=requestAnimationFrame(n))}function de(e){var t=G,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),G=t}function ge(e){var t=G;e.__c=e.__(),G=t}function pe(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function fe(e,t){return"function"==typeof t?t(e):t}var he=n(72),ye=n.n(he),Me=n(825),me=n.n(Me),be=n(659),ve=n.n(be),we=n(56),Ie=n.n(we),Ne=n(540),Ae=n.n(Ne),Te=n(113),ke=n.n(Te),_e=n(902),xe={};xe.styleTagTransform=ke(),xe.setAttributes=Ie(),xe.insert=ve().bind(null,"head"),xe.domAPI=me(),xe.insertStyleElement=Ae();ye()(_e.A,xe);_e.A&&_e.A.locals&&_e.A.locals;var De=function(){return De=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},De.apply(this,arguments)};const ze=function(e){var t=e.position,n=e.size,r=e.styleObject,a=e.events,i=e.filled,o=e.assignHandler,s=e.children,l=e.draggable,c=void 0!==l&&l,u=e.dark,d=void 0!==u&&u,g=oe(null),p=oe(null);return ie((function(){var e=g.current;if(e&&a)return a.forEach((function(t){var n=t.event,r=t.handler;Jo.info({message:"Adding event listener for ".concat(n," on ").concat(e)}),e.addEventListener(n,r),Jo.success({message:"Event listener added for ".concat(n," on ").concat(e)})})),function(){a.forEach((function(t){var n=t.event,r=t.handler;Jo.info({message:"Removing event listener for ".concat(n," on ").concat(e)}),e.removeEventListener(n,r),Jo.success({message:"Event listener removed for ".concat(n," on ").concat(e)})}))}}),[a]),ie((function(){if(c&&p.current){var e=g.current,t=p.current,n=!1,r=0,a=0,i=0,o=0,s=function(t){n=!0,r=t.clientX,a=t.clientY,i=e.offsetLeft,o=e.offsetTop,e.style.transform="none",Jo.info({message:"Dragging started at (".concat(r,", ").concat(a,")")})},l=function(t){if(n){var s=t.clientX-r,l=t.clientY-a,c=i+s,u=o+l,d=e.getBoundingClientRect(),g=window.innerWidth,p=window.innerHeight;c<0&&(c=0),u<0&&(u=0),c+d.width>g&&(c=g-d.width),u+d.height>p&&(u=p-d.height),e.style.left="".concat(c,"px"),e.style.top="".concat(u,"px"),Jo.info({message:"Dragging at (".concat(t.clientX,", ").concat(t.clientY,")")})}},u=function(){n&&(n=!1,Jo.success({message:"Dragging ended."}))};return t.addEventListener("mousedown",s),document.addEventListener("mousemove",l),document.addEventListener("mouseup",u),function(){t.removeEventListener("mousedown",s),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",u)}}}),[c]),v("div",{ref:g,className:"aceSizer ".concat(i?"aceSizerFilled":""," ").concat(d?"aceDark":""),"data-tracker":o,style:De({position:"".concat(t?"absolute":""),top:"".concat(null==t?void 0:t.top,"vh"),right:"".concat(null==t?void 0:t.right,"vw"),bottom:"".concat(null==t?void 0:t.bottom,"vh}"),left:"".concat(null==t?void 0:t.left,"vw"),width:"".concat(null==n?void 0:n.width,"vw"),height:"".concat(null==n?void 0:n.height,"vh")},r)},s,c&&v("div",{ref:p,className:"aceSizerDragHandler"}))};var Ce=n(572),je={};je.styleTagTransform=ke(),je.setAttributes=Ie(),je.insert=ve().bind(null,"head"),je.domAPI=me(),je.insertStyleElement=Ae();ye()(Ce.A,je);Ce.A&&Ce.A.locals&&Ce.A.locals;const Le=function(e){var t=e.label,n=e.onClick,r=e.dark,a=re(!1),i=a[0],o=a[1];return v("button",{className:"aceButton ".concat(i?"hovered":""," ").concat(r?"aceDark":""),onClick:n,onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)}},t)};var Ee=n(776),Oe={};Oe.styleTagTransform=ke(),Oe.setAttributes=Ie(),Oe.insert=ve().bind(null,"head"),Oe.domAPI=me(),Oe.insertStyleElement=Ae();ye()(Ee.A,Oe);Ee.A&&Ee.A.locals&&Ee.A.locals;const Se=function(e){var t=e.title,n=e.children,r=e.dark;return v("div",{className:"aceWindowWrapper ".concat(r?"aceDark":"")},v("div",{className:"aceWindowTitleBar"},v("h1",{className:"aceWindowTitle"},t)),v("div",{className:"aceWindowContent"},n))};var Ue=n(866),Ye={};Ye.styleTagTransform=ke(),Ye.setAttributes=Ie(),Ye.insert=ve().bind(null,"head"),Ye.domAPI=me(),Ye.insertStyleElement=Ae();ye()(Ue.A,Ye);Ue.A&&Ue.A.locals&&Ue.A.locals;const Pe=function(e){var t=e.label,n=e.value,r=e.onChange,a=e.dark;return v("div",{className:"aceInputWrapper ".concat(a?"aceDark":"")},v("label",{className:"aceInputLabel"},t),v("input",{type:"text",className:"aceInput",value:n,onInput:function(e){return r(e.target.value)}}))};var Qe=n(170),Re={};Re.styleTagTransform=ke(),Re.setAttributes=Ie(),Re.insert=ve().bind(null,"head"),Re.domAPI=me(),Re.insertStyleElement=Ae();ye()(Qe.A,Re);Qe.A&&Qe.A.locals&&Qe.A.locals;const We=function(e){var t=e.label,n=e.checked,r=e.onChange,a=e.dark;return v("div",{className:"aceCheckboxWrapper ".concat(a?"aceDark":"")},v("label",{className:"aceCheckboxLabel"},v("input",{type:"checkbox",className:"aceCheckbox",checked:n,onChange:function(e){return r(e.target.checked)}}),t))};var Be=n(159),Ge={};Ge.styleTagTransform=ke(),Ge.setAttributes=Ie(),Ge.insert=ve().bind(null,"head"),Ge.domAPI=me(),Ge.insertStyleElement=Ae();ye()(Be.A,Ge);Be.A&&Be.A.locals&&Be.A.locals;const Ze=function(e){var t=e.label,n=e.options,r=e.value,a=e.onChange,i=e.dark;return v("div",{className:"aceSelectWrapper ".concat(i?"aceDark":"")},v("label",{className:"aceSelectLabel"},t),v("select",{className:"aceSelect",value:r,onChange:function(e){return a(e.target.value)}},n.map((function(e){return v("option",{key:e,value:e},e)}))))};var He=n(78),Fe={};Fe.styleTagTransform=ke(),Fe.setAttributes=Ie(),Fe.insert=ve().bind(null,"head"),Fe.domAPI=me(),Fe.insertStyleElement=Ae();ye()(He.A,Fe);He.A&&He.A.locals&&He.A.locals;const Ve=function(e){var t=e.label,n=e.color,r=e.onChange,a=e.dark;return v("div",{className:"aceColorPickerWrapper ".concat(a?"aceDark":"")},v("label",{className:"aceColorPickerLabel"},t,v("input",{type:"color",className:"aceColorPicker",value:n,onChange:function(e){return r(e.target.value)}})))};var Je=n(286),qe={};qe.styleTagTransform=ke(),qe.setAttributes=Ie(),qe.insert=ve().bind(null,"head"),qe.domAPI=me(),qe.insertStyleElement=Ae();ye()(Je.A,qe);Je.A&&Je.A.locals&&Je.A.locals;const Ke=function(e){var t=e.label,n=e.value,r=e.min,a=e.max,i=e.onChange,o=e.dark;return v("div",{className:"aceRangeWrapper ".concat(o?"aceDark":"")},v("label",{className:"aceRangeLabel"},t),v("input",{type:"range",className:"aceRange",value:n,min:r,max:a,onInput:function(e){return i(parseInt(e.target.value))}}))};var Xe=n(746),$e={};$e.styleTagTransform=ke(),$e.setAttributes=Ie(),$e.insert=ve().bind(null,"head"),$e.domAPI=me(),$e.insertStyleElement=Ae();ye()(Xe.A,$e);Xe.A&&Xe.A.locals&&Xe.A.locals;const et=function(e){var t=e.label,n=e.text,r=e.dark;return v("div",{className:"aceTextWrapper ".concat(r?"aceDark":"")},t&&v("label",{className:"aceTextLabel"},t),n&&v("p",{className:"aceText"},n))};var tt=n(358),nt={};nt.styleTagTransform=ke(),nt.setAttributes=Ie(),nt.insert=ve().bind(null,"head"),nt.domAPI=me(),nt.insertStyleElement=Ae();ye()(tt.A,nt);tt.A&&tt.A.locals&&tt.A.locals;const rt=function(e){var t=e.src,n=e.alt,r=e.asHTML,a=void 0!==r&&r,i=e.dark;return v("div",{className:"aceImageWrapper ".concat(i?"aceDark":"")},a?v("div",{className:"aceSvgIcon",dangerouslySetInnerHTML:{__html:t}}):v("img",{className:"aceImage",src:t,alt:n}))};var at=n(738),it={};it.styleTagTransform=ke(),it.setAttributes=Ie(),it.insert=ve().bind(null,"head"),it.domAPI=me(),it.insertStyleElement=Ae();ye()(at.A,it);at.A&&at.A.locals&&at.A.locals;const ot=function(e){var t=e.src,n=e.dark;return v("div",{className:"aceVideoWrapper ".concat(n?"aceDark":"")},v("video",{className:"aceVideoPlayer",src:t,controls:!0}))};var st=n(654),lt={};lt.styleTagTransform=ke(),lt.setAttributes=Ie(),lt.insert=ve().bind(null,"head"),lt.domAPI=me(),lt.insertStyleElement=Ae();ye()(st.A,lt);st.A&&st.A.locals&&st.A.locals;const ct=function(e){var t=e.src,n=e.dark;return v("div",{className:"aceAudioWrapper ".concat(n?"aceDark":"")},v("audio",{className:"aceAudioPlayer",src:t,controls:!0}))};var ut=n(32),dt={};dt.styleTagTransform=ke(),dt.setAttributes=Ie(),dt.insert=ve().bind(null,"head"),dt.domAPI=me(),dt.insertStyleElement=Ae();ye()(ut.A,dt);ut.A&&ut.A.locals&&ut.A.locals;const gt=function(e){var t=e.label,n=e.href,r=e.dark;return v("div",{className:"aceLinkWrapper ".concat(r?"aceDark":"")},v("a",{className:"aceLink",href:n},t))};var pt=function(){function e(){}return e.prototype.v4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},e}();const ft=new pt;const ht=new(function(){function e(){}return e.prototype.createRoot=function(){var e=document.createElement("div");e.id="ace_v2_wrapper",e.dataset.tracker=ft.v4(),e.dataset.slot="root";var t=document.createElement("div");t.dataset.tracker=ft.v4(),t.dataset.slot="sideMenu",e.appendChild(t);var n=document.createElement("div");return n.dataset.tracker=ft.v4(),n.dataset.slot="plugins",e.appendChild(n),document.body.appendChild(e),{root:e.dataset.tracker,sideMenu:t.dataset.tracker,plugins:n.dataset.tracker}},e.prototype.locateElement=function(e){var t=e.tracker;return document.querySelector('[data-tracker="'.concat(t,'"]'))},e.prototype.injectHTML=function(e){var t=e.HTMLCode,n=document.createElement("div");n.innerHTML=t;var r=ft.v4();return n.dataset.tracker=r,document.body.appendChild(n),r},e.prototype.removeElement=function(e){var t=e.tracker,n=document.querySelector('[data-tracker="'.concat(t,'"]'));n&&n.remove()},e}());var yt=n(192),Mt={};Mt.styleTagTransform=ke(),Mt.setAttributes=Ie(),Mt.insert=ve().bind(null,"head"),Mt.domAPI=me(),Mt.insertStyleElement=Ae();ye()(yt.A,Mt);yt.A&&yt.A.locals&&yt.A.locals;const mt=function(e){var t=e.currentPage,n=e.totalPages,r=e.onPageChange,a=e.dark,i=re(t),o=i[0],s=i[1];ie((function(){s(t)}),[t]);return v("div",{className:"acePaginationContainer ".concat(a?"aceDark":"")},v("button",{className:"acePaginationButton ".concat(1===o?"aceDisabled":""),onClick:function(){if(o>1){var e=o-1;s(e),r(e)}},disabled:1===o},v("i",{className:"aceIconChevronLeft"})),v("span",{className:"acePaginationInfo"},o," / ",n),v("button",{className:"acePaginationButton ".concat(o===n?"aceDisabled":""),onClick:function(){if(o<n){var e=o+1;s(e),r(e)}},disabled:o===n},v("i",{className:"aceIconChevronRight"})))};var bt=function(){return bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},bt.apply(this,arguments)},vt=function(e){var t=e.position,n=e.size,r=e.styleObject,a=e.events,i=e.filled,o=e.assignHandler,s=e.draggable,l=e.children;return v(ze,{dark:Fo.isDarkMode(),position:t,size:n,styleObject:r,events:a,filled:i,assignHandler:o,draggable:s},l)},wt=function(e){var t=e.title,n=e.children;return v(Se,{dark:Fo.isDarkMode(),title:t},n)},It=function(e){var t=e.label,n=e.onClick;return v(Le,{dark:Fo.isDarkMode(),label:t,onClick:n})},Nt=function(e){var t=e.label,n=e.value,r=e.onChange;return v(Pe,{dark:Fo.isDarkMode(),label:t,value:n,onChange:r})},At=function(e){var t=e.label,n=e.checked,r=e.onChange;return v(We,{dark:Fo.isDarkMode(),label:t,checked:n,onChange:r})},Tt=function(e){var t=e.label,n=e.options,r=e.value,a=e.onChange;return v(Ze,{dark:Fo.isDarkMode(),label:t,options:n,value:r,onChange:a})},kt=function(e){var t=e.label,n=e.color,r=e.onChange;return v(Ve,{dark:Fo.isDarkMode(),label:t,color:n,onChange:r})},_t=function(e){var t=e.label,n=e.value,r=e.min,a=e.max,i=e.onChange;return v(Ke,{dark:Fo.isDarkMode(),label:t,value:n,min:r,max:a,onChange:i})},xt=function(e){var t=e.label,n=e.text;return v(et,{dark:Fo.isDarkMode(),label:t,text:n})},Dt=function(e){var t=e.src,n=e.alt,r=e.asHTML;return v(rt,{dark:Fo.isDarkMode(),src:t,alt:n,asHTML:r})},zt=function(e){var t=e.src;return v(ot,{dark:Fo.isDarkMode(),src:t})},Ct=function(e){var t=e.src;return v(ct,{dark:Fo.isDarkMode(),src:t})},jt=function(e){var t=e.label,n=e.href;return v(gt,{dark:Fo.isDarkMode(),label:t,href:n})},Lt=function(e){var t=e.currentPage,n=e.totalPages,r=e.onPageChange;return v(mt,{dark:Fo.isDarkMode(),currentPage:t,totalPages:n,onPageChange:r})},Et=function(e){var t=e.text,n=e.styleObject,r={color:Fo.isDarkMode()?"#fff":"#333"};return v("p",{style:bt(bt({},r),n)},t)},Ot=function(e){var t=e.target,n=e.selector,r=ht.locateElement({tracker:t});requestAnimationFrame((function(){requestAnimationFrame((function(){var e;null===(e=null==r?void 0:r.querySelectorAll(n))||void 0===e||e.forEach((function(e){e.classList.toggle("ani")}))}))}))},St=function(e){var t=e.item;switch(t.type){case"sizer":var n=t.children.map((function(e){return St({item:e})}));return vt({position:t.position,size:t.size,styleObject:t.styleObject,events:t.events,assignHandler:t.assignHandler,filled:t.filled,children:n,draggable:t.draggable});case"button":return It({label:t.text,onClick:t.actions[0]});case"window":var r=t.children.map((function(e){return St({item:e})}));return wt({title:t.title,children:r});case"text":return xt({label:t.label,text:t.text});case"input":return Nt({label:t.label,value:t.value,onChange:t.onChange});case"checkbox":return At({label:t.label,checked:t.checked,onChange:t.onChange});case"select":return Tt({label:t.label,options:t.options,value:t.value,onChange:t.onChange});case"colorPicker":return kt({label:t.label,color:t.color,onChange:t.onChange});case"range":return _t({label:t.label,value:t.value,min:t.min,max:t.max,onChange:t.onChange});case"image":return Dt({src:t.src,alt:t.alt,asHTML:t.asHTML});case"video":return zt({src:t.src});case"audio":return Ct({src:t.src});case"link":return jt({label:t.label,href:t.href});case"pagination":return Lt({currentPage:t.currentPage,totalPages:t.totalPages,onPageChange:t.onPageChange});case"plainText":return Et({text:t.text,styleObject:t.styleObject});default:return Jo.error({message:"Unknown item type: ".concat(t.type)}),Et({text:"Unknown item type"})}},Ut=function(e){var t=e.canvas;return Jo.info({message:"Converting canvas to canvas map..."}),t.map((function(e){return St({item:e})}))},Yt=function(e){var t=e.canvas,n=e.slotElement;Jo.info({message:"Assembling UI..."});var r=Ut({canvas:t}),a=ft.v4(),i=document.createElement("div");return i.dataset.tracker=a,n.appendChild(i),{element:v(I,null,r),tracker:a}};const Pt=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(e){var t=e.text;this.canvas=[{type:"sizer",position:{top:48,left:0},size:{width:100,height:4},styleObject:{zIndex:99},filled:!0,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",justifyContent:"center",alignItems:"center"},children:[{type:"plainText",styleObject:{fontSize:"1vw"},text:t}]}]}]},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){var e=this;this.existed()?(this.destroy(),this.draw(),setTimeout((function(){e.destroy()}),xo.TOAST_DURATION)):(this.tracker=Lo.renderUI({canvas:this.canvas,slot:"plugins"}),setTimeout((function(){e.destroy()}),xo.TOAST_DURATION))},e.prototype.destroy=function(){this.existed()&&(Lo.unmountUI({tracker:this.tracker}),this.tracker="")},e.prototype.showToast=function(e){var t=this,n=e.text;this.existed()?(this.destroy(),this.showToast({text:n}),setTimeout((function(){t.destroy()}),xo.TOAST_DURATION)):(this.updateCanvas({text:n}),this.tracker=Lo.renderUI({canvas:this.canvas,slot:"plugins"}),setTimeout((function(){t.destroy()}),xo.TOAST_DURATION))},e}());var Qt=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Rt=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Wt=function(){function e(){}return e.prototype.psv=function(e){return Qt(this,arguments,void 0,(function(e){var t,n,r,a,i,o,s,l,c,u,d=e.signature,g=e.pluginSelf;return Rt(this,(function(e){switch(e.label){case 0:return t=new TextEncoder,n=t.encode(g),[4,crypto.subtle.digest("SHA-256",n)];case 1:return r=e.sent(),a=Array.from(new Uint8Array(r)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""),i=d.split("|*ACE*|"),o=i[0],s=i[1],l=o.split("|")[4],c=new Uint8Array(Array.from(atob(s),(function(e){return e.charCodeAt(0)}))),[4,this.importPublicKey({pem:xo.PUBLIC_KEY})];case 2:return u=e.sent(),[4,this.verifySignature({publicKey:u,data:n,signature:c})];case 3:return[2,e.sent()&&l===a]}}))}))},e.prototype.importPublicKey=function(e){var t=e.pem,n=this.pemToBinaryDer({pem:t});return unsafeWindow.crypto.subtle.importKey("spki",n,{name:"RSA-PSS",hash:{name:"SHA-256"}},!0,["verify"])},e.prototype.pemToBinaryDer=function(e){var t=e.pem,n=t.substring(26,t.length-24),r=atob(n);return new Uint8Array(Array.from(r,(function(e){return e.charCodeAt(0)})))},e.prototype.verifySignature=function(e){return Qt(this,arguments,void 0,(function(e){var t=e.publicKey,n=e.data,r=e.signature;return Rt(this,(function(e){switch(e.label){case 0:return[4,window.crypto.subtle.verify({name:"RSA-PSS",saltLength:32},t,r,n)];case 1:return[2,e.sent()]}}))}))},e}();const Bt=new Wt;const Gt=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(){this.canvas=[{type:"sizer",position:{top:48,left:0},size:{width:100,height:4},styleObject:{zIndex:99},filled:!0,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",justifyContent:"center",alignItems:"center"},children:[{type:"plainText",styleObject:{fontSize:"1vw"},text:t.t({key:"loading-data"})}]}]}]},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):(this.updateCanvas(),this.tracker=Lo.renderUI({canvas:this.canvas,slot:"plugins"}))},e.prototype.destroy=function(){this.existed()&&(Lo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());var Zt=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Ht=[/^https:\/\/www\.acfun\.cn\/member\/favourite\/folder\/(\d+)/],Ft=[/^https:\/\/www\.acfun\.cn\/v\/(ac\d+)/],Vt=[/^https:\/\/www\.acfun\.cn\/bangumi\/(aa\d+)/],Jt=[/^https:\/\/live\.acfun\.cn\/live\/(\d+)/],qt=[/^https:\/\/live\.acfun\.cn\/?$/],Kt=[/^https:\/\/www\.acfun\.cn\/bangumilist$/],Xt=[/^https:\/\/www\.acfun\.cn\/$/,/^https:\/\/www\.acfun\.cn\/v\/list(?!63$|184$|110$|73$|164$|74$|75$)(\d+)\/index\.htm$/],$t=[/^https:\/\/www\.acfun\.cn\/rank\/list$/],en=[/^https:\/\/www\.acfun\.cn\/face-catcher$/],tn=[/^https:\/\/www\.acfun\.cn\/app\/?$/],nn=[/^https:\/\/www\.acfun\.cn\/member\/?$/],rn=[/^https:\/\/member\.acfun\.cn\/?$/],an=[/^https:\/\/message\.acfun\.cn\/?$/],on=[/^https:\/\/www\.acfun\.cn\/member\/feeds\/?$/],sn=[/^https:\/\/www\.acfun\.cn\/u\/(\d+)/],ln={"*":Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt(Zt([],Ht,!0),Ft,!0),Vt,!0),Jt,!0),qt,!0),Kt,!0),Xt,!0),$t,!0),en,!0),tn,!0),nn,!0),rn,!0),an,!0),on,!0),sn,!0),favorite:Ht,videoPlayer:Ft,bangumiPlayer:Vt,livePlayer:Jt,player:Zt(Zt(Zt([],Ft,!0),Vt,!0),Jt,!0),livePage:qt,bangumiList:Kt,main:Xt,ranking:$t,faceCatcher:en,downloadApp:tn,member:nn,uploadCenter:rn,message:an,feeds:on,channel:sn},cn=function(){function e(){this.everyNodesObserver={observer:null,config:null,callbacks:[]}}return e.prototype.resolveTargets=function(e){var t=[];return e.forEach((function(e){if(e instanceof HTMLElement)t.push(e);else{var n=ht.locateElement({tracker:e});n?t.push(n):document.querySelectorAll(e).forEach((function(e){return t.push(e)}))}})),t},e.prototype.mutationObserve=function(e){var t=e.targets,n=e.config,r=e.callback,a=new MutationObserver(r);return this.resolveTargets(t).forEach((function(e){return a.observe(e,n)})),r([],a),[a,n]},e.prototype.childList=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!0,subtree:!1,attributes:!1},callback:n})},e.prototype.childListSubtree=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!0,subtree:!0,attributes:!1},callback:n})},e.prototype.attributes=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!1,subtree:!1,attributes:!0},callback:n})},e.prototype.attributesSubtree=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!1,subtree:!0,attributes:!0},callback:n})},e.prototype.characterData=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!1,subtree:!1,attributes:!1,characterData:!0},callback:n})},e.prototype.characterDataSubtree=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!1,subtree:!0,attributes:!1,characterData:!0},callback:n})},e.prototype.allMutationsOn=function(e){var t=e.target,n=e.callback;return this.mutationObserve({targets:[t],config:{childList:!0,subtree:!0,attributes:!0,characterData:!0},callback:n})},e.prototype.intersectionObserve=function(e){var t=e.targets,n=e.config,r=e.callback,a=new IntersectionObserver(r,n);return this.resolveTargets(t).forEach((function(e){return a.observe(e)})),[a,n]},e.prototype.visible=function(e){var t=e.target,n=e.callback;return this.intersectionObserve({targets:[t],config:{},callback:n})},e.prototype.visibleInside=function(e){var t=e.target,n=e.container,r=e.margin,a=e.callback;return this.intersectionObserve({targets:[t],config:{root:n,rootMargin:r},callback:a})},e.prototype.resizeObserve=function(e){var t=e.targets,n=e.config,r=e.callback,a=new ResizeObserver(r);return this.resolveTargets(t).forEach((function(e){return a.observe(e,n)})),[a,n]},e.prototype.sizeChange=function(e){var t=e.target,n=e.callback;return this.resizeObserve({targets:[t],config:{box:"border-box"},callback:n})},e.prototype.setupUrlChangeListener=function(){var e=window.location.href;this.allMutations((function(){return function(){var t=window.location.href;if(e!==t){var n=new CustomEvent("urlChange",{detail:t});window.dispatchEvent(n),e=t}}()}))},e.prototype.urlChange=function(e,t){this.setupUrlChangeListener(),e(document.URL),window.addEventListener("urlChange",(function(){return e(document.URL)}),t)},e.prototype.allMutations=function(e){var t=this;if(this.everyNodesObserver.observer)this.everyNodesObserver.callbacks.push(e);else{this.everyNodesObserver.callbacks.push(e);var n=this.mutationObserve({targets:[document.body],config:{childList:!0,subtree:!0,attributes:!0,characterData:!0},callback:function(e){return t.everyNodesObserver.callbacks.forEach((function(n){return n(e,t.everyNodesObserver.observer)}))}}),r=n[0],a=n[1];this.everyNodesObserver.observer=r,this.everyNodesObserver.config=a}return this.everyNodesObserver},e}();const un=new cn;var dn=function(){function e(){this.channels=new Map,this.debounceMap=new Map}return e.prototype.start=function(){Jo.info({message:"IPCService is starting..."})},e.prototype.stop=function(){Jo.info({message:"IPCService is stopping..."}),this.channels.clear(),this.debounceMap.clear()},e.prototype.registerChannel=function(e){var t=e.channel;this.channels.has(t)?Jo.warn({message:"Channel ".concat(t," is already registered.")}):(this.channels.set(t,[]),Jo.info({message:"Channel ".concat(t," registered.")}))},e.prototype.unregisterChannel=function(e){var t=e.channel;this.channels.has(t)?(this.channels.delete(t),this.debounceMap.delete(t),Jo.info({message:"Channel ".concat(t," completely unregistered.")})):Jo.warn({message:"Channel ".concat(t," is not registered.")})},e.prototype.listen=function(e){var t=e.channel,n=e.handler,r=e.manifest;if(this.channels.has(t)){var a=this.channels.get(t),i=a.find((function(e){return e.handler===n&&e.pluginId===r.id}));i?Jo.warn({message:"Handler from ".concat(r.id," is already registered for channel ").concat(t,".")}):(a.push({handler:n,pluginId:r.id}),Jo.info({message:"Handler from ".concat(r.id," added to channel ").concat(t,".")}))}else Jo.error({message:"Channel ".concat(t," is not registered.")})},e.prototype.removeListener=function(e){var t=e.channel,n=e.handler,r=e.manifest;if(this.channels.has(t)){var a=this.channels.get(t).filter((function(e){return e.handler!==n||e.pluginId!==r.id}));a.length>0?(this.channels.set(t,a),Jo.info({message:"Handler from ".concat(r.id," removed from channel ").concat(t,".")})):(this.channels.delete(t),Jo.info({message:"Channel ".concat(t," completely unregistered (last handler was from ").concat(r.id,").")}))}else Jo.error({message:"Channel ".concat(t," is not registered.")})},e.prototype.sendMessage=function(e){var t=this,n=e.channel,r=e.data;if(this.channels.has(n)){this.debounceMap.has(n)&&clearTimeout(this.debounceMap.get(n));var a=setTimeout((function(){t.channels.get(n).forEach((function(e){var t=e.handler,a=e.pluginId;t(r),Jo.info({message:"Message sent to handler in channel ".concat(n," registered by ").concat(a,".")})}))}),xo.DEBOUNCE_DURATION);this.debounceMap.set(n,a)}else Jo.error({message:"Channel ".concat(n," is not registered.")})},e}();const gn=new dn;function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function fn(e,t){for(var n in t)e[n]=t[n];return e}function hn(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function yn(e,t){this.props=e,this.context=t}(yn.prototype=new N).isPureReactComponent=!0,yn.prototype.shouldComponentUpdate=function(e,t){return hn(this.props,e)||hn(this.state,t)};var Mn=i.__b;i.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Mn&&Mn(e)};"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var mn=i.__e;i.__e=function(e,t,n,r){if(e.then)for(var a,i=t;i=i.__;)if((a=i.__c)&&a.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t);mn(e,t,n,r)};var bn=i.unmount;function vn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=fn({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return vn(e,t,n)}))),e}function wn(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return wn(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function In(){this.__u=0,this.t=null,this.__b=null}function Nn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function An(){this.u=null,this.o=null}i.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),bn&&bn(e)},(In.prototype=new N).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var a=Nn(r.__v),i=!1,o=function(){i||(i=!0,n.__R=null,a?a(s):s())};n.__R=o;var s=function(){if(! --r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=wn(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(o,o)},In.prototype.componentWillUnmount=function(){this.t=[]},In.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=vn(this.__b,n,r.__O=r.__P)}this.__b=null}var a=t.__a&&v(I,null,e.fallback);return a&&(a.__u&=-33),[v(I,null,t.__a?null:e.children),a]};var Tn=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(An.prototype=new N).__a=function(e){var t=this,n=Nn(t.__v),r=t.o.get(e);return r[0]++,function(a){var i=function(){t.props.revealOrder?(r.push(a),Tn(t,e,r)):a()};n?n(i):i()}},An.prototype.render=function(e){this.u=null,this.o=new Map;var t=C(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},An.prototype.componentDidUpdate=An.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Tn(e,n,t)}))};var kn="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,_n=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,xn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Dn=/[A-Z0-9]/g,zn="undefined"!=typeof document,Cn=function(e){return("undefined"!=typeof Symbol&&"symbol"==pn(Symbol())?/fil|che|rad/:/fil|che|ra/).test(e)};N.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(N.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var jn=i.event;function Ln(){}function En(){return this.cancelBubble}function On(){return this.defaultPrevented}i.event=function(e){return jn&&(e=jn(e)),e.persist=Ln,e.isPropagationStopped=En,e.isDefaultPrevented=On,e.nativeEvent=e};var Sn={enumerable:!1,configurable:!0,get:function(){return this.class}},Un=i.vnode;i.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,r={};for(var a in t){var i=t[a];if(!("value"===a&&"defaultValue"in t&&null==i||zn&&"children"===a&&"noscript"===n||"class"===a||"className"===a)){var o=a.toLowerCase();"defaultValue"===a&&"value"in t&&null==t.value?a="value":"download"===a&&!0===i?i="":"translate"===o&&"no"===i?i=!1:"ondoubleclick"===o?a="ondblclick":"onchange"!==o||"input"!==n&&"textarea"!==n||Cn(t.type)?"onfocus"===o?a="onfocusin":"onblur"===o?a="onfocusout":xn.test(a)?a=o:-1===n.indexOf("-")&&_n.test(a)?a=a.replace(Dn,"-$&").toLowerCase():null===i&&(i=void 0):o=a="oninput","oninput"===o&&r[a=o]&&(a="oninputCapture"),r[a]=i}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=C(t.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=C(t.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",Sn)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(e),e.$$typeof=kn,Un&&Un(e)};var Yn=i.__r;i.__r=function(e){Yn&&Yn(e),e.__c};var Pn=i.diffed;i.diffed=function(e){Pn&&Pn(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value),null};const Qn="data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA0OTc3OTg1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTM1NzciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNNDE5LjYwOTAyMyAwLjQ5OTk1MWM0NC45OTU2MDYgMC4wOTk5OSA4Ny4xOTE0ODUgMjIuMTk3ODMyIDExMi44ODg5NzUgNTkuMDk0MjI5IDI1Ljg5NzQ3MSAzNy4wOTYzNzcgMzIuMzk2ODM2IDg0LjM5MTc1OSAxNy40OTgyOTEgMTI3LjA4NzU4OWgxOTIuMzgxMjEzYzI0LjQ5NzYwOCAwIDQ3Ljg5NTMyMyA5Ljc5OTA0MyA2NS4xOTM2MzQgMjcuMTk3MzQ0IDE3LjI5ODMxMSAxNy40OTgyOTEgMjYuOTk3MzY0IDQxLjA5NTk4NyAyNi45OTczNjMgNjUuNjkzNTg1djE5NC4wODEwNDdjNTcuNDk0Mzg1LTIwLjU5Nzk4OCAxMjEuNzg4MTA3LTAuODk5OTEyIDE1Ny43ODQ1OTIgNDguMzk1Mjc0IDM2LjI5NjQ1NSA0OS40OTUxNjYgMzYuMjk2NDU1IDExNi43ODg1OTUgMCAxNjYuMjgzNzYxLTM2LjA5NjQ3NSA0OS4yOTUxODYtMTAwLjI5MDIwNiA2OC45OTMyNjItMTU3Ljc4NDU5MiA0OC4zOTUyNzR2MTk0LjA4MTA0N2MwLjA5OTk5IDI0LjU5NzU5OC05LjU5OTA2MyA0OC4yOTUyODQtMjYuODk3MzczIDY1Ljg5MzU2NS0xNy4xOTgzMiAxNy40OTgyOTEtNDAuNjk2MDI2IDI3LjI5NzMzNC02NS4yOTM2MjQgMjcuMjk3MzM0aC0xOTEuOTgxMjUyYzIwLjM5ODAwOC01Ny43OTQzNTYgMC44OTk5MTItMTIyLjE4ODA2OC00OC4wOTUzMDMtMTU4Ljk4NDQ3NC00OC44OTUyMjUtMzYuNDk2NDM2LTExNS44ODg2ODMtMzYuNDk2NDM2LTE2NC43ODM5MDggMC00OC45OTUyMTUgMzYuNzk2NDA3LTY4LjQ5MzMxMSAxMDEuMTkwMTE4LTQ4LjA5NTMwMyAxNTguOTg0NDc0SDk2Ljc0MDU1M2MtMjQuNDk3NjA4IDAtNDcuOTk1MzEzLTkuODk5MDMzLTY1LjI5MzYyNC0yNy4yOTczMzQtMTcuMjk4MzExLTE3LjQ5ODI5MS0yNi45OTczNjQtNDEuMTk1OTc3LTI2Ljg5NzM3My02NS44OTM1NjVWNzM3LjUyNzk3NmM1Ny4zOTQzOTUgMjAuMjk4MDE4IDEyMS4yODgxNTUgMC40OTk5NTEgMTU3LjA4NDY1OS00OC43OTUyMzUgMzUuOTk2NDg1LTQ5LjI5NTE4NiAzNS45OTY0ODUtMTE2LjE4ODY1MyAwLTE2NS41ODM4My0zNS43OTY1MDQtNDkuMTk1MTk2LTk5LjY5MDI2NS02OS4wOTMyNTMtMTU3LjA4NDY1OS00OC43OTUyMzVWMjgwLjQ3MjYxYy0wLjI5OTk3MS01MS4wOTUwMSA0MC44OTYwMDYtOTIuNzkwOTM4IDkxLjk5MTAxNi05My4wOTA5MDloMTkyLjY4MTE4NGMtMTQuOTk4NTM1LTQyLjY5NTgzLTguNDk5MTctODkuOTkxMjEyIDE3LjQ5ODI5MS0xMjcuMDg3NTg5IDI1Ljc5NzQ4MS0zNi44OTYzOTcgNjcuOTkzMzYtNTguODk0MjQ5IDExMi45ODg5NjYtNTguODk0MjQ5VjAuMjk5OTcxbC0wLjA5OTk5IDAuMTk5OTh6IgogICAgICAgICAgcC1pZD0iOTM1NzgiPjwvcGF0aD4KPC9zdmc+";var Rn=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Wn=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const Bn=new(function(){function e(){this.manifest={icon:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA0OTI3NzM3IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTMzNzUiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNNjQzLjQxMzMzMyAxODMuMjUzMzMzYzAuMDQyNjY3IDAtMC4xNzA2NjcgMC40MjY2NjctMC44MTA2NjYgMS4xNTIgMC40MjY2NjctMC44MTA2NjcgMC43NjgtMS4xNTIgMC44MTA2NjYtMS4xNTJ6IG0tMjAuNTY1MzMzIDE0LjM3ODY2N2MtMjQuNTc2LTEyLjQ1ODY2Ny02My41MzA2NjctMjIuNDg1MzMzLTExMC44NDgtMjIuNDg1MzMzLTQ3LjM2IDAtODYuMzE0NjY3IDEwLjAyNjY2Ny0xMTAuODQ4IDIyLjQ4NTMzMyAyNC41MzMzMzMgMTIuMzczMzMzIDYzLjUzMDY2NyAyMi40NDI2NjcgMTEwLjg0OCAyMi40NDI2NjcgNDcuMzYgMCA4Ni4yNzItMTAuMDI2NjY3IDExMC44NDgtMjIuNDQyNjY3ek0zODAuNTg2NjY3IDE4My4yNTMzMzNjMC4wNDI2NjcgMCAwLjM4NCAwLjM0MTMzMyAwLjgxMDY2NiAxLjE1Mi0wLjY0LTAuNzI1MzMzLTAuODUzMzMzLTEuMTA5MzMzLTAuODUzMzMzLTEuMTUyek02NDAgMzA4LjkwNjY2N3YtMjEuNDYxMzM0Yy0zNS42NjkzMzMgMTQuMDgtNzkuOTU3MzMzIDIyLjQ0MjY2Ny0xMjggMjIuNDQyNjY3cy05Mi4zMzA2NjctOC4zNjI2NjctMTI4LTIyLjQ0MjY2N3Y0NS4zOTczMzRhMzcuNDYxMzMzIDM3LjQ2MTMzMyAwIDAgMCAxLjE5NDY2NyAwLjgxMDY2NmMxMS4zNDkzMzMgNy40MjQgNDQuNTAxMzMzIDIxLjE2MjY2NyAxMjYuODA1MzMzIDIxLjE2MjY2N3MxMTUuNDU2LTEzLjczODY2NyAxMjYuODA1MzMzLTIxLjE2MjY2N0EzNC40MzIgMzQuNDMyIDAgMCAwIDY0MCAzMzIuOHYtMjEuODQ1MzMzLTIuMDQ4eiBtODAuMTI4IDU5LjM5MmE3Ny40ODI2NjcgNzcuNDgyNjY3IDAgMCAxLTIuNTYgNS40NjEzMzNjLTYuNTI4IDEyLjkyOC0xNy40MDggMjUuNDcyLTMzLjcwNjY2NyAzNi4xMzg2NjctMzEuMzE3MzMzIDIwLjUyMjY2Ny04My40OTg2NjcgMzQuNzMwNjY3LTE3MS44NjEzMzMgMzQuNzMwNjY2LTg4LjM2MjY2NyAwLTE0MC41NDQtMTQuMjA4LTE3MS44NjEzMzMtMzQuNzMwNjY2LTE2LjI5ODY2Ny0xMC42NjY2NjctMjcuMTc4NjY3LTIzLjIxMDY2Ny0zMy43NDkzMzQtMzYuMTM4NjY3YTcyLjgzMiA3Mi44MzIgMCAwIDEtNi45MTItMjAuNjkzMzMzTDE3MC42NjY2NjcgNDA2LjUyOHY1LjcxNzMzM2wzNDEuMzMzMzMzIDExOS43NjUzMzQgMzQxLjMzMzMzMy0xMTkuNzY1MzM0VjQwOS42bC0xMzMuMjA1MzMzLTQxLjI1ODY2N3pNMzIxLjcwNjY2NyAzNDMuODkzMzMzSDM0MS4zMzMzMzNoLTE5LjU0MTMzM3pNMjk5Ljg2MTMzMyAyMDkuNDkzMzMzQzI5OS4wOTMzMzMgMjEyLjkwNjY2NyAyOTguNjY2NjY3IDIxNi40NDggMjk4LjY2NjY2NyAyMjAuMDc0NjY3djM2Ljc3ODY2NkwxMTIuMzQxMzMzIDMzNC4xNjUzMzNhNDQuOTI4IDQ0LjkyOCAwIDAgMC0yNy4wMDggNDEuODEzMzM0djM2OS44MzQ2NjZjMCAxOC44NTg2NjcgMTEuMTc4NjY3IDM1LjcxMiAyNy45ODkzMzQgNDIuMTU0NjY3bDM4NCAxNDcuOTY4YTQwLjY2MTMzMyA0MC42NjEzMzMgMCAwIDAgMjkuMzU0NjY2IDBsMzg0LTE0Ny45NjhjMTYuODEwNjY3LTYuNDQyNjY3IDI3Ljk4OTMzMy0yMy4yOTYgMjcuOTg5MzM0LTQyLjE1NDY2N3YtMzAwLjU4NjY2Ni02OS4yOTA2NjdjMC0xOS45MjUzMzMtMTIuNDU4NjY3LTM3LjQ2MTMzMy0zMC42MzQ2NjctNDMuMDkzMzMzTDcyNS4zMzMzMzMgMjc2LjMwOTMzM1YyMjAuMDc0NjY3YzAtMy42MjY2NjctMC40MjY2NjctNy4xNjgtMS4xOTQ2NjYtMTAuNTM4NjY3IDAuNzY4LTMuOTI1MzMzIDEuMTk0NjY3LTcuODkzMzMzIDEuMTk0NjY2LTExLjk0NjY2N0M3MjUuMzMzMzMzIDEzNS42MzczMzMgNjI5Ljc2IDg1LjMzMzMzMyA1MTIgODUuMzMzMzMzUzI5OC42NjY2NjcgMTM1LjU5NDY2NyAyOTguNjY2NjY3IDE5Ny42MzJjMCA0LjAxMDY2NyAwLjQyNjY2NyA3Ljk3ODY2NyAxLjE5NDY2NiAxMS45MDR6TTE3MC42NjY2NjcgNzE0LjQxMDY2N3YtMjA3LjQ0NTMzNGwyOTguNjY2NjY2IDEwNC43ODkzMzR2MjE3LjcyOGwtMjk4LjY2NjY2Ni0xMTUuMDcyeiBtMzg0IDExNS4wNzJsMjk4LjY2NjY2Ni0xMTUuMDcydi0yMDcuNDg4bC0yOTguNjY2NjY2IDEwNC44MzJ2MjE3LjcyOHoiCiAgICAgICAgICBmaWxsPSIjMmMyYzJjIiBwLWlkPSI5MzM3NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMjMuYTk0YzNhODFObzRmeFIiCiAgICAgICAgICBjbGFzcz0ic2VsZWN0ZWQiPjwvcGF0aD4KPC9zdmc+",name:"Plugin Store",id:"@wenzi7777/acev2_plugin_store",versions:["0.0.1"],description:"AcFun Evolved V2 插件商店。",createdAt:new Date("2024-08-09").getTime()+"",updatedAt:(new Date).getTime()+"",author:"wenzi7777",copyright:"(c)2024 wenzi7777, licensed under the MIT License.",requestedAPIs:[],website:"https://acev2.1205.moe/",trigger:{receiveHandler:!0,matches:["*"]}},this.handler="",this.tracker="",this.canvas=[],this.currentPage=1,this.totalPages=10,this.bigManifest=null}return e.prototype.wakeUp=function(){var e=this;gn.listen({channel:"runtime:launchpad",handler:function(t){return e.render(t)},manifest:this.manifest})},e.prototype.getBigManifest=function(){return Rn(this,void 0,void 0,(function(){var e,t,n;return Wn(this,(function(r){switch(r.label){case 0:return e=this,[4,Ro.getJson({url:xo.bigManifestURL()})];case 1:return e.bigManifest=r.sent(),t=null===(n=this.bigManifest)||void 0===n?void 0:n.length,this.totalPages=Math.ceil(t||1/xo.PAGE_SIZE),this.currentPage=1,[2]}}))}))},e.prototype.updateCanvas=function(e){return Rn(this,arguments,void 0,(function(e){var t,n,r,a,i=this,o=e.currentPage,s=e.totalPages;return Wn(this,(function(e){switch(e.label){case 0:return[4,this.getBigManifest()];case 1:return e.sent(),(null===(n=this.bigManifest)||void 0===n?void 0:n.length)>xo.PAGE_SIZE&&(this.bigManifest=null===(r=this.bigManifest)||void 0===r?void 0:r.slice((this.currentPage-1)*xo.PAGE_SIZE,this.currentPage*xo.PAGE_SIZE)),t=[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"100%",height:"100%"},children:null===(a=this.bigManifest)||void 0===a?void 0:a.map((function(e){var t=e.icon,n=t.startsWith("<svg");return{type:"sizer",styleObject:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"10px",cursor:"pointer"},events:[{event:"click",handler:function(){return i.openDetailsPanel({manifest:e})}}],children:[{type:"image",src:n?t:"defaultIcon"===t?Qn:t,asHTML:n},{type:"text",label:e.name+" "+e.id,text:e.description}]}}))}],this.canvas=[{type:"sizer",styleObject:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"80%",flexGrow:1},children:t},{type:"sizer",styleObject:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"20%",flexGrow:1},children:[{type:"pagination",currentPage:o||this.currentPage,totalPages:s||this.totalPages,onPageChange:function(e){return i.currentPage+=1}}]}],[2]}}))}))},e.prototype.openDetailsPanel=function(e){var n=this,a=e.manifest,i=a.icon,o=i.startsWith("<svg"),s=o?i:"defaultIcon"===i?Qn:i,l=Lo.renderUI({canvas:[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},filled:!0,draggable:!0,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",alignItems:"center",justifyContent:"space-around",padding:"1vw"},children:[{type:"sizer",styleObject:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[{type:"sizer",styleObject:{width:"32px",height:"32px"},children:[{type:"image",asHTML:o,src:s}]},{type:"text",label:t.t({key:"developer"})+" "+a.author,text:a.name+" | "+a.id}]},{type:"sizer",styleObject:{display:"flex",justifyContent:"center",alignItems:"center",gap:"1vw"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:[{type:"text",label:t.t({key:"description"}),text:a.description},{type:"text",label:t.t({key:"latest-version"}),text:a.versions[a.versions.length-1]},{type:"text",label:t.t({key:"requested-apis"}),text:a.requestedAPIs.join(", ")}]},{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"},children:[{type:"text",label:t.t({key:"matches"}),text:a.trigger.matches.join(", ")},{type:"text",label:t.t({key:"created-at"})+" "+r.toReadableTime({timestamp:parseInt(a.createdAt)}),text:t.t({key:"updated-at"})+" "+r.toReadableTime({timestamp:parseInt(a.updatedAt)})},{type:"text",label:t.t({key:"reactive-ui"}),text:a.trigger.receiveHandler?t.t({key:"enabled"}):t.t({key:"disabled"})}]}]},{type:"sizer",size:{width:23,height:3},styleObject:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:t.t({key:"install"}),actions:[function(){return Ao.downloadAndInstallPluginPack({manifest:a})}]}]},{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:t.t({key:"website"}),actions:[function(){return Ro.openPageInNewTab({url:a.website,manifest:n.manifest})}]}]},{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:t.t({key:"cancel"}),actions:[function(){return Lo.unmountUI({tracker:l})}]}]}]}]}]}],slot:"plugins"})},e.prototype.render=function(e){return Rn(this,void 0,void 0,(function(){return Wn(this,(function(t){switch(t.label){case 0:return"pluginStarted"!==e.type||e.manifest.id!==this.manifest.id?[3,2]:(Gt.draw(),[4,this.updateCanvas({})]);case 1:t.sent(),this.handler=e.handler,this.tracker=Lo.renderUI({canvas:this.canvas,slot:this.handler}),Gt.destroy(),t.label=2;case 2:return[2]}}))}))},e}());const Gn="data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA1MTEyMjgzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTQ4MjciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNOTU4LjM1ODQ4OSAxNTIuMTk5NDAxbC04OS4zOTkwOTktODkuNDMwODIyTDUxMS4xNzM2OCA0MjAuNTIyNTY2IDE1My4zODg5OTQgNjIuNzY4NTc5IDYzLjk4ODg3MiAxNTIuMTk5NDAxbDM1Ny43ODU3MDkgMzU3Ljc1Mzk4N0w2My45ODg4NzIgODY3LjcwODM5OGw4OS40MDAxMjMgODkuNDMwODIyTDUxMS4xNzM2OCA1OTkuMzg0MjFsMzU3Ljc4NTcwOSAzNTcuNzUzOTg3IDg5LjM5OTA5OS04OS40MzA4MjJMNjAwLjU3MzgwMyA1MDkuOTUzMzg4IDk1OC4zNTg0ODkgMTUyLjE5OTQwMXoiCiAgICAgICAgICBwLWlkPSI5NDgyOCIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMzEuYTk0YzNhODFObzRmeFIiIGNsYXNzPSJzZWxlY3RlZCIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiPjwvcGF0aD4KPC9zdmc+";const Zn="data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA1ODMwNjgyIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTU4NjMiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNOTA1LjMwOTA5MSA2MjguMzYzNjM2Yy0yNy45MjcyNzMgMC00Ni41NDU0NTUgMTguNjE4MTgyLTQ2LjU0NTQ1NSA0Ni41NDU0NTV2MjIzLjQxODE4MkgxNjUuMjM2MzY0VjEyNS42NzI3MjdoMjAwLjE0NTQ1NGMyNy45MjcyNzMgMCA0Ni41NDU0NTUtMTguNjE4MTgyIDQ2LjU0NTQ1NS00Ni41NDU0NTRzLTE4LjYxODE4Mi00Ni41NDU0NTUtNDYuNTQ1NDU1LTQ2LjU0NTQ1NUgxMTguNjkwOTA5Yy0yNy45MjcyNzMgMC00Ni41NDU0NTUgMTguNjE4MTgyLTQ2LjU0NTQ1NCA0Ni41NDU0NTV2ODY1Ljc0NTQ1NGMwIDI3LjkyNzI3MyAxOC42MTgxODIgNDYuNTQ1NDU1IDQ2LjU0NTQ1NCA0Ni41NDU0NTVoNzg2LjYxODE4MmMyNy45MjcyNzMgMCA0Ni41NDU0NTUtMTguNjE4MTgyIDQ2LjU0NTQ1NC00Ni41NDU0NTV2LTI2OS45NjM2MzZjMC0yNy45MjcyNzMtMTguNjE4MTgyLTQ2LjU0NTQ1NS00Ni41NDU0NTQtNDYuNTQ1NDU1eiIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiIHAtaWQ9Ijk1ODY0IiBkYXRhLXNwbS1hbmNob3ItaWQ9ImEzMTN4LnNlYXJjaF9pbmRleC4wLmkzNS5hOTRjM2E4MU5vNGZ4UiIKICAgICAgICAgIGNsYXNzPSJzZWxlY3RlZCI+PC9wYXRoPgogICAgPHBhdGggZD0iTTU1Ni4yMTgxODIgNTU4LjU0NTQ1NWgzNDkuMDkwOTA5di05My4wOTA5MWgtMjY5Ljk2MzYzNmwyOTMuMjM2MzYzLTI2OS45NjM2MzYtNjUuMTYzNjM2LTY1LjE2MzYzNi0zMDcuMiAyODMuOTI3MjcyVjExNi4zNjM2MzZoLTkzLjA5MDkwOVY1NTguNTQ1NDU1aDQuNjU0NTQ1eiIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiIHAtaWQ9Ijk1ODY1IiBkYXRhLXNwbS1hbmNob3ItaWQ9ImEzMTN4LnNlYXJjaF9pbmRleC4wLmkzNC5hOTRjM2E4MU5vNGZ4UiIKICAgICAgICAgIGNsYXNzPSJzZWxlY3RlZCI+PC9wYXRoPgo8L3N2Zz4=";var Hn=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Fn=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const Vn=new(function(){function e(){this.manifest={icon:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzNDY2NTY2NzA0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iODA5ODAiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNMTAyMi4wNjU0NCA1ODMuNDAxMTljMCAxMS4wNTU4LTQuMDM0ODk2IDIwLjYxOTYyLTEyLjExMTg1MiAyOC42OTY1NzYtOC4wNzc5NzkgOC4wNzc5NzktMTcuNjM5NzUyIDEyLjExNzk5Mi0yOC42OTA0MzYgMTIuMTE3OTkyTDgzOC40NDY0NDUgNjI0LjIxNTc1OGMwIDcyLjY5MDU1Ni0xNC4yMzUyMTMgMTM0LjMyMDE5NS00Mi43MTg5NDEgMTg0Ljg5OTE1bDEzMi42MTUzNjcgMTMzLjI2MzEyYzguMDc2OTU2IDguMDY1Njk5IDEyLjExNzk5MiAxNy42MzQ2MzYgMTIuMTE3OTkyIDI4LjY5MDQzNiAwIDExLjA1MDY4NC00LjAzNDg5NiAyMC42MTQ1MDMtMTIuMTE3OTkyIDI4LjY5MTQ1OS03LjY1MzMwNyA4LjA2NTY5OS0xNy4yMDk5NjQgMTIuMTA2NzM2LTI4LjY5MDQzNiAxMi4xMDY3MzYtMTEuNDc1MzU2IDAtMjEuMDQwMTk5LTQuMDQxMDM2LTI4LjY5MDQzNi0xMi4xMDY3MzZMNzQ0LjcxNzczNyA4NzQuMTUzMThjLTIuMTI0Mzg0IDIuMTE4MjQ0LTUuMzA4OTEzIDQuODg0MjQtOS41NTg3MDMgOC4yODM2NjQtNC4yNTkgMy4zOTg0LTEzLjE4MDE4NCA5LjQ2MzUzNi0yNi43ODUwNCAxOC4xNzE4NzEtMTMuNTk4NzE2IDguNzE1NDk5LTI3LjQxNTM5NiAxNi40NzMxODMtNDEuNDM5ODA4IDIzLjI3NjEyMy0xNC4wMjk1MjggNi43OTc4MjMtMzEuNDYyNTcyIDEyLjk2NjMxMy01Mi4yODk5MjMgMTguNDkzMTktMjAuODI3MzUxIDUuNTE3NjY3LTQxLjQ0Njk3MSA4LjI4NTcxLTYxLjg0MjQ4NyA4LjI4NTcxTDU1Mi44MDE3NzYgMzc5LjM4NjY4bC04MS42MTE3MzkgMCAwIDU3MS4yNzcwNThjLTIxLjY2ODUwOSAwLTQzLjI1MDAzNi0yLjg3NDQ2Ny02NC43MDc3NDQtOC42MTUyMTUtMjEuNDczMDU3LTUuNzM0NjA4LTM5Ljk2MDEwNy0xMi43NDkzNzItNTUuNDc2NDk5LTIxLjAzOTE3NS0xNS41MTg0MzgtOC4yODk4MDQtMjkuNTQxODI3LTE2LjU3MjQ0NC00Mi4wNzczMjgtMjQuODY3MzY0LTEyLjU0MTY0MS04LjI5MDgyNy0yMS43ODEwNzItMTUuMTkzMDI3LTI3LjczOTc4NC0yMC43MTQ3ODdsLTkuNTU4NzAzLTguOTMyNDRMMTU0Ljk1MDU2IDk5OC40Nzk3NjdjLTguNTAwNjA1IDguOTIxMTgzLTE4LjY5OTg5NyAxMy4zODY4OTItMzAuNjA2MDY1IDEzLjM4Njg5Mi0xMC4yMDEzMzkgMC0xOS4zMzUzNzEtMy40MDQ1NC0yNy40MDkyNTctMTAuMjAyMzYzLTguMDc5MDAyLTcuNjUyMjg0LTEyLjQzNzI2NC0xNy4xMDk2OC0xMy4wODA5MjMtMjguMzcyMTg4LTAuNjMzNDI3LTExLjI2MzUzMSAyLjY1OTU3My0yMS4xNDM1NTMgOS44OTMzMjQtMjkuNjQ3MjI3bDEyOC43ODcxNzgtMTQ0LjcyNzIxOWMtMjQuNjUwNDIzLTQ4LjQ2NDgwNS0zNi45ODAyMzktMTA2LjY5OTExNC0zNi45ODAyMzktMTc0LjcxMDA5MUw0Mi43Mzg4OTUgNjI0LjIwNzU3MWMtMTEuMDU3ODQ3IDAtMjAuNjE2NTUtNC4wNDEwMzYtMjguNjkwNDM2LTEyLjExMTg1Mi04LjA3OTAwMi04LjA4MjA3Mi0xMi4xMjAwMzktMTcuNjQwNzc2LTEyLjEyMDAzOS0yOC42OTY1NzYgMC0xMS4wNTA2ODQgNC4wNDEwMzYtMjAuNjE5NjIgMTIuMTIwMDM5LTI4LjY4OTQxMyA4LjA3Mzg4Ni04LjA3Mjg2MyAxNy42MzI1ODktMTIuMTA3NzU5IDI4LjY5MDQzNi0xMi4xMDc3NTlsMTQyLjgxNDY2IDBMMTg1LjU1MzU1NSAzNTUuMTU2ODM2bC0xMTAuMzAyMTc1LTExMC4zMDIxNzVjLTguMDc0OTA5LTguMDc3OTc5LTEyLjExMzg5OS0xNy42NDA3NzYtMTIuMTEzODk5LTI4LjY5MTQ1OSAwLTExLjA0OTY2IDQuMDQ0MTA2LTIwLjYxOTYyIDEyLjExMzg5OS0yOC42OTA0MzYgOC4wNzE4MzktOC4wNzY5NTYgMTcuNjM4NzI5LTEyLjEyMzEwOSAyOC42OTE0NTktMTIuMTIzMTA5IDExLjA1NjgyMyAwIDIwLjYxMjQ1NyA0LjA1MjI5MyAyOC42OTI0ODIgMTIuMTIzMTA5bDExMC4zMDIxNzUgMTEwLjMwMjE3NSA1MzguMTI4MDc3IDAgMTEwLjMwMzE5OC0xMTAuMzAyMTc1YzguMDcwODE2LTguMDc2OTU2IDE3LjYzMjU4OS0xMi4xMjMxMDkgMjguNjkwNDM2LTEyLjEyMzEwOSAxMS4wNTA2ODQgMCAyMC42MTc1NzMgNC4wNTIyOTMgMjguNjg5NDEzIDEyLjEyMzEwOSA4LjA3Nzk3OSA4LjA3MDgxNiAxMi4xMTkwMTUgMTcuNjQwNzc2IDEyLjExOTAxNSAyOC42OTA0MzYgMCAxMS4wNTA2ODQtNC4wNDEwMzYgMjAuNjE0NTAzLTEyLjExOTAxNSAyOC42OTE0NTlsLTExMC4zMDIxNzUgMTEwLjMwMjE3NSAwIDE4Ny40NDgyMDYgMTQyLjgxNTY4MyAwYzExLjA1NTggMCAyMC42MTg1OTcgNC4wMzQ4OTYgMjguNjkwNDM2IDEyLjExMzg5OSA4LjA3Njk1NiA4LjA2OTc5MyAxMi4xMTc5OTIgMTcuNjM4NzI5IDEyLjExNzk5MiAyOC42ODMyNzNsMCAwTDEwMjIuMDY1NDQgNTgzLjQwMTE5IDEwMjIuMDY1NDQgNTgzLjQwMTE5ek03MTYuMDIxMTYyIDIxNi4xNTgwODUgMzA3Ljk2ODYwNSAyMTYuMTU4MDg1YzAtNTYuNTI2NDExIDE5Ljg3MTU4My0xMDQuNjY3ODUxIDU5LjYxNjc5Ni0xNDQuNDE0MDg3IDM5LjczMzk1Ni0zOS43NDYyMzYgODcuODgyNTYtNTkuNjExNjc5IDE0NC40MTEwMTctNTkuNjExNjc5IDU2LjUyOTQ4MSAwIDEwNC42NzgwODQgMTkuODY1NDQzIDE0NC40MTMwNjQgNTkuNjExNjc5QzY5Ni4xNTY3NDIgMTExLjQ4OTIxIDcxNi4wMjExNjIgMTU5LjYzMTY3NCA3MTYuMDIxMTYyIDIxNi4xNTgwODVMNzE2LjAyMTE2MiAyMTYuMTU4MDg1IDcxNi4wMjExNjIgMjE2LjE1ODA4NSA3MTYuMDIxMTYyIDIxNi4xNTgwODV6IgogICAgICAgICAgZmlsbD0iIzJjMmMyYyIgcC1pZD0iODA5ODEiPjwvcGF0aD4KPC9zdmc+",name:"Debug Bridge",id:"@wenzi7777/acev2_debug_bridge",versions:["0.0.1"],description:"AcFun Evolved V2 插件调试桥。",createdAt:new Date("2024-08-09").getTime()+"",updatedAt:(new Date).getTime()+"",author:"wenzi7777",copyright:"(c)2024 wenzi7777, licensed under the MIT License.",requestedAPIs:[],website:"https://acev2.1205.moe/",trigger:{receiveHandler:!0,matches:["*"]}},this.handler="",this.tracker="",this.canvas=[],this.currentPage=1,this.totalPages=10,this.bigManifest=null}return e.prototype.wakeUp=function(){var e=this;gn.listen({channel:"runtime:launchpad",handler:function(t){return e.render(t)},manifest:this.manifest})},e.prototype.updateCanvas=function(){return Hn(this,void 0,void 0,(function(){var e=this;return Fn(this,(function(n){return this.canvas=[{type:"sizer",styleObject:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"column",width:"100%",height:"100%",flexGrow:1,gap:"1vh"},children:[{type:"text",label:"开发者工具",text:"AcFun Evolved V2 插件调试桥"},{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw"},children:[{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return So.showDialog({title:t.t({key:"do-you-really-want-to-clear-monkey-storage"})+"?",content:t.t({key:"all-plugins-and-preferences-will-be-lose-its-unrecoverable"})+"!",okAction:function(){return Zo.clearMonkey()},cancelAction:function(){return Pt.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Gn},{type:"text",label:t.t({key:"clear-monkey-storage"})}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return So.showDialog({title:t.t({key:"do-you-really-want-to-clear-local-storage"})+"?",content:t.t({key:"all-preferences-stored-in-local-storage-will-be-lose-its-unrecoverable"})+"!",okAction:function(){return Zo.clearLocal()},cancelAction:function(){return Pt.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Gn},{type:"text",label:t.t({key:"clear-local-storage"})}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return So.showDialog({title:t.t({key:"do-you-really-want-to-import-monkey-backup"})+"?",content:t.t({key:"all-plugins-and-preferences-will-be-lose-its-unrecoverable"})+"! (Please select acev2.monkey.backup.json)",okAction:function(){Ro.ACEV2Upload({readType:"text",callback:function(e){var n=e.content;-1===e.file.name.indexOf("acev2.monkey")?Pt.showToast({text:t.t({key:"failed-to-import-filename-is-invalid"})}):(Zo.clearMonkey(),Zo.importMonkey({data:JSON.parse(n)}),So.showDialog({title:t.t({key:"import-succeed"}),content:t.t({key:"click-ok-to-reload-page"}),okAction:function(){return location.reload()}}))}})},cancelAction:function(){return Pt.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Zn},{type:"text",label:t.t({key:"import-monkey-storage"})}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return So.showDialog({title:t.t({key:"do-you-really-want-to-import-local-storage-backup"})+"?",content:t.t({key:"all-preferences-stored-in-local-storage-will-be-lose-its-unrecoverable"})+"! (Please select acev2.local.backup.json)",okAction:function(){Ro.ACEV2Upload({readType:"text",callback:function(e){var n=e.content;-1===e.file.name.indexOf("acev2.local")?Pt.showToast({text:t.t({key:"failed-to-import-filename-is-invalid"})}):(Zo.clearLocal(),Zo.importLocal({data:JSON.parse(n)}),So.showDialog({title:t.t({key:"import-succeed"}),content:t.t({key:"click-ok-to-reload-page"}),okAction:function(){return location.reload()}}))}})},cancelAction:function(){return Pt.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Zn},{type:"text",label:t.t({key:"import-local-storage"})}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return So.showDialog({title:t.t({key:"do-you-really-want-to-install-external-plugin"})+"?",content:t.t({key:"you-need-to-be-sure-you-trust-the-origin-especially-when-psv-is-half-or-off"}),okAction:function(){Ro.ACEV2Upload({readType:"arrayBuffer",callback:function(e){var n=e.content;-1===e.file.name.indexOf("raw.json.tar.gz")?So.showDialog({title:t.t({key:"failed-to-install"}),content:t.t({key:"invalid-plugin-package-it-may-because-you-do-not-name-it-correctly-or-pack-it-correctly-please-use-the-developer-kit-in-github"}),okAction:function(){return Ro.openPageInNewTab({url:xo.developerKitURL(),manifest:xo.MASTER_MANIFEST})}}):Ao.extractAndInstallPlugin({compressedData:n})}})},cancelAction:function(){return Pt.showToast({text:t.t({key:"canceled"})})}})}}],filled:!0,children:[{type:"image",src:Qn},{type:"text",label:t.t({key:"install-plugin-package"})+" (raw.json.tar.gz)"}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return So.showDialog({title:t.t({key:"do-you-really-want-to-install-external-plugin"})+"?",content:t.t({key:"you-need-to-be-sure-you-trust-the-origin-especially-when-psv-is-half-or-off"}),okAction:function(){Ro.ACEV2Upload({readType:"text",callback:function(e){var n=e.content;-1===e.file.name.indexOf("raw.json")?So.showDialog({title:t.t({key:"failed-to-install"}),content:t.t({key:"invalid-plugin-package-it-may-because-you-do-not-name-it-correctly-or-pack-it-correctly-please-use-the-developer-kit-in-github"}),okAction:function(){return Ro.openPageInNewTab({url:xo.developerKitURL(),manifest:xo.MASTER_MANIFEST})}}):Ao.installPlugin({pluginPack:JSON.parse(n),bridged:!1})}})},cancelAction:function(){return Pt.showToast({text:"canceled"})}})}}],filled:!0,children:[{type:"image",src:Qn},{type:"text",label:t.t({key:"install-unpacked-plugin"})+" (raw.json)"}]},{type:"sizer",styleObject:{display:"flex",padding:"1vw",cursor:"pointer",flexDirection:"column",gap:"1vh"},events:[{event:"click",handler:function(){return e.renderConfigurePanel()}}],filled:!0,children:[{type:"image",src:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzODA2MDk1OTY5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iOTk3NjYiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiI+CiAgICA8cGF0aCBkPSJNNTU3LjU2OCAxMDI0bDQwMC45ODEzMzMtMTY5Ljg5ODY2N2MxMy42NTMzMzMtNi42NTYgMjIuNzg0LTE2LjcyNTMzMyAyMi43ODQtMzAuMDM3MzMzVjQ4Ny41OTQ2NjdMNTgwLjM1MiA2NTcuNDkzMzMzYy05LjEzMDY2NyAzLjMyOC0xMy42NTMzMzMgNi42NTYtMjIuNzg0IDYuNjU2VjEwMjR6IG0tOTEuMTM2IDBWNjY0LjE0OTMzM2MtOS4xMzA2NjctMy4zMjgtMTMuNjUzMzMzLTMuMzI4LTIyLjc4NC02LjY1Nkw0Mi42NjY2NjcgNDg3LjU5NDY2N3YzMzYuNDY5MzMzYzAgMTMuMzEyIDkuMTMwNjY3IDIzLjM4MTMzMyAyMi43ODQgMzAuMDM3MzMzTDQ2Ni40MzIgMTAyNHogbTQ2OS4zMzMzMzMtNTkzLjA2NjY2N0w1MzQuNzg0IDI2MS4wMzQ2NjdhNTQuNDQyNjY3IDU0LjQ0MjY2NyAwIDAgMC00NS41NjggMEw4OC4yMzQ2NjcgNDMwLjg0OGw0MDAuOTgxMzMzIDE2OS45ODRjMTMuNjUzMzMzIDYuNjU2IDMxLjkxNDY2NyA2LjY1NiA0NS41NjggMGw0MDAuOTgxMzMzLTE2OS44OTg2Njd6IgogICAgICAgICAgZmlsbD0iIzJjMmMyYyIgZmlsbC1vcGFjaXR5PSIuNjUiIHAtaWQ9Ijk5NzY3IiBkYXRhLXNwbS1hbmNob3ItaWQ9ImEzMTN4LnNlYXJjaF9pbmRleC4wLmkzOC5hOTRjM2E4MU5vNGZ4UiIKICAgICAgICAgIGNsYXNzPSJzZWxlY3RlZCI+PC9wYXRoPgogICAgPHBhdGggZD0iTTUyNi4yNTA2NjcgNzMuMzAxMzMzbDQwMS41Nzg2NjYgMTYyLjEzMzMzNEw5ODEuMzMzMzMzIDIwMS4zODY2NjcgNTI2LjI1MDY2NyAxMC4zMjUzMzMgNzEuMDgyNjY3IDIwMS4zODY2NjdsNTQuMTAxMzMzIDM0LjgxNiA0MDEuMDY2NjY3LTE2Mi45ODY2Njd6IG0wIDEwNS4xMzA2NjdsNDAxLjU3ODY2NiAxNjIuMTMzMzMzIDUzLjUwNC0zNC4wNDgtNDU1LjA4MjY2Ni0xOTEuMDYxMzMzLTQ1NS4xNjggMTkxLjE0NjY2N0wxMjUuMTg0IDM0MS4zMzMzMzNsNDAxLjA2NjY2Ny0xNjIuOTAxMzMzeiIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiIGZpbGwtb3BhY2l0eT0iLjY1IiBwLWlkPSI5OTc2OCIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMzkuYTk0YzNhODFObzRmeFIiCiAgICAgICAgICBjbGFzcz0ic2VsZWN0ZWQiPjwvcGF0aD4KPC9zdmc+"},{type:"text",label:t.t({key:"configure-bridge"})}]}]}]}],[2]}))}))},e.prototype.render=function(e){return Hn(this,void 0,void 0,(function(){return Fn(this,(function(t){switch(t.label){case 0:return"pluginStarted"!==e.type||e.manifest.id!==this.manifest.id?[3,2]:(Gt.draw(),[4,this.updateCanvas()]);case 1:t.sent(),this.handler=e.handler,this.tracker=Lo.renderUI({canvas:this.canvas,slot:this.handler}),Gt.destroy(),t.label=2;case 2:return[2]}}))}))},e.prototype.renderConfigurePanel=function(){Jo.info({message:"renderConfigurePanel"});var e=Lo.renderUI({canvas:[{type:"sizer",filled:!0,styleObject:{display:"flex",flexDirection:"column",gap:"1vh",zIndex:100},draggable:!0,size:{width:20,height:30},position:{left:40,top:35},children:[{type:"text",label:t.t({key:"configure-bridge"})},{type:"checkbox",label:t.t({key:"enable-bridge"}),checked:Fo.getBridgeConfigurations().enabled,onChange:function(e){return Fo.updateBridgePreferences({newBridgeConfigurations:{enabled:e,pluginLoadOrder:Fo.getBridgeConfigurations().pluginLoadOrder,connect:Fo.getBridgeConfigurations().connect}})}},{type:"input",label:t.t({key:"connect"}),value:Fo.getBridgeConfigurations().connect,onChange:function(e){Fo.updateBridgePreferences({newBridgeConfigurations:{enabled:Fo.getBridgeConfigurations().enabled,pluginLoadOrder:Fo.getBridgeConfigurations().pluginLoadOrder,connect:e}})}},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"ok"}),actions:[function(){Lo.unmountUI({tracker:e})}]}]}]}],slot:"plugins"})},e}());function Jn(e){let t=e.length;for(;--t>=0;)e[t]=0}const qn=256,Kn=286,Xn=30,$n=15,er=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),tr=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),nr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),rr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ar=new Array(576);Jn(ar);const ir=new Array(60);Jn(ir);const or=new Array(512);Jn(or);const sr=new Array(256);Jn(sr);const lr=new Array(29);Jn(lr);const cr=new Array(Xn);function ur(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}let dr,gr,pr;function fr(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Jn(cr);const hr=e=>e<256?or[e]:or[256+(e>>>7)],yr=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Mr=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,yr(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},mr=(e,t,n)=>{Mr(e,n[2*t],n[2*t+1])},br=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},vr=(e,t,n)=>{const r=new Array(16);let a,i,o=0;for(a=1;a<=$n;a++)o=o+n[a-1]<<1,r[a]=o;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=br(r[t]++,t))}},wr=e=>{let t;for(t=0;t<Kn;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Xn;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ir=e=>{e.bi_valid>8?yr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Nr=(e,t,n,r)=>{const a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]},Ar=(e,t,n)=>{const r=e.heap[n];let a=n<<1;for(;a<=e.heap_len&&(a<e.heap_len&&Nr(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!Nr(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r},Tr=(e,t,n)=>{let r,a,i,o,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,a=e.pending_buf[e.sym_buf+s++],0===r?mr(e,a,t):(i=sr[a],mr(e,i+qn+1,t),o=er[i],0!==o&&(a-=lr[i],Mr(e,a,o)),r--,i=hr(r),mr(e,i,n),o=tr[i],0!==o&&(r-=cr[i],Mr(e,r,o)))}while(s<e.sym_next);mr(e,256,t)},kr=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.elems;let o,s,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<i;o++)0!==n[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=r[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)Ar(e,n,o);l=i;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ar(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[2*l]=n[2*o]+n[2*s],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[2*o+1]=n[2*s+1]=l,e.heap[1]=l++,Ar(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,g,p,f,h=0;for(g=0;g<=$n;g++)e.bl_count[g]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],g=n[2*n[2*u+1]+1]+1,g>l&&(g=l,h++),n[2*u+1]=g,u>r||(e.bl_count[g]++,p=0,u>=s&&(p=o[u-s]),f=n[2*u],e.opt_len+=f*(g+p),i&&(e.static_len+=f*(a[2*u+1]+p)));if(0!==h){do{for(g=l-1;0===e.bl_count[g];)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[l]--,h-=2}while(h>0);for(g=l;0!==g;g--)for(u=e.bl_count[g];0!==u;)d=e.heap[--c],d>r||(n[2*d+1]!==g&&(e.opt_len+=(g-n[2*d+1])*n[2*d],n[2*d+1]=g),u--)}})(e,t),vr(n,c,e.bl_count)},_r=(e,t,n)=>{let r,a,i=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=o,o=t[2*(r+1)+1],++s<l&&a===o||(s<c?e.bl_tree[2*a]+=s:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=a,0===o?(l=138,c=3):a===o?(l=6,c=3):(l=7,c=4))},xr=(e,t,n)=>{let r,a,i=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(a=o,o=t[2*(r+1)+1],!(++s<l&&a===o)){if(s<c)do{mr(e,a,e.bl_tree)}while(0!=--s);else 0!==a?(a!==i&&(mr(e,a,e.bl_tree),s--),mr(e,16,e.bl_tree),Mr(e,s-3,2)):s<=10?(mr(e,17,e.bl_tree),Mr(e,s-3,3)):(mr(e,18,e.bl_tree),Mr(e,s-11,7));s=0,i=a,0===o?(l=138,c=3):a===o?(l=6,c=3):(l=7,c=4)}};let Dr=!1;const zr=(e,t,n,r)=>{Mr(e,0+(r?1:0),3),Ir(e),yr(e,n),yr(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Cr=e=>{Dr||((()=>{let e,t,n,r,a;const i=new Array(16);for(n=0,r=0;r<28;r++)for(lr[r]=n,e=0;e<1<<er[r];e++)sr[n++]=r;for(sr[n-1]=r,a=0,r=0;r<16;r++)for(cr[r]=a,e=0;e<1<<tr[r];e++)or[a++]=r;for(a>>=7;r<Xn;r++)for(cr[r]=a<<7,e=0;e<1<<tr[r]-7;e++)or[256+a++]=r;for(t=0;t<=$n;t++)i[t]=0;for(e=0;e<=143;)ar[2*e+1]=8,e++,i[8]++;for(;e<=255;)ar[2*e+1]=9,e++,i[9]++;for(;e<=279;)ar[2*e+1]=7,e++,i[7]++;for(;e<=287;)ar[2*e+1]=8,e++,i[8]++;for(vr(ar,287,i),e=0;e<Xn;e++)ir[2*e+1]=5,ir[2*e]=br(e,5);dr=new ur(ar,er,257,Kn,$n),gr=new ur(ir,tr,0,Xn,$n),pr=new ur(new Array(0),nr,0,19,7)})(),Dr=!0),e.l_desc=new fr(e.dyn_ltree,dr),e.d_desc=new fr(e.dyn_dtree,gr),e.bl_desc=new fr(e.bl_tree,pr),e.bi_buf=0,e.bi_valid=0,wr(e)},jr=(e,t,n,r)=>{let a,i,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<qn;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),kr(e,e.l_desc),kr(e,e.d_desc),o=(e=>{let t;for(_r(e,e.dyn_ltree,e.l_desc.max_code),_r(e,e.dyn_dtree,e.d_desc.max_code),kr(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*rr[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?zr(e,t,n,r):4===e.strategy||i===a?(Mr(e,2+(r?1:0),3),Tr(e,ar,ir)):(Mr(e,4+(r?1:0),3),((e,t,n,r)=>{let a;for(Mr(e,t-257,5),Mr(e,n-1,5),Mr(e,r-4,4),a=0;a<r;a++)Mr(e,e.bl_tree[2*rr[a]+1],3);xr(e,e.dyn_ltree,t-1),xr(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Tr(e,e.dyn_ltree,e.dyn_dtree)),wr(e),r&&Ir(e)},Lr=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(sr[n]+qn+1)]++,e.dyn_dtree[2*hr(t)]++),e.sym_next===e.sym_end),Er=e=>{Mr(e,2,3),mr(e,256,ar),(e=>{16===e.bi_valid?(yr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},Or={_tr_init:Cr,_tr_stored_block:zr,_tr_flush_block:jr,_tr_tally:Lr,_tr_align:Er};var Sr=(e,t,n,r)=>{let a=65535&e,i=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{a=a+t[r++]|0,i=i+a|0}while(--o);a%=65521,i%=65521}return a|i<<16};const Ur=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Yr=(e,t,n,r)=>{const a=Ur,i=r+n;e^=-1;for(let n=r;n<i;n++)e=e>>>8^a[255&(e^t[n])];return~e},Pr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Qr={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Rr,_tr_stored_block:Wr,_tr_flush_block:Br,_tr_tally:Gr,_tr_align:Zr}=Or,{Z_NO_FLUSH:Hr,Z_PARTIAL_FLUSH:Fr,Z_FULL_FLUSH:Vr,Z_FINISH:Jr,Z_BLOCK:qr,Z_OK:Kr,Z_STREAM_END:Xr,Z_STREAM_ERROR:$r,Z_DATA_ERROR:ea,Z_BUF_ERROR:ta,Z_DEFAULT_COMPRESSION:na,Z_FILTERED:ra,Z_HUFFMAN_ONLY:aa,Z_RLE:ia,Z_FIXED:oa,Z_DEFAULT_STRATEGY:sa,Z_UNKNOWN:la,Z_DEFLATED:ca}=Qr,ua=258,da=262,ga=42,pa=113,fa=666,ha=(e,t)=>(e.msg=Pr[t],t),ya=e=>2*e-(e>4?9:0),Ma=e=>{let t=e.length;for(;--t>=0;)e[t]=0},ma=e=>{let t,n,r,a=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=a?n-a:0}while(--t);t=a,r=t;do{n=e.prev[--r],e.prev[r]=n>=a?n-a:0}while(--t)};
/* eslint-disable new-cap */
let ba=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const va=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},wa=(e,t)=>{Br(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,va(e.strm)},Ia=(e,t)=>{e.pending_buf[e.pending++]=t},Na=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Aa=(e,t,n,r)=>{let a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=Sr(e.adler,t,a,n):2===e.state.wrap&&(e.adler=Yr(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},Ta=(e,t)=>{let n,r,a=e.max_chain_length,i=e.strstart,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-da?e.strstart-(e.w_size-da):0,c=e.window,u=e.w_mask,d=e.prev,g=e.strstart+ua;let p=c[i+o-1],f=c[i+o];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+o]===f&&c[n+o-1]===p&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<g);if(r=ua-(g-i),i=g-ua,r>o){if(e.match_start=t,o=r,r>=s)break;p=c[i+o-1],f=c[i+o]}}}while((t=d[t&u])>l&&0!=--a);return o<=e.lookahead?o:e.lookahead},ka=e=>{const t=e.w_size;let n,r,a;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-da)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),ma(e),r+=t),0===e.strm.avail_in)break;if(n=Aa(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=ba(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=ba(e,e.ins_h,e.window[a+3-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<da&&0!==e.strm.avail_in)},_a=(e,t)=>{let n,r,a,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a)break;if(a=e.strm.avail_out-a,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>a&&(n=a),n<i&&(0===n&&t!==Jr||t===Hr||n!==r+e.strm.avail_in))break;o=t===Jr&&n===r+e.strm.avail_in?1:0,Wr(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,va(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Aa(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Hr&&t!==Jr&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Aa(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,i=a>e.w_size?e.w_size:a,r=e.strstart-e.block_start,(r>=i||(r||t===Jr)&&t!==Hr&&0===e.strm.avail_in&&r<=a)&&(n=r>a?a:r,o=t===Jr&&0===e.strm.avail_in&&n===r?1:0,Wr(e,e.block_start,n,o),e.block_start+=n,va(e.strm)),o?3:1)},xa=(e,t)=>{let n,r;for(;;){if(e.lookahead<da){if(ka(e),e.lookahead<da&&t===Hr)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ba(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-da&&(e.match_length=Ta(e,n)),e.match_length>=3)if(r=Gr(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ba(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ba(e,e.ins_h,e.window[e.strstart+1]);else r=Gr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(wa(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Jr?(wa(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wa(e,!1),0===e.strm.avail_out)?1:2},Da=(e,t)=>{let n,r,a;for(;;){if(e.lookahead<da){if(ka(e),e.lookahead<da&&t===Hr)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ba(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-da&&(e.match_length=Ta(e,n),e.match_length<=5&&(e.strategy===ra||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=Gr(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=ba(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(wa(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Gr(e,0,e.window[e.strstart-1]),r&&wa(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Gr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Jr?(wa(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wa(e,!1),0===e.strm.avail_out)?1:2};function za(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}const Ca=[new za(0,0,0,0,_a),new za(4,4,8,4,xa),new za(4,5,16,8,xa),new za(4,6,32,32,xa),new za(4,4,16,16,Da),new za(8,16,32,32,Da),new za(8,16,128,128,Da),new za(8,32,128,256,Da),new za(32,128,258,1024,Da),new za(32,258,258,4096,Da)];function ja(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ca,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ma(this.dyn_ltree),Ma(this.dyn_dtree),Ma(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ma(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ma(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const La=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==ga&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==pa&&t.status!==fa?1:0},Ea=e=>{if(La(e))return ha(e,$r);e.total_in=e.total_out=0,e.data_type=la;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?ga:pa,e.adler=2===t.wrap?0:1,t.last_flush=-2,Rr(t),Kr},Oa=e=>{const t=Ea(e);return t===Kr&&(e=>{e.window_size=2*e.w_size,Ma(e.head),e.max_lazy_match=Ca[e.level].max_lazy,e.good_match=Ca[e.level].good_length,e.nice_match=Ca[e.level].nice_length,e.max_chain_length=Ca[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},Sa=(e,t,n,r,a,i)=>{if(!e)return $r;let o=1;if(t===na&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),a<1||a>9||n!==ca||r<8||r>15||t<0||t>9||i<0||i>oa||8===r&&1!==o)return ha(e,$r);8===r&&(r=9);const s=new ja;return e.state=s,s.strm=e,s.status=ga,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=i,s.method=n,Oa(e)};var Ua=(e,t)=>{if(La(e)||t>qr||t<0)return e?ha(e,$r):$r;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===fa&&t!==Jr)return ha(e,0===e.avail_out?ta:$r);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(va(e),0===e.avail_out)return n.last_flush=-1,Kr}else if(0===e.avail_in&&ya(t)<=ya(r)&&t!==Jr)return ha(e,ta);if(n.status===fa&&0!==e.avail_in)return ha(e,ta);if(n.status===ga&&0===n.wrap&&(n.status=pa),n.status===ga){let t=ca+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=aa||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Na(n,t),0!==n.strstart&&(Na(n,e.adler>>>16),Na(n,65535&e.adler)),e.adler=1,n.status=pa,va(e),0!==n.pending)return n.last_flush=-1,Kr}if(57===n.status)if(e.adler=0,Ia(n,31),Ia(n,139),Ia(n,8),n.gzhead)Ia(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ia(n,255&n.gzhead.time),Ia(n,n.gzhead.time>>8&255),Ia(n,n.gzhead.time>>16&255),Ia(n,n.gzhead.time>>24&255),Ia(n,9===n.level?2:n.strategy>=aa||n.level<2?4:0),Ia(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Ia(n,255&n.gzhead.extra.length),Ia(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Yr(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Ia(n,0),Ia(n,0),Ia(n,0),Ia(n,0),Ia(n,0),Ia(n,9===n.level?2:n.strategy>=aa||n.level<2?4:0),Ia(n,3),n.status=pa,va(e),0!==n.pending)return n.last_flush=-1,Kr;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=a,va(e),0!==n.pending)return n.last_flush=-1,Kr;t=0,r-=a}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-r,r)),va(e),0!==n.pending)return n.last_flush=-1,Kr;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Ia(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-r,r)),va(e),0!==n.pending)return n.last_flush=-1,Kr;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Ia(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Yr(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(va(e),0!==n.pending))return n.last_flush=-1,Kr;Ia(n,255&e.adler),Ia(n,e.adler>>8&255),e.adler=0}if(n.status=pa,va(e),0!==n.pending)return n.last_flush=-1,Kr}if(0!==e.avail_in||0!==n.lookahead||t!==Hr&&n.status!==fa){let r=0===n.level?_a(n,t):n.strategy===aa?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(ka(e),0===e.lookahead)){if(t===Hr)return 1;break}if(e.match_length=0,n=Gr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(wa(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Jr?(wa(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wa(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ia?((e,t)=>{let n,r,a,i;const o=e.window;for(;;){if(e.lookahead<=ua){if(ka(e),e.lookahead<=ua&&t===Hr)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(a=e.strstart-1,r=o[a],r===o[++a]&&r===o[++a]&&r===o[++a])){i=e.strstart+ua;do{}while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);e.match_length=ua-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Gr(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Gr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(wa(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Jr?(wa(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wa(e,!1),0===e.strm.avail_out)?1:2})(n,t):Ca[n.level].func(n,t);if(3!==r&&4!==r||(n.status=fa),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Kr;if(2===r&&(t===Fr?Zr(n):t!==qr&&(Wr(n,0,0,!1),t===Vr&&(Ma(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),va(e),0===e.avail_out))return n.last_flush=-1,Kr}return t!==Jr?Kr:n.wrap<=0?Xr:(2===n.wrap?(Ia(n,255&e.adler),Ia(n,e.adler>>8&255),Ia(n,e.adler>>16&255),Ia(n,e.adler>>24&255),Ia(n,255&e.total_in),Ia(n,e.total_in>>8&255),Ia(n,e.total_in>>16&255),Ia(n,e.total_in>>24&255)):(Na(n,e.adler>>>16),Na(n,65535&e.adler)),va(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Kr:Xr)},Ya=(e,t)=>{let n=t.length;if(La(e))return $r;const r=e.state,a=r.wrap;if(2===a||1===a&&r.status!==ga||r.lookahead)return $r;if(1===a&&(e.adler=Sr(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(Ma(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const i=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ka(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=ba(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,ka(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=i,r.wrap=a,Kr},Pa={deflateInit:(e,t)=>Sa(e,t,ca,15,8,sa),deflateInit2:Sa,deflateReset:Oa,deflateResetKeep:Ea,deflateSetHeader:(e,t)=>La(e)||2!==e.state.wrap?$r:(e.state.gzhead=t,Kr),deflate:Ua,deflateEnd:e=>{if(La(e))return $r;const t=e.state.status;return e.state=null,t===pa?ha(e,ea):Kr},deflateSetDictionary:Ya,deflateInfo:"pako deflate (from Nodeca project)"};const Qa=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Ra={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Qa(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,a=e.length;t<a;t++){let a=e[t];n.set(a,r),r+=a.length}return n}};let Wa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Wa=!1}const Ba=new Uint8Array(256);for(let e=0;e<256;e++)Ba[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ba[254]=Ba[254]=1;var Ga={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,a,i,o=e.length,s=0;for(a=0;a<o;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<o&&(r=e.charCodeAt(a+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),i=0,a=0;i<s;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<o&&(r=e.charCodeAt(a+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,a;const i=new Array(2*n);for(a=0,r=0;r<n;){let t=e[r++];if(t<128){i[a++]=t;continue}let o=Ba[t];if(o>4)i[a++]=65533,r+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&r<n;)t=t<<6|63&e[r++],o--;o>1?i[a++]=65533:t<65536?i[a++]=t:(t-=65536,i[a++]=55296|t>>10&1023,i[a++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Wa)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,a)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Ba[e[n]]>t?n:t}};var Za=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ha=Object.prototype.toString,{Z_NO_FLUSH:Fa,Z_SYNC_FLUSH:Va,Z_FULL_FLUSH:Ja,Z_FINISH:qa,Z_OK:Ka,Z_STREAM_END:Xa,Z_DEFAULT_COMPRESSION:$a,Z_DEFAULT_STRATEGY:ei,Z_DEFLATED:ti}=Qr;function ni(e){this.options=Ra.assign({level:$a,method:ti,chunkSize:16384,windowBits:15,memLevel:8,strategy:ei},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Za,this.strm.avail_out=0;let n=Pa.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Ka)throw new Error(Pr[n]);if(t.header&&Pa.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Ga.string2buf(t.dictionary):"[object ArrayBuffer]"===Ha.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Pa.deflateSetDictionary(this.strm,e),n!==Ka)throw new Error(Pr[n]);this._dict_set=!0}}function ri(e,t){const n=new ni(t);if(n.push(e,!0),n.err)throw n.msg||Pr[n.err];return n.result}ni.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let a,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?qa:Fa,"string"==typeof e?n.input=Ga.string2buf(e):"[object ArrayBuffer]"===Ha.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===Va||i===Ja)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(a=Pa.deflate(n,i),a===Xa)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=Pa.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Ka;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ni.prototype.onData=function(e){this.chunks.push(e)},ni.prototype.onEnd=function(e){e===Ka&&(this.result=Ra.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ai=function(e,t){return(t=t||{}).raw=!0,ri(e,t)},ii=function(e,t){return(t=t||{}).gzip=!0,ri(e,t)},oi={Deflate:ni,deflate:ri,deflateRaw:ai,gzip:ii,constants:Qr};const si=16209;var li=function(e,t){let n,r,a,i,o,s,l,c,u,d,g,p,f,h,y,M,m,b,v,w,I,N,A,T;const k=e.state;n=e.next_in,A=e.input,r=n+(e.avail_in-5),a=e.next_out,T=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),s=k.dmax,l=k.wsize,c=k.whave,u=k.wnext,d=k.window,g=k.hold,p=k.bits,f=k.lencode,h=k.distcode,y=(1<<k.lenbits)-1,M=(1<<k.distbits)-1;e:do{p<15&&(g+=A[n++]<<p,p+=8,g+=A[n++]<<p,p+=8),m=f[g&y];t:for(;;){if(b=m>>>24,g>>>=b,p-=b,b=m>>>16&255,0===b)T[a++]=65535&m;else{if(!(16&b)){if(64&b){if(32&b){k.mode=16191;break e}e.msg="invalid literal/length code",k.mode=si;break e}m=f[(65535&m)+(g&(1<<b)-1)];continue t}for(v=65535&m,b&=15,b&&(p<b&&(g+=A[n++]<<p,p+=8),v+=g&(1<<b)-1,g>>>=b,p-=b),p<15&&(g+=A[n++]<<p,p+=8,g+=A[n++]<<p,p+=8),m=h[g&M];;){if(b=m>>>24,g>>>=b,p-=b,b=m>>>16&255,16&b){if(w=65535&m,b&=15,p<b&&(g+=A[n++]<<p,p+=8,p<b&&(g+=A[n++]<<p,p+=8)),w+=g&(1<<b)-1,w>s){e.msg="invalid distance too far back",k.mode=si;break e}if(g>>>=b,p-=b,b=a-i,w>b){if(b=w-b,b>c&&k.sane){e.msg="invalid distance too far back",k.mode=si;break e}if(I=0,N=d,0===u){if(I+=l-b,b<v){v-=b;do{T[a++]=d[I++]}while(--b);I=a-w,N=T}}else if(u<b){if(I+=l+u-b,b-=u,b<v){v-=b;do{T[a++]=d[I++]}while(--b);if(I=0,u<v){b=u,v-=b;do{T[a++]=d[I++]}while(--b);I=a-w,N=T}}}else if(I+=u-b,b<v){v-=b;do{T[a++]=d[I++]}while(--b);I=a-w,N=T}for(;v>2;)T[a++]=N[I++],T[a++]=N[I++],T[a++]=N[I++],v-=3;v&&(T[a++]=N[I++],v>1&&(T[a++]=N[I++]))}else{I=a-w;do{T[a++]=T[I++],T[a++]=T[I++],T[a++]=T[I++],v-=3}while(v>2);v&&(T[a++]=T[I++],v>1&&(T[a++]=T[I++]))}break}if(64&b){e.msg="invalid distance code",k.mode=si;break e}m=h[(65535&m)+(g&(1<<b)-1)]}}break}}while(n<r&&a<o);v=p>>3,n-=v,p-=v<<3,g&=(1<<p)-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=a<o?o-a+257:257-(a-o),k.hold=g,k.bits=p};const ci=15,ui=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),di=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),gi=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pi=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var fi=(e,t,n,r,a,i,o,s)=>{const l=s.bits;let c,u,d,g,p,f,h=0,y=0,M=0,m=0,b=0,v=0,w=0,I=0,N=0,A=0,T=null;const k=new Uint16Array(16),_=new Uint16Array(16);let x,D,z,C=null;for(h=0;h<=ci;h++)k[h]=0;for(y=0;y<r;y++)k[t[n+y]]++;for(b=l,m=ci;m>=1&&0===k[m];m--);if(b>m&&(b=m),0===m)return a[i++]=20971520,a[i++]=20971520,s.bits=1,0;for(M=1;M<m&&0===k[M];M++);for(b<M&&(b=M),I=1,h=1;h<=ci;h++)if(I<<=1,I-=k[h],I<0)return-1;if(I>0&&(0===e||1!==m))return-1;for(_[1]=0,h=1;h<ci;h++)_[h+1]=_[h]+k[h];for(y=0;y<r;y++)0!==t[n+y]&&(o[_[t[n+y]]++]=y);if(0===e?(T=C=o,f=20):1===e?(T=ui,C=di,f=257):(T=gi,C=pi,f=0),A=0,y=0,h=M,p=i,v=b,w=0,d=-1,N=1<<b,g=N-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){x=h-w,o[y]+1<f?(D=0,z=o[y]):o[y]>=f?(D=C[o[y]-f],z=T[o[y]-f]):(D=96,z=0),c=1<<h-w,u=1<<v,M=u;do{u-=c,a[p+(A>>w)+u]=x<<24|D<<16|z}while(0!==u);for(c=1<<h-1;A&c;)c>>=1;if(0!==c?(A&=c-1,A+=c):A=0,y++,0==--k[h]){if(h===m)break;h=t[n+o[y]]}if(h>b&&(A&g)!==d){for(0===w&&(w=b),p+=M,v=h-w,I=1<<v;v+w<m&&(I-=k[v+w],!(I<=0));)v++,I<<=1;if(N+=1<<v,1===e&&N>852||2===e&&N>592)return 1;d=A&g,a[d]=b<<24|v<<16|p-i}}return 0!==A&&(a[p+A]=h-w<<24|64<<16),s.bits=b,0};const{Z_FINISH:hi,Z_BLOCK:yi,Z_TREES:Mi,Z_OK:mi,Z_STREAM_END:bi,Z_NEED_DICT:vi,Z_STREAM_ERROR:wi,Z_DATA_ERROR:Ii,Z_MEM_ERROR:Ni,Z_BUF_ERROR:Ai,Z_DEFLATED:Ti}=Qr,ki=16180,_i=16190,xi=16191,Di=16192,zi=16194,Ci=16199,ji=16200,Li=16206,Ei=16209,Oi=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Si(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ui=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<ki||t.mode>16211?1:0},Yi=e=>{if(Ui(e))return wi;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=ki,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mi},Pi=e=>{if(Ui(e))return wi;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Yi(e)},Qi=(e,t)=>{let n;if(Ui(e))return wi;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?wi:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Pi(e))},Ri=(e,t)=>{if(!e)return wi;const n=new Si;e.state=n,n.strm=e,n.window=null,n.mode=ki;const r=Qi(e,t);return r!==mi&&(e.state=null),r};let Wi,Bi,Gi=!0;const Zi=e=>{if(Gi){Wi=new Int32Array(512),Bi=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(fi(1,e.lens,0,288,Wi,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;fi(2,e.lens,0,32,Bi,0,e.work,{bits:5}),Gi=!1}e.lencode=Wi,e.lenbits=9,e.distcode=Bi,e.distbits=5},Hi=(e,t,n,r)=>{let a;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>r&&(a=r),i.window.set(t.subarray(n-r,n-r+a),i.wnext),(r-=a)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0};var Fi=(e,t)=>{let n,r,a,i,o,s,l,c,u,d,g,p,f,h,y,M,m,b,v,w,I,N,A=0;const T=new Uint8Array(4);let k,_;const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ui(e)||!e.output||!e.input&&0!==e.avail_in)return wi;n=e.state,n.mode===xi&&(n.mode=Di),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,d=s,g=l,N=mi;e:for(;;)switch(n.mode){case ki:if(0===n.wrap){n.mode=Di;break}for(;u<16;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=Yr(n.check,T,2,0),c=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Ei;break}if((15&c)!==Ti){e.msg="unknown compression method",n.mode=Ei;break}if(c>>>=4,u-=4,I=8+(15&c),0===n.wbits&&(n.wbits=I),I>15||I>n.wbits){e.msg="invalid window size",n.mode=Ei;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:xi,c=0,u=0;break;case 16181:for(;u<16;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==Ti){e.msg="unknown compression method",n.mode=Ei;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Ei;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=Yr(n.check,T,2,0)),c=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=Yr(n.check,T,4,0)),c=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=Yr(n.check,T,2,0)),c=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=Yr(n.check,T,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>s&&(p=s),p&&(n.head&&(I=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+p),I)),512&n.flags&&4&n.wrap&&(n.check=Yr(n.check,r,p,i)),s-=p,i+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;p=0;do{I=r[i+p++],n.head&&I&&n.length<65536&&(n.head.name+=String.fromCharCode(I))}while(I&&p<s);if(512&n.flags&&4&n.wrap&&(n.check=Yr(n.check,r,p,i)),s-=p,i+=p,I)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;p=0;do{I=r[i+p++],n.head&&I&&n.length<65536&&(n.head.comment+=String.fromCharCode(I))}while(I&&p<s);if(512&n.flags&&4&n.wrap&&(n.check=Yr(n.check,r,p,i)),s-=p,i+=p,I)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Ei;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=xi;break;case 16189:for(;u<32;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}e.adler=n.check=Oi(c),c=0,u=0,n.mode=_i;case _i:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,n.hold=c,n.bits=u,vi;e.adler=n.check=1,n.mode=xi;case xi:if(t===yi||t===Mi)break e;case Di:if(n.last){c>>>=7&u,u-=7&u,n.mode=Li;break}for(;u<3;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=16193;break;case 1:if(Zi(n),n.mode=Ci,t===Mi){c>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Ei}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Ei;break}if(n.length=65535&c,c=0,u=0,n.mode=zi,t===Mi)break e;case zi:n.mode=16195;case 16195:if(p=n.length,p){if(p>s&&(p=s),p>l&&(p=l),0===p)break e;a.set(r.subarray(i,i+p),o),s-=p,i+=p,l-=p,o+=p,n.length-=p;break}n.mode=xi;break;case 16196:for(;u<14;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Ei;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}n.lens[x[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[x[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k={bits:n.lenbits},N=fi(0,n.lens,0,19,n.lencode,0,n.work,k),n.lenbits=k.bits,N){e.msg="invalid code lengths set",n.mode=Ei;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;A=n.lencode[c&(1<<n.lenbits)-1],y=A>>>24,M=A>>>16&255,m=65535&A,!(y<=u);){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if(m<16)c>>>=y,u-=y,n.lens[n.have++]=m;else{if(16===m){for(_=y+2;u<_;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if(c>>>=y,u-=y,0===n.have){e.msg="invalid bit length repeat",n.mode=Ei;break}I=n.lens[n.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===m){for(_=y+3;u<_;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}c>>>=y,u-=y,I=0,p=3+(7&c),c>>>=3,u-=3}else{for(_=y+7;u<_;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}c>>>=y,u-=y,I=0,p=11+(127&c),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Ei;break}for(;p--;)n.lens[n.have++]=I}}if(n.mode===Ei)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Ei;break}if(n.lenbits=9,k={bits:n.lenbits},N=fi(1,n.lens,0,n.nlen,n.lencode,0,n.work,k),n.lenbits=k.bits,N){e.msg="invalid literal/lengths set",n.mode=Ei;break}if(n.distbits=6,n.distcode=n.distdyn,k={bits:n.distbits},N=fi(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,k),n.distbits=k.bits,N){e.msg="invalid distances set",n.mode=Ei;break}if(n.mode=Ci,t===Mi)break e;case Ci:n.mode=ji;case ji:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,n.hold=c,n.bits=u,li(e,g),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===xi&&(n.back=-1);break}for(n.back=0;A=n.lencode[c&(1<<n.lenbits)-1],y=A>>>24,M=A>>>16&255,m=65535&A,!(y<=u);){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if(M&&!(240&M)){for(b=y,v=M,w=m;A=n.lencode[w+((c&(1<<b+v)-1)>>b)],y=A>>>24,M=A>>>16&255,m=65535&A,!(b+y<=u);){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=y,u-=y,n.back+=y,n.length=m,0===M){n.mode=16205;break}if(32&M){n.back=-1,n.mode=xi;break}if(64&M){e.msg="invalid literal/length code",n.mode=Ei;break}n.extra=15&M,n.mode=16201;case 16201:if(n.extra){for(_=n.extra;u<_;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;A=n.distcode[c&(1<<n.distbits)-1],y=A>>>24,M=A>>>16&255,m=65535&A,!(y<=u);){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if(!(240&M)){for(b=y,v=M,w=m;A=n.distcode[w+((c&(1<<b+v)-1)>>b)],y=A>>>24,M=A>>>16&255,m=65535&A,!(b+y<=u);){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=y,u-=y,n.back+=y,64&M){e.msg="invalid distance code",n.mode=Ei;break}n.offset=m,n.extra=15&M,n.mode=16203;case 16203:if(n.extra){for(_=n.extra;u<_;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Ei;break}n.mode=16204;case 16204:if(0===l)break e;if(p=g-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Ei;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),h=n.window}else h=a,f=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{a[o++]=h[f++]}while(--p);0===n.length&&(n.mode=ji);break;case 16205:if(0===l)break e;a[o++]=n.length,l--,n.mode=ji;break;case Li:if(n.wrap){for(;u<32;){if(0===s)break e;s--,c|=r[i++]<<u,u+=8}if(g-=l,e.total_out+=g,n.total+=g,4&n.wrap&&g&&(e.adler=n.check=n.flags?Yr(n.check,a,g,o-g):Sr(n.check,a,g,o-g)),g=l,4&n.wrap&&(n.flags?c:Oi(c))!==n.check){e.msg="incorrect data check",n.mode=Ei;break}c=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,c+=r[i++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Ei;break}c=0,u=0}n.mode=16208;case 16208:N=bi;break e;case Ei:N=Ii;break e;case 16210:return Ni;default:return wi}return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||g!==e.avail_out&&n.mode<Ei&&(n.mode<Li||t!==hi))&&Hi(e,e.output,e.next_out,g-e.avail_out),d-=e.avail_in,g-=e.avail_out,e.total_in+=d,e.total_out+=g,n.total+=g,4&n.wrap&&g&&(e.adler=n.check=n.flags?Yr(n.check,a,g,e.next_out-g):Sr(n.check,a,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===xi?128:0)+(n.mode===Ci||n.mode===zi?256:0),(0===d&&0===g||t===hi)&&N===mi&&(N=Ai),N},Vi={inflateReset:Pi,inflateReset2:Qi,inflateResetKeep:Yi,inflateInit:e=>Ri(e,15),inflateInit2:Ri,inflate:Fi,inflateEnd:e=>{if(Ui(e))return wi;let t=e.state;return t.window&&(t.window=null),e.state=null,mi},inflateGetHeader:(e,t)=>{if(Ui(e))return wi;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,mi):wi},inflateSetDictionary:(e,t)=>{const n=t.length;let r,a,i;return Ui(e)?wi:(r=e.state,0!==r.wrap&&r.mode!==_i?wi:r.mode===_i&&(a=1,a=Sr(a,t,n,0),a!==r.check)?Ii:(i=Hi(e,t,n,n),i?(r.mode=16210,Ni):(r.havedict=1,mi)))},inflateInfo:"pako inflate (from Nodeca project)"};var Ji=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const qi=Object.prototype.toString,{Z_NO_FLUSH:Ki,Z_FINISH:Xi,Z_OK:$i,Z_STREAM_END:eo,Z_NEED_DICT:to,Z_STREAM_ERROR:no,Z_DATA_ERROR:ro,Z_MEM_ERROR:ao}=Qr;function io(e){this.options=Ra.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Za,this.strm.avail_out=0;let n=Vi.inflateInit2(this.strm,t.windowBits);if(n!==$i)throw new Error(Pr[n]);if(this.header=new Ji,Vi.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ga.string2buf(t.dictionary):"[object ArrayBuffer]"===qi.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Vi.inflateSetDictionary(this.strm,t.dictionary),n!==$i)))throw new Error(Pr[n])}function oo(e,t){const n=new io(t);if(n.push(e),n.err)throw n.msg||Pr[n.err];return n.result}io.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let i,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Xi:Ki,"[object ArrayBuffer]"===qi.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Vi.inflate(n,o),i===to&&a&&(i=Vi.inflateSetDictionary(n,a),i===$i?i=Vi.inflate(n,o):i===ro&&(i=to));n.avail_in>0&&i===eo&&n.state.wrap>0&&0!==e[n.next_in];)Vi.inflateReset(n),i=Vi.inflate(n,o);switch(i){case no:case ro:case to:case ao:return this.onEnd(i),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||i===eo))if("string"===this.options.to){let e=Ga.utf8border(n.output,n.next_out),t=n.next_out-e,a=Ga.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(a)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==$i||0!==s){if(i===eo)return i=Vi.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},io.prototype.onData=function(e){this.chunks.push(e)},io.prototype.onEnd=function(e){e===$i&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ra.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var so=function(e,t){return(t=t||{}).raw=!0,oo(e,t)},lo={Inflate:io,inflate:oo,inflateRaw:so,ungzip:oo,constants:Qr};const{Deflate:co,deflate:uo,deflateRaw:go,gzip:po}=oi,{Inflate:fo,inflate:ho,inflateRaw:yo,ungzip:Mo}=lo;var mo={Deflate:co,deflate:uo,deflateRaw:go,gzip:po,Inflate:fo,inflate:ho,inflateRaw:yo,ungzip:Mo,constants:Qr},bo=n(872),vo=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},wo=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Io=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},No=function(){function e(){this.tombstones=[],this.apiImplementations={showDialog:function(e){var t=e.title,n=e.content,r=e.okAction,a=e.cancelAction;return So.showDialog({title:t,content:n,okAction:r,cancelAction:a})},showToast:function(e){var t=e.text;return Pt.showToast({text:t})},ACEV2Log:{info:function(e){var t=e.message;return Jo.info({message:t})},success:function(e){var t=e.message;return Jo.success({message:t})},warn:function(e){var t=e.message;return Jo.warn({message:t})},error:function(e){var t=e.message;return Jo.error({message:t})}},isDarkMode:function(){return Fo.isDarkMode()},ACEV2DOM:{injectHTML:function(e){var t=e.HTMLCode;return ht.injectHTML({HTMLCode:t})},removeHTML:function(e){var t=e.tracker;return ht.removeElement({tracker:t})}}}}return e.prototype.installPlugin=function(e){return vo(this,arguments,void 0,(function(e){var n,r,a,i,o=e.pluginPack,s=e.bridged;return wo(this,(function(e){switch(e.label){case 0:n=!1,e.label=1;case 1:return e.trys.push([1,5,,6]),"none"===Fo.getPreference({category:"developer",k:"psv"})?[3,3]:[4,Bt.psv({signature:o.signature,pluginSelf:o.self})];case 2:return n=e.sent(),[3,4];case 3:n=!0,e.label=4;case 4:return[3,6];case 5:return r=e.sent(),Pt.showToast({text:t.t({key:"psv-check-failed-installation-denied"})}),Jo.error({message:JSON.stringify(r)}),[3,6];case 6:return n?this.checkIfInstalled({pluginPack:o})?(Pt.showToast({text:"".concat(t.t({key:"plugin"})," 「").concat(o.manifest.id,"」 ").concat(t.t({key:"this-plugin-is-already-installed"}))}),[2]):(s?(i=this.getInstalledPlugins(),o.enabled=!0,o.manifest.bridged=!0,-1!==(a=i.findIndex((function(e){return e.manifest.id===o.manifest.id})))?i[a]=o:i.push(o),this.saveInstalledPlugins({installedPlugins:i})):(i=this.getInstalledPlugins(),o.enabled=!0,i.push(o),this.saveInstalledPlugins({installedPlugins:i}),So.showDialog({title:t.t({key:"installation-succeed"}),content:t.t({key:"plugin"})+" "+o.manifest.id+" version"+o.manifest.versions[o.manifest.versions.length-1]+" "+t.t({key:"installation-succeed"})+". "+t.t({key:"press-ok-to-reload"}),okAction:function(){return location.reload()}})),[2]):(Pt.showToast({text:"".concat(t.t({key:"plugin"})," 「").concat(o.manifest.id,"」 ").concat(t.t({key:"psv-check-failed-installation-denied"}))}),[2])}}))}))},e.prototype.uninstallPlugin=function(e){var n=e.manifest.id;Gt.draw();try{var r=this.getInstalledPlugins().filter((function(e){return e.manifest.id!==n}));this.saveInstalledPlugins({installedPlugins:r}),So.showDialog({title:t.t({key:"uninstallation-succeed"}),content:"插件「".concat(n,"」卸载完成，点击「好」以刷新页面。"),okAction:function(){return location.reload()}})}catch(e){Pt.showToast({text:"插件解除安装失败，在尝试解除安装插件「".concat(n,"」时出现错误，请再试一次。")}),Jo.error({message:JSON.stringify(e)})}Gt.destroy()},e.prototype.dangerUninstallPluginWithoutReloadAndNotice=function(e){var t=e.manifest.id;Gt.draw();try{var n=this.getInstalledPlugins().filter((function(e){return e.manifest.id!==t}));this.saveInstalledPlugins({installedPlugins:n})}catch(e){Pt.showToast({text:"插件解除安装失败，在尝试解除安装插件「".concat(t,"」时出现错误，请再试一次。")}),Jo.error({message:JSON.stringify(e)})}Gt.destroy()},e.prototype.uninstallBridgedPlugin=function(){var e=this.getInstalledPlugins().filter((function(e){return!0===e.manifest.bridged}));if(0!==e.length){var n=e[0].manifest.id;if(n)try{var r=this.getInstalledPlugins().filter((function(e){return e.manifest.id!==n}));this.saveInstalledPlugins({installedPlugins:r}),Jo.success({message:t.t({key:"uninstalled-bridged-plugin"})+n}),Pt.showToast({text:t.t({key:"uninstalled-bridged-plugin"})+n+t.t({key:"please-reload-page"})})}catch(e){Pt.showToast({text:t.t({key:"uninstall-bridged-plugin-failed"})+n+t.t({key:"please-try-again"})}),Jo.error({message:JSON.stringify(e)})}}},e.prototype.checkIfInstalled=function(e){var t=e.pluginPack,n=this.getInstalledPlugins(),r=!1;return n.forEach((function(e){e.manifest.id===t.manifest.id&&(r=!0)})),r},e.prototype.getInstalledPlugins=function(){var e=Zo.getPlugins();return e||(e=[],this.saveInstalledPlugins({installedPlugins:e})),e},e.prototype.saveInstalledPlugins=function(e){var t=e.installedPlugins;Zo.updatePluginsStorage({newPlugins:t})},e.prototype.getSelfPreference=function(e){var t=e.manifest;return this.getInstalledPlugins().find((function(e){return e.manifest.id===t.id})).manifest.settings},e.prototype.saveSelfPreference=function(e){var t=e.manifest,n=e.settings,r=this.getInstalledPlugins();r.find((function(e){return e.manifest.id===t.id})).manifest.settings=n,this.saveInstalledPlugins({installedPlugins:r})},e.prototype.initializePluginExecutionAndSetTrigger=function(){return vo(this,void 0,void 0,(function(){var e,n,r,a,i,o,s=this;return wo(this,(function(l){switch(l.label){case 0:if(e=this.getInstalledPlugins(),n=[],0===e.length)return[2];r=function(e){var r,a,i,o,l;return wo(this,(function(c){switch(c.label){case 0:return e.enabled?(r=e.self,a=e.manifest,i=!0,[4,Promise.all(a.requestedAPIs.map((function(e){return vo(s,void 0,void 0,(function(){return wo(this,(function(t){return this.apiImplementations[e]?[2,{name:e,target:this.apiImplementations[e]}]:(Jo.error({message:"Error loading plugin tombstone ".concat(a.id,", cannot resolve API ").concat(e," of undefined.")}),Pt.showToast({text:"插件「".concat(a.id,"」请求了一个未定义的API「").concat(e,"」，因此拒绝载入此插件。")}),i=!1,[2,void 0])}))}))})))]):[2,"continue"];case 1:if(o=c.sent(),!i)return[2,"continue"];if((l=o.filter((function(e){return void 0!==e}))).length===a.requestedAPIs.length)try{n.push({self:r,manifest:a,args:l,executed:!1})}catch(e){Jo.error({message:"Error creating plugin tombstone ".concat(a.id,": ").concat(JSON.stringify(e))}),So.showDialog({title:t.t({key:"request-reload"}),content:"插件载入器在生成插件「".concat(a.id,"」的墓碑中出现错误").concat(e,"，因此AcFun Evolved已中止运行，按下「好」以重新启动AcFun Evolved."),okAction:function(){return location.reload()}})}return[2]}}))},a=0,i=e,l.label=1;case 1:return a<i.length?(o=i[a],[5,r(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return this.tombstones=n,[4,this.ferryman()];case 5:return l.sent(),[2]}}))}))},e.prototype.ferryman=function(){return vo(this,void 0,void 0,(function(){var e,t=this;return wo(this,(function(n){switch(n.label){case 0:return e=function(e){return vo(t,[e],void 0,(function(e){var t,n,r,a,i,o,s,l,c=this,u=e.currentUrl;return wo(this,(function(e){for(t=this.tombstones,n=0,r=t;n<r.length;n++)if(!(a=r[n]).executed&&(i=a.self,o=a.args,(s=a.manifest).trigger.matches&&s.trigger.matches.length>0&&(l=s.trigger.matches.flatMap((function(e){return ln[e]||[]})),l.some((function(e){return e.test(u)})))))try{Jo.info({message:"executed ".concat(s.id)}),(new(Function.bind.apply(Function,Io(Io([void 0],o.map((function(e){return e.name})),!1),["manifest","getSelfPreference",i],!1)))).apply(void 0,Io(Io([],o.map((function(e){return e.target})),!1),[s,function(e){var t=e.manifest;return c.getSelfPreference({manifest:t})}],!1)),a.executed=!0}catch(e){Jo.error({message:"Error ferrying plugin ".concat(s.id,": ").concat(JSON.stringify(e))}),Pt.showToast({text:"摆渡人在执行插件「".concat(s.id,"」中出现错误").concat(JSON.stringify(e),"，因此已中止运行此插件。")})}return this.tombstones=t,[2]}))}))},[4,e({currentUrl:window.location.href})];case 1:return n.sent(),un.urlChange((function(n){return vo(t,void 0,void 0,(function(){return wo(this,(function(t){switch(t.label){case 0:return[4,e({currentUrl:n})];case 1:return t.sent(),[2]}}))}))})),[2]}}))}))},e.prototype.wakeUpBuildInPlugins=function(){"full"!==Fo.getPreference({category:"developer",k:"psv"})&&Vn.wakeUp(),Bn.wakeUp()},e.prototype.extractAndInstallPlugin=function(e){var n=this,r=e.compressedData;So.showDialog({title:t.t({key:t.t({key:"wants-to-extract-and-install-plugin-package"})}),content:t.t({key:"do-you-really-want-to-do-that"}),okAction:function(){return vo(n,void 0,void 0,(function(){var e,n,a,i,o;return wo(this,(function(s){switch(s.label){case 0:Gt.draw(),s.label=1;case 1:return s.trys.push([1,3,,4]),(e=mo.inflate(new Uint8Array(r))).buffer?(n=(0,bo.P)(e.buffer))&&0!==n.length?(a=n[0],a=(new TextDecoder).decode(a.fileData),i=JSON.parse(a),[4,this.installPlugin({pluginPack:i,bridged:!1})]):(Pt.showToast({text:t.t({key:"no-files-extracted-from-the-compressed-data"})}),[2]):(Pt.showToast({text:t.t({key:"decompressed-data-does-not-contain-valid-buffer-property"})}),[2]);case 2:return s.sent(),[3,4];case 3:return o=s.sent(),Jo.error({message:"Error extracting and installing plugin package: ".concat(JSON.stringify(o))}),Pt.showToast({text:t.t({key:"error-extracting-and-installing-plugin-package"})}),[3,4];case 4:return Gt.destroy(),[2]}}))}))},cancelAction:function(){return Pt.showToast({text:"canceled"})}})},e.prototype.downloadAndInstallPluginPack=function(e){var n=this,r=e.manifest,a=xo.pluginDownloadURL({manifest:r});So.showDialog({title:xo.MASTER_MANIFEST.id+" "+t.t({key:"wants-to-download-and-install-plugin-package"}),content:t.t({key:"download-url"})+": ["+a+"] | "+t.t({key:"target-plugin-id"})+r.id,okAction:function(){return vo(n,void 0,void 0,(function(){var e,n,r,i,o,s;return wo(this,(function(l){switch(l.label){case 0:return Gt.draw(),[4,Ro.monkey({method:"GET",url:a,responseType:"arraybuffer"})];case 1:e=l.sent(),l.label=2;case 2:return l.trys.push([2,4,,5]),n=mo.inflate(e),r=(0,bo.P)(n),i=r[0],o=JSON.parse((new TextDecoder).decode(i.fileData)),[4,this.installPlugin({pluginPack:o,bridged:!1})];case 3:return l.sent(),[3,5];case 4:return s=l.sent(),Pt.showToast({text:t.t({key:"error-extracting-and-installing-plugin-package"})}),console.error("解压缩失败",s),[3,5];case 5:return Gt.destroy(),[2]}}))}))},cancelAction:function(){return Pt.showToast({text:t.t({key:"canceled"})})}})},e.prototype.dangerDownloadAndInstallPluginPackWithoutUserConfirm=function(e){return vo(this,arguments,void 0,(function(e){var n,r,a,i,o,s,l,c=e.manifest;return wo(this,(function(e){switch(e.label){case 0:return n=xo.pluginDownloadURL({manifest:c}),Gt.draw(),[4,Ro.monkey({method:"GET",url:n,responseType:"arraybuffer"})];case 1:r=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),a=mo.inflate(r),i=(0,bo.P)(a),o=i[0],s=JSON.parse((new TextDecoder).decode(o.fileData)),[4,this.installPlugin({pluginPack:s,bridged:!1})];case 3:return e.sent(),[3,5];case 4:return l=e.sent(),Pt.showToast({text:t.t({key:"error-extracting-and-installing-plugin-package"})}),console.error("解压缩失败",l),[3,5];case 5:return Gt.destroy(),[2]}}))}))},e}();const Ao=new No;var To=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},ko=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const _o=new(function(){function n(){}return n.prototype.getPluginLatestVersion=function(e){var t=e.manifest;return t.versions[t.versions.length-1]},n.prototype.checkSelfUpdate=function(){return To(this,void 0,void 0,(function(){var t,n,r,a,i;return ko(this,(function(o){switch(o.label){case 0:return t=xo.getSelfLatestVersionManifestURL(),[4,Ro.monkey({method:"GET",url:t,responseType:"text"})];case 1:return n=o.sent(),r=JSON.parse(n),a=r[r.length-1],i=e.compareVersion({version1:e.getCurrentVersion(),version2:a.version+" "+a.versionTag,target:Fo.getPreference({category:"general",k:"updateRuntimeTo"})}),[2,{latestVersionInfo:a,compareResult:i}]}}))}))},n.prototype.checkPluginsUpdate=function(){return To(this,void 0,void 0,(function(){var e,t,n,r,a,i,o,s,l,c;return ko(this,(function(u){switch(u.label){case 0:return[4,Ro.monkey({method:"GET",url:xo.bigManifestURL()})];case 1:if(e=u.sent(),0===(t=Ao.getInstalledPlugins()).length)return[2,[]];for(n=JSON.parse(e),r=[],a=0,i=n;a<i.length;a++)for(o=i[a],s=0,l=t;s<l.length;s++)c=l[s],o.id===c.manifest.id&&o.versions[o.versions.length-1]!==c.manifest.versions[c.manifest.versions.length-1]&&r.push({latestRelease:o,currentRelease:c});return[2,r]}}))}))},n.prototype.updateSelf=function(){Zo.localSet({k:"selfUpdateRecord",v:{timestamp:r.getTimestamp()}}),window.open(xo.getSelfLatestScriptURL())},n.prototype.updatePlugin=function(e){return To(this,arguments,void 0,(function(e){var t=e.manifest,n=e.remainingUpdatablePlugins;return ko(this,(function(e){switch(e.label){case 0:return 0===n.length&&Zo.localSet({k:"pluginsUpdateRecord",v:{timestamp:r.getTimestamp()}}),Ao.dangerUninstallPluginWithoutReloadAndNotice({manifest:t}),[4,Ao.dangerDownloadAndInstallPluginPackWithoutUserConfirm({manifest:t})];case 1:return e.sent(),[2]}}))}))},n.prototype.timeToCheckSelfUpdate=function(){var e=Fo.getPreference({category:"general",k:"updateRuntimeWhen"}),t=Zo.localGet({k:"selfUpdateRecord"});if(!t){var n=r.getTimestamp();Zo.localSet({k:"selfUpdateRecord",v:{timestamp:n}}),t={timestamp:n}}if("startup"===e)return!0;if("daily"===e){var a=t.timestamp;return r.getTimestamp()-a>=864e5}if("weekly"===e){a=t.timestamp;return r.getTimestamp()-a>=6048e5}if("monthly"===e){a=t.timestamp;return r.getTimestamp()-a>=2592e6}return!1},n.prototype.timeToCheckPluginsUpdate=function(){var e=Fo.getPreference({category:"general",k:"updatePluginsWhen"}),t=Zo.localGet({k:"pluginsUpdateRecord"});if(!t){var n=r.getTimestamp();Zo.localSet({k:"pluginsUpdateRecord",v:{timestamp:n}}),t={timestamp:n}}if("startup"===e)return!0;if("daily"===e){var a=t.timestamp;return r.getTimestamp()-a>=864e5}if("weekly"===e){a=t.timestamp;return r.getTimestamp()-a>=6048e5}if("monthly"===e){a=t.timestamp;return r.getTimestamp()-a>=2592e6}return!1},n.prototype.selfReleaseTracker=function(){return To(this,void 0,void 0,(function(){var n,r=this;return ko(this,(function(a){switch(a.label){case 0:return this.timeToCheckSelfUpdate()?[4,this.checkSelfUpdate()]:[3,2];case 1:(n=a.sent()).compareResult<0&&So.showDialog({title:t.t({key:"version"})+" "+n.latestVersionInfo.version+" "+n.latestVersionInfo.versionTag+" "+t.t({key:"has-been-released"}),content:t.t({key:"newer-runtime-version-has-been-released-please-consider-updating"})+" "+t.t({key:"current-version"})+" "+e.getCurrentVersion()+" "+t.t({key:"to"})+" "+n.latestVersionInfo.version+" "+n.latestVersionInfo.versionTag,okAction:function(){return r.updateSelf()},cancelAction:function(){Pt.showToast({text:t.t({key:"cancelled"})})}}),a.label=2;case 2:return[2]}}))}))},n.prototype.pluginsReleaseTracker=function(){return To(this,void 0,void 0,(function(){var e,n=this;return ko(this,(function(r){switch(r.label){case 0:return this.timeToCheckPluginsUpdate()?[4,this.checkPluginsUpdate()]:[3,2];case 1:(e=r.sent()).length>0&&So.showDialog({title:t.t({key:"newer-version-of"})+" "+e[0].latestRelease.id+" "+t.t({key:"has-been-released"}),content:t.t({key:"do-you-want-to-update-this-plugin-from"})+" "+e[0].currentRelease.manifest.versions[e[0].currentRelease.manifest.versions.length-1]+" "+t.t({key:"to"})+" "+e[0].latestRelease.versions[e[0].latestRelease.versions.length-1],okAction:function(){return To(n,void 0,void 0,(function(){return ko(this,(function(t){switch(t.label){case 0:return[4,this.updatePlugin({manifest:e[0].latestRelease,remainingUpdatablePlugins:e.slice(1)})];case 1:return t.sent(),[2]}}))}))},cancelAction:function(){Pt.showToast({text:t.t({key:"cancelled"})})}}),r.label=2;case 2:return[2]}}))}))},n}());const xo=new(function(){function n(){this.ANIMATION_DURATION=200,this.TOAST_DURATION=2e3,this.DEBOUNCE_DURATION=500,this.MASTER_MANIFEST={icon:"data:image/svg+xml;base64,IDxzdmcgIHZlcnNpb249IjEuMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjkwMC4wMDAwMDBwdCIgaGVpZ2h0PSIzMDAuMDAwMDAwcHQiIHZpZXdCb3g9IjAgMCA5MDAuMDAwMDAwIDMwMC4wMDAwMDAiICBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0Ij4gIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLDMwMC4wMDAwMDApIHNjYWxlKDAuMTAwMDAwLC0wLjEwMDAwMCkiIGZpbGw9IiNmZDRjNWQiIHN0cm9rZT0ibm9uZSI+IDxwYXRoIGQ9Ik03NDUzIDI0OTcgYy0yIC00IDIgLTIwIDEwIC0zNSA4IC0xNSAyNyAtNTEgNDIgLTgxIGwyNyAtNTMgMjQ2IDMgYzIwMSAzIDI0NiAyIDI1MCAtMTAgMiAtNyAxIC0xNiAtNCAtMjAgLTE4IC0xMyAtNjQgLTg4IC02NCAtMTA0IDAgLTIwIDMgLTIwIC0xODYgLTE3IGwtMTUxIDIgLTU5IC00NCBjLTMyIC0yNSAtOTAgLTY1IC0xMjkgLTkwIC01MyAtMzUgLTc1IC01NyAtOTEgLTkwIC02NSAtMTMzIC03NiAtMTU2IC05NCAtMTgzIC0zNiAtNTYgLTUxIC04NyAtNDYgLTkyIDMgLTQgMTY5IC02IDM2OCAtNSAzNjAgMSAzNjMgMSAzODAgMjIgMTAgMTIgMTggMjggMTggMzYgMCA3IDkgMjggMjAgNDYgMjMgMzggMjYgNjQgOCA3MCAtMTYgNSAtMzMwIC04IC00MTUgLTE3IC02MyAtNyAtNjMgLTYgLTYzIDE5IDAgMTQgNCAyNiA4IDI2IDUgMCAxNCAxMCAyMCAyMyA3IDEyIDIzIDQwIDM2IDYyIGwyNCAzOSAxNjAgLTMgMTYwIC0zIDU0IDM5IGMyOSAyMSA4NiA2MSAxMjcgODggNDggMzMgNzggNjAgODYgODAgMjAgNDkgMjQgNTggNDggMTAwIDYxIDEwNCA5NiAxNzYgOTIgMTg4IC00IDkgLTEwNCAxMiAtNDQxIDEyIC0yNDAgMCAtNDM4IC0zIC00NDEgLTh6IG02OTEgLTEwMyBjMjcgLTEwIDE5IC02MiAtMTUgLTEwNSAtMzcgLTQ3IC00NiAtNDkgLTQxIC02IDMgMjYgLTIgMzYgLTI3IDU1IC01MiAzOCAtMzkgNTUgNDYgNjEgMTIgMCAyOCAtMiAzNyAtNXogbS02NzkgLTQ4NyBjLTQgLTE1IDIgLTM1IDE5IC02MCA0MyAtNjIgMzkgLTcyIC0yNCAtNzMgLTkzIC0xIC0xMDQgMjkgLTM5IDEwNyAyMiAyNyA0MyA0OSA0NSA0OSAyIDAgMiAtMTAgLTEgLTIzeiIvPiA8cGF0aCBkPSJNNjUwMCAyNDczIGMwIC0xMiA0IC0yNCA5IC0yOCA1IC0zIDIyIC0yNyAzOCAtNTMgbDI4IC00NyAwIC0zMzUgMCAtMzM1IDEyNSAtMyAxMjUgLTIgMjggNDcgYzE1IDI3IDU2IDg5IDkyIDEzOCAzNSA1MCA5NCAxMzMgMTMwIDE4NSAzNiA1MiA4NCAxMjAgMTA2IDE1MCAyMiAzMCA1NSA3OCA3NCAxMDUgMTkgMjggNDIgNjEgNTIgNzUgOSAxNCAzMCA0MCA0NSA1OCAxNSAxOCAyOCA0MSAyOCA1MiAwIDE3IC03IDE4IC0xMTcgMTMgLTg4IC00IC0xMjEgLTkgLTEyOCAtMjAgLTUgLTggLTI5IC00MiAtNTIgLTc2IC0yMyAtMzQgLTY4IC0xMDAgLTk5IC0xNDcgLTYyIC05MSAtNzMgLTEwOCAtMTExIC0xODIgLTE2IC0zMyAtMzAgLTQ4IC00NCAtNDggLTIzIDAgLTI1IC0xNSAtMyAtMjQgOSAtNCAzMiAzIDUxIDE0IDY2IDM5IDcwIDE5IDE2IC03MSAtMjEgLTMzIC00MyAtNzAgLTQ5IC04MSAtNyAtMTEgLTI3IC0zNSAtNDUgLTU0IC00MCAtNDIgLTEwMSAtNDggLTExOSAtMTMgLTggMTMgLTExIDk5IC0xMSAyNDcgMCAxMjUgMSAyNTMgMCAyODUgMCA2MyAxMCA3MSAzOSAzMCAxNCAtMjEgMjEgLTUzIDI2IC0xMjggNiAtOTQgMjkgLTE5NSA0NCAtMTk1IDI0IDAgNjQgNDMxIDQzIDQ1MyAtNSA1IC03OSA5IC0xNjUgMTAgLTE1NSAyIC0xNTYgMiAtMTU2IC0yMHoiLz4gPHBhdGggZD0iTTE1ODcgMjExNCBjLTEwIC0xMSAtOSAtNTIgMiAtNTkgNiAtMyAyNiAtMzggNDYgLTc3IDIwIC00MCA0MiAtNzkgNTAgLTg4IDcgLTggMTYgLTI3IDIwIC00MSA2IC0yMiAtMyAtMzggLTUyIC05NSAtOTcgLTExNSAtMTM3IC0xNjQgLTE1NSAtMTkyIC0xMCAtMTUgLTMyIC00MyAtNTEgLTYyIC0xOCAtMTkgLTQ2IC01NCAtNjEgLTc4IC0xNiAtMjQgLTM1IC00NiAtNDIgLTUwIC03IC00IC0yNyAtMjggLTQ2IC01MyAtMzIgLTQ2IC05OSAtMTI5IC0xNDEgLTE3OSAtMTIgLTE0IC01MSAtNjQgLTg3IC0xMTEgLTY2IC04NiAtMTE5IC0xNTMgLTE3NiAtMjE4IC0yOSAtMzUgLTEwOSAtMTM1IC0xNDkgLTE4OSAtMTEgLTE1IC0zOSAtNDUgLTYxIC02NyAtMjMgLTIyIC00NCAtNDkgLTQ1IC02MCAtNCAtMjAgMiAtMjAgMTAwOSAtMjMgbDEwMTIgLTIgMCAzNiBjMCAyMCAtNyA2MyAtMTYgOTYgLTggMzMgLTEzIDcyIC05IDg3IDMgMTQgLTIgNjQgLTEwIDExMSAtOCA0NyAtMTIgMTA1IC05IDEzMCAzIDI1IDEgNjUgLTYgODkgLTYgMjQgLTEzIDg1IC0xNSAxMzUgLTIgNTAgLTkgMTA3IC0xNCAxMjYgLTYgMTkgLTExIDYyIC0xMSA5NSAwIDMzIC03IDk1IC0xNSAxMzggLTggNDMgLTE1IDEwNCAtMTUgMTM1IC0xIDMyIC02IDg3IC0xMyAxMjMgLTggMzggLTEwIDc3IC01IDk0IDQgMTYgMyA0NiAtMiA2NyAtNiAyMCAtMTEgNjQgLTExIDk3IC0xIDM0IC02IDY0IC0xMSA2NyAtNiA0IC0yMDIgNyAtNDM3IDggLTIzNCAxIC00MzUgNSAtNDQ2IDEwIC0xMSA0IC0yNCA0IC0yOCAweiBtNzU2IC0xMDEgYzQxIC00IDYxIC0xMSA2NyAtMjQgMTQgLTI1IDg4IC02OTAgOTYgLTg2NCAzIC00OSA5IC0xMDMgMTQgLTEyMCA0IC0xNiAxMSAtNzcgMTUgLTEzNSA0IC01OCAxMSAtMTI1IDE1IC0xNTAgMTEgLTU5IDIgLTEzMCAtMTcgLTEzMCAtNyAwIC0xNiAtNiAtMTkgLTEzIC0zIC05IC0yMSAtMTQgLTUyIC0xMyAtMjYgMCAtMTU5IC0xIC0yOTcgLTMgLTU5OSAtNiAtMTIyNyAwIC0xMjcxIDExIC0yNCA3IC00NCAxNiAtNDQgMjAgMCAyMiA2MiAxMDggMTk1IDI2OCAzOSA0NyA5NyAxMjEgMTMwIDE2NSAzMyA0NCAxMDIgMTMyIDE1NSAxOTUgNTMgNjMgMTAzIDEyNiAxMTIgMTQwIDkgMTQgNDUgNTkgODIgMTAwIDM2IDQxIDY2IDgwIDY2IDg2IDAgNiAxMCAxOSAyMSAzMCAzMyAyOSAxMjYgMTU2IDEzOSAxODkgNyAxNyAxNyA0MCAyMyA1MyA4IDE3IDYgMzcgLTExIDg2IC0yNSA3MyAtMjcgODcgLTEwIDEwNCAxMyAxMyA0NzkgMTcgNTkxIDV6Ii8+IDxwYXRoIGQ9Ik0yMDQzIDE3NTAgYy0xMiAtNSAtMzEgLTE4IC00MiAtMjkgLTEyIC0xMiAtMjUgLTIxIC0zMCAtMjEgLTYgMCAtNTAgLTUxIC0xMDAgLTExMiAtNTAgLTYyIC0xMDAgLTEyNCAtMTExIC0xMzggLTExIC0xNCAtMzggLTQ3IC02MCAtNzUgLTIyIC0yNyAtNDkgLTYxIC02MCAtNzUgLTExIC0xNCAtNDIgLTUyIC02NyAtODUgLTI2IC0zMyAtNzAgLTg3IC05OCAtMTIwIC0yOCAtMzMgLTY3IC04NSAtODUgLTExNSAtMTkgLTMwIC0zNyAtNTcgLTQxIC02MCAtMjIgLTE4IC00NCAtMTA2IC0yOSAtMTE1IDE3IC0xMCAyMDggMjA1IDI5NiAzMzMgMjAgMjggNDAgNTIgNDUgNTIgNCAwIDIyIDIxIDM5IDQ2IDE3IDI1IDQyIDU4IDU1IDcyIDMzIDM2IDEwNyAxMzAgMTIxIDE1NCA2IDExIDIzIDMxIDM2IDQ2IDQwIDQ0IDExMiAxNDQgMTMzIDE4NiAxMSAyMSAyOCA0MSAzNyA0NCAxMCAyIDE1IDggMTIgMTMgLTYgMTEgLTIyIDExIC01MSAtMXoiLz4gPHBhdGggZD0iTTIxMjQgMTY5MyBjLTQgLTE2IC0xMSAtMzMgLTE2IC00MCAtNiAtNyAtOCAtMzYgLTUgLTY1IDMgLTI5IDEwIC0xMDcgMTYgLTE3MyA2IC02NiAxNSAtMTM4IDIwIC0xNjAgNiAtMjIgMTEgLTY1IDExIC05NyAwIC0zMSA3IC05MSAxNSAtMTMzIDggLTQyIDEyIC04OSA5IC0xMDQgLTQgLTE4IDIgLTQ0IDE1IC03MSAyNiAtNTUgMTcgLTYzIC02NCAtNTIgLTEwNyAxMyAtNjY0IDYgLTcxNCAtMTAgbC00NCAtMTMgMjYgLTMwIDI1IC0zMCAzNTQgMCBjMzkzIDAgMzY3IC00IDQ0NiA3MSBsMzcgMzUgLTIgODggYy0xIDQ4IC0xMCAxNTUgLTE4IDIzNyAtOSA4MiAtMjMgMjEwIC0zMCAyODQgLTE4IDE2OCAtMjcgMjE2IC00OCAyNTggLTIxIDM5IC0yNSA0MCAtMzMgNXoiLz4gPHBhdGggZD0iTTMwODcgMjExNCBjLTE0IC0xNCAtNyAtNDQgMjIgLTg2IDE2IC0yNCAzMiAtNTQgMzYgLTY4IDQgLTE0IDE5IC00MiAzMSAtNjIgMTMgLTIxIDI0IC00NSAyNCAtNTMgMCAtOSA2IC0xOCAxNCAtMjEgOCAtMyAxOCAtMTkgMjEgLTM1IDUgLTIyIC0xIC00MiAtMjkgLTg4IC0yMCAtMzIgLTUyIC05MiAtNzEgLTEzMiAtMTkgLTQxIC0zOSAtODEgLTQ0IC04OSAtNSAtOCAtODAgLTE1NyAtMTY2IC0zMzAgLTg2IC0xNzMgLTE2MiAtMzIzIC0xNjggLTMzMiAtOSAtMTQgLTUgLTI2IDIxIC02MyAxOCAtMjUgMzIgLTQ4IDMyIC01MSAwIC01IDgyIC0xODIgOTkgLTIxNCA3IC0xMyA3NiAtMTUgNTI3IC0xNSBsNTE5IDAgMjIgNDUgYzEyIDI1IDMzIDcwIDQ3IDEwMCAzMSA2NSA0MSA4MiA4MCAxMzMgMjMgMzEgMjYgNDAgMTUgNTMgLTEwIDEyIC0yNCAxNCAtNjAgOSAtMjYgLTQgLTE3MiAtNyAtMzI1IC03IC0yNTcgMCAtNDYzIC0xMCAtNDg1IC0yNCAtMTcgLTEwIDIzIC01MyA1NCAtNTkgMTggLTMgMTYzIC03IDMyMyAtOSAxNjAgLTIgMjk2IC02IDMwMyAtMTAgMTUgLTEwIDE0IC01MiAtNCAtODYgLTMxIC01OSAtMzggLTYwIC00ODAgLTYwIC00OTMgMCAtNDY2IC03IC01NDEgMTM1IC0zMSA2MCAtMzUgNzcgLTMxIDEyMCA0IDQ5IDMxIDExMyA4NyAyMTAgMTYgMjggMzUgNjYgNDEgODUgNyAxOSAzNCA3NCA2MCAxMjMgMjYgNDkgNTEgOTggNTUgMTEwIDQgMTIgMTQgMzMgMjQgNDcgMTkgMjcgNjAgMTA4IDgwIDE1NSA3IDE3IDI3IDU5IDQ1IDk1IDUxIDEwMSA1MyAxNjUgOCAyNDYgLTIwIDM1IC0yNyAxMDIgLTEzIDExOSAxMSAxMyA5NCAxNSA2NDkgMTUgMzUwIDAgNjQ2IC0zIDY1OSAtNiAzMyAtOSAyOSAtNTcgLTEwIC0xMjIgLTI0IC0zOCAtNDEgLTU1IC02MCAtNTkgLTE2IC0zIC0yOCAtOSAtMjggLTEzIDAgLTQgLTEyIC0xMSAtMjcgLTE1IC0xNiAtMyAtMzUgLTEzIC00MyAtMjAgLTggLTcgLTQ0IC0yMyAtODAgLTM1IC0zNiAtMTIgLTkwIC0zMyAtMTIwIC00NyAtNjkgLTMxIC0xMDEgLTI0IC0xMTEgMjYgLTQgMTggLTE0IDQwIC0yMyA0OSAtMTUgMTUgLTE2IDE0IC0xNiAtMTQgMCAtMjEgLTEwIC0zOSAtMzAgLTU5IC0xNiAtMTYgLTMwIC0zNCAtMzAgLTM5IDAgLTYgLTI1IC00OSAtNTUgLTk2IC0zMCAtNDcgLTU1IC05MSAtNTUgLTk4IDAgLTI3IDMyIC0yNCA3NSA3IDI0IDE3IDgxIDQ5IDEyNyA3MiA0NiAyMiA5NyA0OSAxMTMgNTkgMTcgMTAgMzkgMTkgNTAgMTkgMTIgMSAyNSA1IDMwIDkgNiA1IDMwIDE1IDU1IDIyIDI1IDcgNTYgMTkgNzAgMjYgNjcgMzQgMTQwIDY0IDE1NSA2NCAxOCAwIDc1IDU1IDc1IDcyIDAgMTYgNzggMTcyIDEwNSAyMDggMjYgMzYgMzMgNzYgMTMgODIgLTYgMiAtNDMgMCAtODIgLTQgLTg1IC0xMSAtMTUyMyAtNSAtMTU1MSA2IC0xMSA0IC0yNCA0IC0yOCAweiIvPiA8cGF0aCBkPSJNNDkwOCAyMTEyIGMtMzAgLTYgLTI5IC0zMyAyIC03MiAxNiAtMjEgMzAgLTQyIDMwIC00OCAwIC01IDcgLTE1IDE1IC0yMiA4IC03IDE1IC0yMCAxNSAtMjkgMCAtOSAyMCAtNTIgNDUgLTk1IGw0NSAtNzkgLTI4IC00MSBjLTI4IC00MiAtNDQgLTczIC02MiAtMTE2IC01IC0xNCAtMTQgLTMyIC0xOCAtNDAgLTI1IC00NCAtODUgLTE2NCAtMTAyIC0yMDIgLTYgLTEzIC0xNCAtMzEgLTIwIC00MCAtMjQgLTQzIC0zMSAtNTYgLTUxIC05OCAtMjUgLTU0IC01NiAtMTE2IC03NSAtMTUwIC03IC0xNCAtMjcgLTU0IC00NCAtOTAgLTMyIC02NyAtMzggLTc4IC03NyAtMTQyIGwtMjMgLTM4IDE5IC0zNyBjMTEgLTIxIDM2IC03MiA1NiAtMTEzIDIwIC00MSA0OCAtMTAwIDYzIC0xMzAgbDI3IC01NSA0ODQgMCBjNDIwIDAgNDg1IDIgNDkyIDE1IDQgOCAyNCA1MSA0NSA5NSAyMCA0MyA1NCAxMDggNzYgMTQzIDQ4IDc4IDQxIDk3IC0zMSA4OCAtMjUgLTMgLTE4NyAtOCAtMzYwIC0xMiAtMTczIC0zIC0zMjQgLTEwIC0zMzcgLTE0IC0xMiAtNSAtMzIgLTYgLTQ0IC0zIC0zMiA5IC0yMiAtMTYgMTggLTQzIDI5IC0yMCA0OSAtMjIgMjI0IC0yNyAxMDYgLTMgMjM1IC01IDI4NyAtNSA1MSAwIDk4IC01IDEwNCAtMTEgNyAtNyA1IC0yMyAtOCAtNTAgLTI5IC02NCAtNTQgLTgyIC0xMjcgLTg3IC03NyAtNiAtOTUgLTcgLTEzMyAtNSAtMTYgMSAtMTQ5IDEgLTI5NCAxIC0yOTIgMCAtMzI1IDUgLTM1OCA1MyAtNDMgNjMgLTgzIDE1MyAtODMgMTg3IDAgMzAgNzMgMTk2IDE0NyAzMzUgMjMgNDMgMTQ3IDI5NCAxNjYgMzM1IDkgMTkgMjUgNTEgMzUgNzAgNDAgNzEgODAgMTc2IDg2IDIyMyA0IDM3IDEgNTkgLTE5IDEwMyAtMzMgNzUgLTQ0IDExOSAtMzQgMTM1IDcgMTIgMTA2IDE1IDU2NiAxNyAzMDcgMiA1OTEgMCA2MzEgLTMgNjUgLTYgNzIgLTkgNzIgLTI4IC0xIC0zMCAtMzMgLTk5IC01NSAtMTE3IC0xNSAtMTIgLTY3IC0xNSAtMzA5IC0xNyAtNDc0IC0yIC00MTYgNCAtNDc5IC00OCAtNDkgLTQwIC02OSAtNjcgLTEyNCAtMTcwIC0zMSAtNTkgLTQ4IC0xMzMgLTM5IC0xNzAgOCAtMzMgMTggLTMxIDM2IDUgOCAxNiA0MCA2OSA3MCAxMTcgMzAgNDggNjIgMTExIDcyIDEzOCAxMSAzMiAyMiA0OCAzMCA0NSA3IC0yIDE5MiAtNiA0MTAgLTggbDM5NyAtMyAxNSAzMCBjOSAxNiAxNiAzNiAxNyA0MyAwIDcgMTMgMzggMjkgNjggNTAgOTcgNzAgMTM0IDg0IDE1OSA4IDEzIDEyIDI5IDEwIDM1IC0zIDggLTIwNCAxMCAtNzIyIDggLTM5NSAtMiAtNzQ3IDEgLTc4MyA1IC0zNSA1IC03MSA3IC04MSA1eiIvPiA8cGF0aCBkPSJNMzc3NiAxODUyIGMtNDYgLTQgLTExMSAtNDYgLTE0OCAtOTQgLTE0IC0xOSAtNzAgLTEyMSAtMTI0IC0yMjggLTUzIC0xMDcgLTEwMyAtMjAyIC0xMTAgLTIxMCAtNiAtOCAtMTUgLTI5IC0xOSAtNDcgLTMgLTE3IC0xMiAtMzcgLTIwIC00MyAtNyAtNiAtMTYgLTIzIC0yMCAtMzggLTQgLTE1IC0xNyAtNDAgLTI5IC01NyAtMjYgLTM1IC01MCAtODYgLTk2IC0yMDQgLTI2IC02NSAtMzEgLTg5IC0yNCAtMTA5IDExIC0zMSAzNCAtNDEgMzQgLTE1IDAgMTAgMTAgMzEgMjMgNDYgMzUgNDQgNTUgODIgMjIzIDQxNyA4NyAxNzMgMTY4IDMzMSAxNzkgMzUwIDEyIDE5IDMyIDYzIDQ1IDk4IDI0IDYxIDI1IDYyIDU1IDU1IDE2IC01IDgwIC03IDE0MiAtNyA5NiAyIDExNiA1IDEzOCAyMiBsMjYgMjEgLTI1IDE2IGMtMTQgOSAtNDIgMTggLTYzIDIxIC03NSA3IC0xNDkgMTAgLTE4NyA2eiIvPiA8cGF0aCBkPSJNNTkyNSAxNDYwIGMtMzMgLTQgLTE1MCAtOCAtMjYwIC05IC0yNTEgLTIgLTMzOCAtMjIgLTI3MyAtNjUgMTggLTEyIDY2IC0xNiAyMjIgLTE5IDE3NCAtMyAyMDEgLTYgMjEyIC0yMSAxNCAtMjAgNCAtNjkgLTIxIC05NiAtMjggLTMxIC05MyAtMzggLTMzOSAtMzkgbC0yMzkgMCAtNDAgLTI4IGMtNTAgLTM1IC05MCAtODggLTEzMiAtMTc4IC01MSAtMTA5IC03MyAtMjEzIC00MiAtMjAzIDI5IDEwIDE3NSAyNTggMTc2IDMwMCAxIDEwIDkgMjEgMTkgMjUgOSA1IDE1NCA2IDMyMiAzIDE2OCAtMyAzMTAgLTQgMzE3IC0yIDkgMyAxMTMgMjAwIDExMyAyMTYgMCAzIDE0IDI2IDMxIDUxIDMwIDQ0IDMzIDc3IDcgNzQgLTcgLTEgLTQwIC01IC03MyAtOXoiLz4gPC9nPiA8L3N2Zz4g",name:"AcFun Evolved Runtime",id:"@wenzi7777/acev2_runtime",versions:[e.getCurrentVersion()],description:"AcFun Evolved Runtime V2.",createdAt:new Date("2024-08-09").getTime()+"",updatedAt:(new Date).getTime()+"",author:"wenzi7777",copyright:"(c)2024 wenzi7777, licensed under the MIT License.",requestedAPIs:[],website:"https://acev2.1205.moe/",trigger:{receiveHandler:!0,matches:["*"]},settings:[]},this.PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAilgGwC2CNm3zSSUzaz7j\ncIM08uKKGGmWs1yoQNUzBsgX/cnuVQsuPL79RDtt5P8/aPwKyzFKcd2kxIzKbLr/\nXTOhPz6miVcRd86HiFJmEC1zO/9FQITMNcN4/xjGGnKZWa80su7CpFdHkTLifLiO\nP2U7qi/yiNOrjEfo4ymCjFToFBYQ2VQ6Te5mnQxvmK9arKwm/wT40OPk9H8YpJnx\nZiPLyCCYhzOQCHHijlc/iI2oNw0UnqLJ4wDsBSnuePC9QWyz3QdV+o//AVZpjGq6\nXWWtEOgGfY5nyOSzp19FbiVgbxV3QX8RWBP3ifPtJhv0D16X1joCELgnqtKbaVkG\nL6+m0r+YSoZojY2HY0159PafKkYg5xhTTCLyXtsWscEFd/PK2sm4Ag/htuGYEX2n\nHH9XGyi1oV/8zeFF4YKe5DlEyxy5KaBnRBGyo4YSfDZD4+PGTponUOaJc1iC/qPu\nYnCFobD55bs2zlDWpJUNLaUIkijFWMwNbtqlRGp5wUnNrFdv8k6L2vR9fUnetxoO\nxowBvt/quZbgpn5K/WVF8QML3dY4clPDGYvYceKPGVCdZUI+NTnfeeH45ldOYSin\n3z+cDYEA7wQaPtu57mRRQOBVUaa5tCP43OJHtlsFjKJmvx4Iw2Z4OEUZZJThZcJG\nyl8yJuhgZ/FJ6NU5dSVzRjkCAwEAAQ==\n-----END PUBLIC KEY-----",this.PAGE_SIZE=8}return n.prototype.baseSelfRepoResourcesURL=function(){var e=Fo.getPreference({category:"general",k:"source"});return"github"===e?"https://raw.githubusercontent.com/wenzi7777/AcFun_Evolved/v2/":"cloudflare"===e?"https://acev2.1205.moe/":"jsdelivr"===e?"https://cdn.jsdelivr.net/gh/wenzi7777/AcFun_Evolved@vv2/":void Pt.showToast({text:t.t({key:"invalid-source-please-select-again"})})},n.prototype.basePluginRepoURL=function(){var e=Fo.getPreference({category:"general",k:"source"});return"github"===e?"https://raw.githubusercontent.com/wenzi7777/acev2_plugins/main/":"cloudflare"===e?"https://acev2-plugins.1205.moe":"jsdelivr"===e?"https://cdn.jsdelivr.net/gh/wenzi7777/acev2_plugins/@main/":void Pt.showToast({text:t.t({key:"invalid-source-please-select-again"})})},n.prototype.baseSelfRepoURL=function(){return"https://github.com/wenzi7777/AcFun_Evolved/"},n.prototype.bigManifestURL=function(){return this.basePluginRepoURL()+"bigManifest.json?t="+r.getTimestamp()},n.prototype.developerKitURL=function(){return this.basePluginRepoURL()+"developer-kit.zip?t="+r.getTimestamp()},n.prototype.pluginDownloadURL=function(e){var t=e.manifest;return"".concat(this.basePluginRepoURL()).concat(t.id,"/").concat(_o.getPluginLatestVersion({manifest:t}),"/raw.json.tar.gz")+"?t="+r.getTimestamp()},n.prototype.getSelfLatestVersionManifestURL=function(){return this.baseSelfRepoResourcesURL()+"versions.json?t="+r.getTimestamp()},n.prototype.getSelfLatestScriptURL=function(){return this.baseSelfRepoResourcesURL()+"dist/acfun.evolved.bundle.min.user.js?t="+r.getTimestamp()},n.prototype.selfReleaseURL=function(){return this.baseSelfRepoURL()+"releases"},n}());var Do=ht.createRoot(),zo=ht.locateElement({tracker:Do.root}),Co=ht.locateElement({tracker:Do.sideMenu}),jo=ht.locateElement({tracker:Do.plugins}),Lo={renderUI:function(e){var t,n=e.canvas,r=e.slot;if(zo){if("root"===r){var a=Yt({canvas:n,slotElement:zo}),i=a.element;t=l=a.tracker,W(i,ht.locateElement({tracker:l})),Ot({target:l,selector:"div.aceSizer"})}else if("sideMenu"===r){var o=Yt({canvas:n,slotElement:Co});i=o.element;t=l=o.tracker,W(i,ht.locateElement({tracker:l})),Ot({target:l,selector:"div.aceSizer"})}else if("plugins"===r){var s=Yt({canvas:n,slotElement:jo});i=s.element;t=l=s.tracker,W(i,ht.locateElement({tracker:l})),Ot({target:l,selector:"div.aceSizer"})}else{var l,c=Yt({canvas:n,slotElement:ht.locateElement({tracker:r})});i=c.element;t=l=c.tracker,W(i,ht.locateElement({tracker:l})),Ot({target:l,selector:"div.aceSizer"})}return Jo.info({message:"UI rendered."}),t}return Jo.error({message:"Root element not found"}),null},unmountUI:function(e){var t=e.tracker,n=ht.locateElement({tracker:t});n&&n.parentElement?(Ot({target:t,selector:"div.aceSizer"}),setTimeout((function(){var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n)}),xo.ANIMATION_DURATION),Jo.info({message:"UI unmounted."})):Jo.error({message:"Element to unmount not found or parent element is missing."})}},Eo=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Oo=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const So=new(function(){function e(){this.canvas=[],this.tracker=[]}return e.prototype.updateCanvas=function(e){var n=this,r=e.title,a=e.content,i=e.trackerTimestamp,o=e.okAction,s=e.cancelAction;this.canvas=s?[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},children:[{type:"window",title:r,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",justifyContent:"space-between"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",padding:"1vw 1vh",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw"},children:[{type:"text",label:a}]}]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:t.t({key:"cancel"}),actions:[function(){return Eo(n,void 0,void 0,(function(){return Oo(this,(function(e){switch(e.label){case 0:return[4,s()];case 1:return e.sent(),this.destroy({trackerTimestamp:i}),[2]}}))}))}]}]},{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:t.t({key:"ok"}),actions:[function(){return Eo(n,void 0,void 0,(function(){return Oo(this,(function(e){switch(e.label){case 0:return[4,o()];case 1:return e.sent(),this.destroy({trackerTimestamp:i}),[2]}}))}))}]}]}]}]}]}]}]}]:[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},children:[{type:"window",title:r,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",justifyContent:"space-between"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",padding:"1vw 1vh",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw"},children:[{type:"text",label:a}]}]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:7,height:3},children:[{type:"button",text:t.t({key:"ok"}),actions:[function(){return Eo(n,void 0,void 0,(function(){return Oo(this,(function(e){switch(e.label){case 0:return[4,o()];case 1:return e.sent(),this.destroy({trackerTimestamp:i}),[2]}}))}))}]}]}]}]}]}]}]}]},e.prototype.existed=function(e){var t=e.tracker,n=!1;return this.tracker.forEach((function(e){e.tracker===t&&(n=!0)})),n},e.prototype.draw=function(){var e=r.getTimestamp()+Math.random();this.updateCanvas({title:"title",content:"content",trackerTimestamp:e,okAction:function(){},cancelAction:function(){}});var t=Lo.renderUI({canvas:this.canvas,slot:"plugins"});return this.tracker.push({tracker:t,timestamp:e}),t},e.prototype.destroy=function(e){var t=e.trackerTimestamp,n=this.tracker.find((function(e){return e.timestamp===t}));this.existed({tracker:n.tracker})&&(Lo.unmountUI({tracker:n.tracker}),this.tracker=this.tracker.filter((function(e){return e.timestamp!==t})))},e.prototype.showDialog=function(e){var t=e.title,n=e.content,a=e.okAction,i=e.cancelAction,o=r.getTimestamp()+Math.random();this.updateCanvas({title:t,content:n,trackerTimestamp:o,okAction:a,cancelAction:i});var s=Lo.renderUI({canvas:this.canvas,slot:"plugins"});return this.tracker.push({tracker:s,timestamp:o}),s},e}());var Uo=function(){return Uo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Uo.apply(this,arguments)},Yo=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Po=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Qo=function(){function e(){}return e.prototype.send=function(e){var t=e.createRequest,n=new XMLHttpRequest,r=t(n),a=r.isText,i=void 0===a||a,o=r.body;return new Promise((function(e,t){n.addEventListener("load",(function(){return e(i?n.responseText:n.response)})),n.addEventListener("error",(function(){return t(n.status)})),n.send(o)}))},e.prototype.withCredentials=function(e){var t=e.createRequest;return function(e){return e.withCredentials=!0,t(e)}},e.prototype.blobRequest=function(e){var t=e.url;return function(e){return e.responseType="blob",e.open("GET",t),{isText:!1}}},e.prototype.getBlob=function(e){var t=e.url;return this.send({createRequest:this.blobRequest({url:t})})},e.prototype.getBlobWithCredentials=function(e){var t=e.url;return this.send({createRequest:this.withCredentials({createRequest:this.blobRequest({url:t})})})},e.prototype.textRequest=function(e){var t=e.url;return function(e){return e.responseType="text",e.open("GET",t),{isText:!0}}},e.prototype.getText=function(e){var t=e.url;return this.send({createRequest:this.textRequest({url:t})})},e.prototype.getTextWithCredentials=function(e){var t=e.url;return this.send({createRequest:this.withCredentials({createRequest:this.textRequest({url:t})})})},e.prototype.jsonRequest=function(e){var t=e.url;return function(e){return e.responseType="json",e.open("GET",t),{isText:!1}}},e.prototype.convertToJson=function(e){return"string"==typeof e?JSON.parse(e):e},e.prototype.getJson=function(e){return Yo(this,arguments,void 0,(function(e){var t,n=e.url;return Po(this,(function(e){switch(e.label){case 0:return[4,this.send({createRequest:this.jsonRequest({url:n})})];case 1:return t=e.sent(),[2,this.convertToJson(t)]}}))}))},e.prototype.getJsonWithCredentials=function(e){return Yo(this,arguments,void 0,(function(e){var t,n=e.url;return Po(this,(function(e){switch(e.label){case 0:return[4,this.send({createRequest:this.withCredentials({createRequest:this.jsonRequest({url:n})})})];case 1:return t=e.sent(),[2,this.convertToJson(t)]}}))}))},e.prototype.postText=function(e){var t=e.url,n=e.text;return this.send({createRequest:function(e){return e.open("POST",t),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),{isText:!1,body:n}}})},e.prototype.postTextWithCredentials=function(e){var t=e.url,n=e.text;return this.send({createRequest:function(e){return e.open("POST",t),e.withCredentials=!0,e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),{isText:!1,body:n}}})},e.prototype.postJson=function(e){var t=e.url,n=e.json;return this.send({createRequest:function(e){return e.open("POST",t),e.setRequestHeader("Content-Type","application/json"),{isText:!1,body:JSON.stringify(n)}}})},e.prototype.postJsonWithCredentials=function(e){var t=e.url,n=e.json;return this.send({createRequest:function(e){return e.open("POST",t),e.withCredentials=!0,e.setRequestHeader("Content-Type","application/json"),{isText:!1,body:JSON.stringify(n)}}})},e.prototype.monkey=function(e){return new Promise((function(t,n){GM_xmlhttpRequest||Jo.error({message:"Cannot resolve function GM_xmlhttpRequest"});var r=Uo(Uo({nocache:!0},e),{onload:function(e){return t(e.response)},onerror:function(e){var t=Uo(Uo({},JSON.parse(JSON.stringify(e))),{toString:function(){return JSON.stringify(this)}});n(t)}});"method"in r||(r.method="GET"),GM_xmlhttpRequest(r)}))},e.prototype.ACEV2Download=function(e){var t=e.object,n=e.filename,r=new Blob([JSON.stringify(t)],{type:"text/plain"}),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download=n,i.style.display="none",document.body.appendChild(i),i.click(),URL.revokeObjectURL(a),document.body.removeChild(i)},e.prototype.ACEV2Upload=function(e){var t=e.readType,n=e.callback,r=document.createElement("input");r.type="file",r.style.display="none",r.addEventListener("change",(function(e){var r,a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(a){var i=new FileReader;i.onload=function(e){var t,r=null===(t=e.target)||void 0===t?void 0:t.result;n({content:r,file:a})},"text"===t?i.readAsText(a):"arrayBuffer"===t&&i.readAsArrayBuffer(a)}else Jo.error({message:"No file selected"})})),document.body.appendChild(r),r.click(),document.body.removeChild(r)},e.prototype.openPageInNewTab=function(e){var n=e.url,r=e.manifest;So.showDialog({title:r.name+" "+t.t({key:"wants-to-open-a-new-tab"}),content:"".concat(t.t({key:"target-url"}),": ").concat(n," \n ").concat(t.t({key:"source-plugin-id"}),": ").concat(r.id," \n ").concat(t.t({key:"ace-v2-runtime-does-not-responsible-for-the-content"})),okAction:function(){return window.open(n)},cancelAction:function(){}})},e}();const Ro=new Qo;var Wo=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Bo=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Go=function(){function e(){this.defaultValue={monkey:{plugins:[],pluginData:[],preferences:{general:{pluginLoadOrder:"when-body-loaded",source:"github",updateRuntimeWhen:"startup",updateRuntimeTo:"stable",updatePluginsWhen:"startup"},visual:{theme:"auto",language:"auto"},developer:{PSV:"full",IPC:"enabled",logLevel:"error"}}},local:[]},this.runtimeStorage=this.defaultValue}return e.prototype.start=function(){return Wo(this,void 0,void 0,(function(){var e,t;return Bo(this,(function(n){switch(n.label){case 0:return Jo.info({message:"StorageService is starting..."}),e=this,t={},[4,this.readMonkey({outputType:"JSON"})];case 1:return e.runtimeStorage=(t.monkey=n.sent(),t.local=this.readLocal({outputType:"JSON"}),t),[4,this.initialize()];case 2:return n.sent(),[2]}}))}))},e.prototype.stop=function(){return Wo(this,void 0,void 0,(function(){return Bo(this,(function(e){switch(e.label){case 0:return Jo.info({message:"StorageService is stopping..."}),this.saveLocal(),[4,this.saveMonkey()];case 1:return e.sent(),[2]}}))}))},e.prototype.initialize=function(){return Wo(this,void 0,void 0,(function(){var e,t;return Bo(this,(function(n){switch(n.label){case 0:return t={},[4,this.readMonkey({outputType:"JSON"})];case 1:return t.monkey=n.sent(),t.local=this.readLocal({outputType:"JSON"}),(e=t).monkey.pluginData&&e.monkey.plugins&&e.monkey.preferences?[3,3]:[4,this.setDefaultValue()];case 2:n.sent(),n.label=3;case 3:return e.local?[3,5]:[4,this.setDefaultValue()];case 4:n.sent(),n.label=5;case 5:return[2]}}))}))},e.prototype.setDefaultValue=function(){return Wo(this,void 0,void 0,(function(){return Bo(this,(function(e){switch(e.label){case 0:return this.runtimeStorage=this.defaultValue,this.saveLocal(),[4,this.saveMonkey()];case 1:return e.sent(),[2]}}))}))},e.prototype.localSet=function(e){var t=e.k,n=e.v,a=this.keyConstructor({k:t}),i=this.runtimeStorage.local.findIndex((function(e){return e.k===a}));-1!==i?(this.runtimeStorage.local[i].v=JSON.stringify(n),this.runtimeStorage.local[i].timestamp=r.getTimestamp()):this.runtimeStorage.local.push({k:a,v:JSON.stringify(n),timestamp:r.getTimestamp()})},e.prototype.localGet=function(e){var t=this,n=e.k,r=this.runtimeStorage.local.find((function(e){return e.k===t.keyConstructor({k:n})}));if(!r)return null;try{return JSON.parse(r.v)}catch(e){return Jo.error({message:"Error parsing value for key: ".concat(n,", error: ").concat(JSON.stringify(e))}),null}},e.prototype.localRemove=function(e){var t=this,n=e.k;this.runtimeStorage.local=this.runtimeStorage.local.filter((function(e){return e.k!==t.keyConstructor({k:n})}))},e.prototype.largeSet=function(e){var t=e.k,n=e.v,a=this.keyConstructor({k:t}),i=this.runtimeStorage.monkey.pluginData.findIndex((function(e){return e.k===a}));-1!==i?(this.runtimeStorage.monkey.pluginData[i].v=JSON.stringify(n),this.runtimeStorage.monkey.pluginData[i].timestamp=r.getTimestamp()):this.runtimeStorage.monkey.pluginData.push({k:a,v:JSON.stringify(n),timestamp:r.getTimestamp()})},e.prototype.largeGet=function(e){var t=this,n=e.k,r=this.runtimeStorage.monkey.pluginData.find((function(e){return e.k===t.keyConstructor({k:n})}));if(!r)return null;try{return JSON.parse(r.v)}catch(e){return Jo.error({message:"Error parsing value for key: ".concat(n,", error: ").concat(JSON.stringify(e))}),null}},e.prototype.largeRemove=function(e){var t=this,n=e.k;this.runtimeStorage.monkey.pluginData=this.runtimeStorage.monkey.pluginData.filter((function(e){return e.k!==t.keyConstructor({k:n})}))},e.prototype.updatePluginsStorage=function(e){var t=e.newPlugins;this.runtimeStorage.monkey.plugins=t},e.prototype.getPlugins=function(){return this.runtimeStorage.monkey.plugins},e.prototype.updatePreferencesStorage=function(e){var t=e.newPreferences;this.runtimeStorage.monkey.preferences=t},e.prototype.keyConstructor=function(e){var t=e.k;return-1!==t.indexOf(".")&&Jo.error({message:'Key cannot contain "."'}),"".concat(t)},e.prototype.readMonkey=function(e){return Wo(this,arguments,void 0,(function(e){var t,n,r=e.outputType;return Bo(this,(function(e){switch(e.label){case 0:return"raw"!==r?[3,2]:[4,GM.getValue("ace.runtimeStorage.monkey")];case 1:return[2,e.sent()||"{}"];case 2:return n=(t=JSON).parse,[4,GM.getValue("ace.runtimeStorage.monkey")];case 3:return[2,n.apply(t,[e.sent()||"{}"])]}}))}))},e.prototype.readLocal=function(e){return"raw"===e.outputType?localStorage.getItem("ace.runtimeStorage.local")||"[]":JSON.parse(localStorage.getItem("ace.runtimeStorage.local")||"[]")},e.prototype.saveLocal=function(){localStorage.setItem("ace.runtimeStorage.local",JSON.stringify(this.runtimeStorage.local))},e.prototype.saveMonkey=function(){return Wo(this,void 0,void 0,(function(){return Bo(this,(function(e){switch(e.label){case 0:return[4,GM.setValue("ace.runtimeStorage.monkey",JSON.stringify(this.runtimeStorage.monkey))];case 1:return e.sent(),[2]}}))}))},e.prototype.getRuntimeStorage=function(){return this.runtimeStorage},e.prototype.clearMonkey=function(){GM_listValues().forEach((function(e){GM_deleteValue(e)}))},e.prototype.clearLocal=function(){localStorage.setItem("ace.runtimeStorage.local",JSON.stringify([]))},e.prototype.exportMonkey=function(){var e=this.readMonkey({outputType:"raw"});Ro.ACEV2Download({object:e,filename:"monkey.ace.".concat(r.getTimestamp(),".json")})},e.prototype.importMonkey=function(e){var t=e.data;Object.keys(t).forEach((function(e){GM_setValue(e,t[e])}))},e.prototype.exportLocal=function(){var e=this.readLocal({outputType:"raw"});Ro.ACEV2Download({object:e,filename:"local.ace.".concat(r.getTimestamp(),".json")})},e.prototype.importLocal=function(e){var t=e.data;Object.keys(t).forEach((function(e){localStorage.setItem(e,t[e])}))},e.prototype.exportAll=function(){GM_listValues||Jo.error({message:"Cannot resolve function GM_listValues"});var e={};GM_listValues().forEach((function(t){e[t]=GM_getValue(t)}));for(var t={},n=0;n<localStorage.length;n++){var a=localStorage.key(n);a&&(t[a]=localStorage.getItem(a))}Ro.ACEV2Download({object:{monkey:e,local:t},filename:"all.ace.".concat(r.getTimestamp(),".json")})},e.prototype.importAll=function(e){var t=e.data,n=JSON.parse(t);Object.keys(n.monkey).forEach((function(e){GM_setValue(e,n.monkey[e])})),Object.keys(n.local).forEach((function(e){localStorage.setItem(e,n.local[e])}))},e}();const Zo=new Go;var Ho=function(){function e(){}return e.prototype.updatePreferences=function(e){var t=e.category,n=e.k,r=e.v,a=Zo.getRuntimeStorage().monkey.preferences;a[t]&&(a[t][n]=r)},e.prototype.getPreference=function(e){var t=e.category,n=e.k,r=Zo.getRuntimeStorage().monkey.preferences;return r[t]?r[t][n]:""},e.prototype.isDarkMode=function(){return"auto"===this.getPreference({category:"visual",k:"theme"})?r.isNight():"dark"===this.getPreference({category:"visual",k:"theme"})},e.prototype.getBridgeConfigurations=function(){var e=Zo.largeGet({k:"bridgeConfigurations"});return e||(Zo.largeSet({k:"bridgeConfigurations",v:{enabled:!1,pluginLoadOrder:"when-body-loaded",connect:"localhost"}}),{enabled:!1,pluginLoadOrder:"when-body-loaded",connect:"localhost"})},e.prototype.updateBridgePreferences=function(e){var t=e.newBridgeConfigurations;Zo.largeSet({k:"bridgeConfigurations",v:t})},e}();const Fo=new Ho;var Vo=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};const Jo=new(function(){function t(){this.logLevelPriority={ERROR:1,WARN:2,INFO:3,DEBUG:4,SUCCESS:5},this.environment=e.getEnvironment()}return t.prototype.formatMessage=function(e){var t=e.level,n=e.message,r=(new Date).toISOString();return"%c[".concat(r,"] [").concat(t,"] ").concat(n)},t.prototype.getStackTrace=function(){var e=(new Error).stack;return e?e.split("\n").slice(3).join("\n"):""},t.prototype.shouldLog=function(e){if("ERROR"!==e&&"WARN"!==e&&"INFO"!==e&&"DEBUG"!==e&&"SUCCESS"!==e)return!0;var t=Fo.getPreference({category:"developer",k:"logLevel"}).toUpperCase()||"ERROR";return this.logLevelPriority[e]<=this.logLevelPriority[t]},t.prototype.log=function(e,t){var n=e.level,r=e.message;if(this.shouldLog(n)){var a="";a="ERROR"!==n&&"WARN"!==n&&"INFO"!==n&&"DEBUG"!==n&&"SUCCESS"!==n?"[".concat(n,"] ").concat(r):this.formatMessage({level:n,message:r}),"Development"===this.environment?(console.log.apply(console,Vo([a],t,!1)),console.log(this.getStackTrace())):console.log.apply(console,Vo([a],t,!1))}},t.prototype.success=function(e){var t=e.message;this.log({level:"SUCCESS",message:t},["background: #39c5bb; color: white;"])},t.prototype.info=function(e){var t=e.message;this.log({level:"INFO",message:t},["background: blue; color: white;"])},t.prototype.error=function(e){var t=e.message;this.log({level:"ERROR",message:t},["background: #fd4c5d; color: white;"])},t.prototype.debug=function(e){var t=e.message;this.log({level:"DEBUG",message:t},["background: gray; color: white;"])},t.prototype.warn=function(e){var t=e.message;this.log({level:"WARN",message:t},["background: tomato; color: white;"])},t.prototype.dangerLogWithoutUserPermission=function(e){var t=e.role,n=e.message,r=e.cssArray;this.log({level:t,message:n},r)},t}());const qo=new(function(){function e(){}return e.prototype.start=function(){gn.registerChannel({channel:"runtime:launchpad"})},e.prototype.stop=function(){gn.unregisterChannel({channel:"runtime:launchpad"})},e}());var Ko=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Xo=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const $o=new(function(){function e(){this.hintTracker=""}return e.prototype.start=function(){return Ko(this,void 0,void 0,(function(){var e,n;return Xo(this,(function(a){switch(a.label){case 0:return(e=Fo.getBridgeConfigurations()).enabled?(this.insertHint(),Jo.info({message:"["+t.t({key:"debug-bridge"})+"]"+t.t({key:"downloading-plugin-from"})+e.connect}),[4,Ro.monkey({method:"GET",url:"".concat(e.connect,"?t=").concat(r.getTimestamp()),responseType:"text"})]):[3,3];case 1:return n=a.sent(),Jo.info({message:"["+t.t({key:"debug-bridge"})+"]"+t.t({key:"installing-plugin"})}),[4,Ao.installPlugin({pluginPack:JSON.parse(n),bridged:!0})];case 2:a.sent(),Jo.info({message:"["+t.t({key:"debug-bridge"})+"]"+t.t({key:"installed-plugin"})}),a.label=3;case 3:return[2]}}))}))},e.prototype.stop=function(){return Ko(this,void 0,void 0,(function(){return Xo(this,(function(e){return this.hintTracker&&Lo.unmountUI({tracker:this.hintTracker}),Ao.uninstallBridgedPlugin(),[2]}))}))},e.prototype.insertHint=function(){this.hintTracker=Lo.renderUI({canvas:[{type:"sizer",size:{width:12,height:3},styleObject:{zIndex:101,cursor:"pointer",right:"1vw",bottom:"1vw",position:"fixed"},draggable:!0,filled:!0,events:[{event:"click",handler:function(){return Vn.renderConfigurePanel()}}],children:[{type:"text",label:t.t({key:"debug-bridge-enabled"})}]}],slot:"sideMenu"})},e}());const es=new(function(){function e(){}return e.prototype.headLoaded=function(e){var t=e.callback;return new Promise((function(e){if(null!==document.head)e(t());else var n=un.childList({target:document.documentElement,callback:function(){null!==document.head&&(n.disconnect(),e(t()))}})[0]}))},e.prototype.contentLoaded=function(e){var t=e.callback;return new Promise((function(e){"loading"!==document.readyState?e(t()):document.addEventListener("DOMContentLoaded",(function(){return e(t())}))}))},e.prototype.fullyLoaded=function(e){var t=e.callback;return new Promise((function(e){"complete"===document.readyState?e(t()):unsafeWindow.addEventListener("load",(function(){return e(t())}))}))},e.prototype.beforeDestroy=function(e){var t=e.callback;return new Promise((function(e){unsafeWindow.addEventListener("beforeunload",(function(){return e(t())}))}))},e.prototype.raiseLifeCycleEvent=function(e){var t=e.type;unsafeWindow.dispatchEvent(new CustomEvent(t))},e}());const ts=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(e){var n=this,r=e.manifest,a=r.icon,i=a.startsWith("<svg"),o=i?a:"defaultIcon"===a?Qn:a;this.canvas=[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},filled:!0,draggable:!0,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",alignItems:"center",justifyContent:"space-around",padding:"1vw"},children:[{type:"sizer",size:{width:10,height:10},children:[{type:"image",asHTML:i,src:o}]},{type:"sizer",children:[{type:"text",text:r.description}]},{type:"sizer",children:[{type:"text",text:r.name+" version "+r.versions[r.versions.length-1]}]},{type:"sizer",children:[{type:"text",text:r.author+" | "+r.id}]},{type:"sizer",children:[{type:"text",text:r.copyright}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"ok"}),actions:[function(){return n.destroy()}]}]}]}]}]},e.prototype.showAboutUI=function(e){var t=e.manifest;this.updateCanvas({manifest:t}),this.draw()},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):this.tracker=Lo.renderUI({canvas:this.canvas,slot:"plugins"})},e.prototype.destroy=function(){this.existed()&&(Lo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());const ns=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(e){var n=this,r=e.manifest,a=e.updatePreferencesHook,i=[];r.settings?(r.settings.forEach((function(e){"select"===e.type?i.push({type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[{type:"text",text:e.label},{type:"select",options:e.options,value:e.value,onChange:function(t){a({setting:e,newValue:t})}}]}):"input"===e.type?i.push({type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[{type:"text",text:e.label},{type:"input",value:e.value,onChange:function(t){a({setting:e,newValue:t})}}]}):"checkbox"===e.type?i.push({type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[{type:"text",text:e.label},{type:"checkbox",checked:e.checked,onChange:function(t){a({setting:e,newValue:t})}}]}):Pt.showToast({text:"未知的设置类型「".concat(e.type,"」，请检查插件「").concat(r.id,"」的设置。")})})),this.canvas=[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},children:[{type:"window",title:t.t({key:"preferences"})+" | "+r.name,children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",height:"100%"},children:[{type:"sizer",styleObject:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:i},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"ok"}),actions:[function(){n.destroy()}]}]}]}]}]}]}]}]):Pt.showToast({text:"插件「"+r.id+"」没有设置。"})},e.prototype.showPluginPreferencesUI=function(e){var t=e.manifest,n=e.updatePreferencesHook;t.settings?(this.updateCanvas({manifest:t,updatePreferencesHook:n}),this.draw()):Pt.showToast({text:"插件「"+t.id+"」没有设置。"})},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):this.tracker=Lo.renderUI({canvas:this.canvas,slot:"plugins"})},e.prototype.destroy=function(){this.existed()&&(Lo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());var rs=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};const as=new(function(){function e(){this.canvas=[],this.tracker="",this.targetPanels=[]}return e.prototype.updateCanvas=function(){var e=this;this.canvas=[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},draggable:!0,children:[{type:"window",title:t.t({key:"launchpad"}),children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%",height:"100%"},children:[{type:"sizer",styleObject:{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",gap:"1vw",width:"100%",flexWrap:"wrap",flexGrow:1},children:rs([],this.getShortcuts(),!0)},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"close"}),actions:[function(){e.destroy()}]}]}]}]}]}]}]}]},e.prototype.getShortcuts=function(){var e=this,t=[],n=[];return n=Ao.getInstalledPlugins(),t.push(this.generateIcon({manifest:Bn.manifest})),"full"!==Fo.getPreference({category:"developer",k:"psv"})&&t.push(this.generateIcon({manifest:Vn.manifest})),n.forEach((function(n){t.push(e.generateIcon({manifest:n.manifest}))})),t},e.prototype.generateIcon=function(e){var n=this,r=e.manifest,a=r.icon,i=a.startsWith("<svg");return{type:"sizer",styleObject:{width:"7vw",height:"10vw",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",gap:"1vw",cursor:"pointer"},events:[{event:"click",handler:function(){return n.openTargetPanel({manifest:r})}}],children:[{type:"sizer",styleObject:{width:"7vw",height:"7vw"},children:[{type:"image",asHTML:i,src:i?a:"defaultIcon"===a?Qn:a}]},{type:"sizer",styleObject:{width:"7vw",height:"3vw",display:"flex",justifyContents:"center",alignItems:"center"},children:[{type:"text",label:"".concat(r.name," ").concat(r.bridged?t.t({key:"bridged-installation"}):"")}]}]}},e.prototype.generateTargetPanel=function(e){var n=this,r=e.manifest,a="";r.trigger.receiveHandler&&(a=ft.v4());return{canvas:r.settings?[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},draggable:!0,children:[{type:"window",title:r.name,children:[{type:"sizer",styleObject:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",width:"96%",height:"86%",margin:"1%",padding:"1%",overflowY:"auto"},assignHandler:""===a?void 0:a,children:""===a?[{type:"text",label:t.t({key:"welcome-to"})+" "+r.name,text:t.t({key:"this-plugin-does-not-support-interactive-ui-use-preferences-to-configure-its-behavior"})}]:[]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%",height:"10%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"preferences"}),actions:[function(){return n.openPluginPreferencesPanel({manifest:r})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"uninstall"}),actions:[function(){"@wenzi7777/acev2_plugin_store"!==r.id&&"@wenzi7777/acev2_debug_bridge"!==r.id?Ao.uninstallPlugin({manifest:r}):Pt.showToast({text:t.t({key:"cant-uninstall-build-in-plugins"})})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"about"}),actions:[function(){return ts.showAboutUI({manifest:r})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"website"}),actions:[function(){return Ro.openPageInNewTab({url:r.website,manifest:r})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"close"}),actions:[function(){n.destroyTargetPanel({manifest:r})}]}]}]}]}]}]}]}]:[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},draggable:!0,children:[{type:"window",title:r.name,children:[{type:"sizer",styleObject:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",width:"96%",height:"86%",margin:"1%",padding:"1%",overflowY:"auto"},assignHandler:""===a?void 0:a,children:""===a?[{type:"text",label:t.t({key:"welcome-to"})+" "+r.name,text:t.t({key:"this-plugin-does-not-support-interactive-ui-use-preferences-to-configure-its-behavior"})}]:[]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%",height:"10%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"uninstall"}),actions:[function(){"@wenzi7777/acev2_plugin_store"!==r.id&&"@wenzi7777/acev2_debug_bridge"!==r.id?Ao.uninstallPlugin({manifest:r}):Pt.showToast({text:t.t({key:"cant-uninstall-build-in-plugins"})})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"about"}),actions:[function(){return ts.showAboutUI({manifest:r})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"website"}),actions:[function(){return Ro.openPageInNewTab({url:r.website,manifest:r})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"close"}),actions:[function(){n.destroyTargetPanel({manifest:r})}]}]}]}]}]}]}],handler:a}},e.prototype.openTargetPanel=function(e){var t=e.manifest,n=this.generateTargetPanel({manifest:t}),r=n.canvas,a=n.handler;this.targetPanels.push({manifest:t,tracker:Lo.renderUI({canvas:r,slot:"plugins"})}),gn.sendMessage({channel:"runtime:launchpad",data:{type:"pluginStarted",manifest:t,handler:a}})},e.prototype.openPluginPreferencesPanel=function(e){var t=e.manifest;ns.showPluginPreferencesUI({manifest:t,updatePreferencesHook:function(e){e.setting;var n=e.newValue,r=t.settings;r.forEach((function(e){e.label==e.label&&(e.value=n)})),Ao.saveSelfPreference({manifest:t,settings:r})}})},e.prototype.destroyTargetPanel=function(e){var t=e.manifest,n=this.targetPanels.find((function(e){return e.manifest.id===t.id}));n&&(Lo.unmountUI({tracker:n.tracker}),this.targetPanels=this.targetPanels.filter((function(e){return e.manifest.id!==t.id})))},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):(this.updateCanvas(),this.tracker=Lo.renderUI({canvas:this.canvas,slot:"plugins"}))},e.prototype.destroy=function(){this.existed()&&(Lo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());const is=new(function(){function n(){this.canvas=[],this.tracker=""}return n.prototype.updateCanvas=function(){var n=this;this.canvas=[{type:"sizer",styleObject:{zIndex:99,position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:"70vw",maxHeight:"60vh"},children:[{type:"window",title:t.t({key:"preferences"}),children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",gap:"1vh",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw",justifyContent:"flex-start",alignItems:"center"},children:[{type:"text",label:t.t({key:"general"})},{type:"select",label:t.t({key:"plugin-load-order"}),options:[t.t({key:"when-head-loaded"}),t.t({key:"when-body-loaded"}),t.t({key:"after-all"})],value:t.t({key:Fo.getPreference({category:"general",k:"pluginLoadOrder"})}),onChange:function(e){Fo.updatePreferences({category:"general",k:"pluginLoadOrder",v:t.reverseT({value:e})})}},{type:"select",label:t.t({key:"source"}),options:[t.t({key:"github"}),t.t({key:"cloudflare"}),t.t({key:"jsdelivr"})],value:t.t({key:Fo.getPreference({category:"general",k:"source"})}),onChange:function(e){Fo.updatePreferences({category:"general",k:"source",v:t.reverseT({value:e})})}},{type:"select",label:t.t({key:"update-runtime-when"}),options:[t.t({key:"startup"}),t.t({key:"daily"}),t.t({key:"weekly"}),t.t({key:"monthly"})],value:t.t({key:Fo.getPreference({category:"general",k:"updateRuntimeWhen"})}),onChange:function(e){Fo.updatePreferences({category:"general",k:"updateRuntimeWhen",v:t.reverseT({value:e})})}},{type:"select",label:t.t({key:"update-runtime-to"}),options:[t.t({key:"stable"}),t.t({key:"beta"})],value:t.t({key:Fo.getPreference({category:"general",k:"updateRuntimeTo"})}),onChange:function(e){Fo.updatePreferences({category:"general",k:"updateRuntimeTo",v:t.reverseT({value:e})})}},{type:"select",label:t.t({key:"update-plugins-when"}),options:[t.t({key:"startup"}),t.t({key:"daily"}),t.t({key:"weekly"}),t.t({key:"monthly"})],value:t.t({key:Fo.getPreference({category:"general",k:"updatePluginsWhen"})}),onChange:function(e){Fo.updatePreferences({category:"general",k:"updatePluginsWhen",v:t.reverseT({value:e})})}}]},{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw",justifyContent:"flex-start",alignItems:"center"},children:[{type:"text",label:t.t({key:"visual"})},{type:"select",label:t.t({key:"theme"}),options:[t.t({key:"auto"}),t.t({key:"light"}),t.t({key:"dark"})],value:t.t({key:Fo.getPreference({category:"visual",k:"theme"})}),onChange:function(e){Fo.updatePreferences({category:"visual",k:"theme",v:t.reverseT({value:e})})}},{type:"select",label:t.t({key:"language"}),options:[t.t({key:"auto"}),t.t({key:"english"}),t.t({key:"japanese"}),t.t({key:"simplified-chinese"}),t.t({key:"traditional-chinese"})],value:t.t({key:Fo.getPreference({category:"visual",k:"language"})}),onChange:function(e){Fo.updatePreferences({category:"visual",k:"language",v:t.reverseT({value:e})})}}]},{type:"sizer",styleObject:{display:"flex",flexWrap:"wrap",gap:"1vw",justifyContent:"flex-start",alignItems:"center"},children:[{type:"text",label:t.t({key:"developer"}),text:""},{type:"select",label:t.t({key:"psv"}),options:[t.t({key:"full"}),t.t({key:"half"}),t.t({key:"none"})],value:t.t({key:Fo.getPreference({category:"developer",k:"psv"})}),onChange:function(e){Fo.updatePreferences({category:"developer",k:"psv",v:t.reverseT({value:e})})}},{type:"select",label:t.t({key:"ipc"}),options:[t.t({key:"enabled"}),t.t({key:"disabled"})],value:t.t({key:Fo.getPreference({category:"developer",k:"ipc"})}),onChange:function(e){Fo.updatePreferences({category:"developer",k:"ipc",v:t.reverseT({value:e})})}},{type:"select",label:t.t({key:"log-level"}),options:[t.t({key:"error"}),t.t({key:"warn"}),t.t({key:"info"}),t.t({key:"debug"})],value:t.t({key:Fo.getPreference({category:"developer",k:"logLevel"})}),onChange:function(e){Fo.updatePreferences({category:"developer",k:"logLevel",v:t.reverseT({value:e})})}}]}]},{type:"sizer",styleObject:{flexGrow:1,display:"flex",justifyContent:"flex-start",alignItems:"flex-end",width:"100%"},children:[{type:"text",label:t.t({key:"note"}),text:t.t({key:"please-notice-that-some-preferences-need-to-reload-the-page-to-take-effect"})}]},{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw",width:"100%"},children:[{type:"sizer",styleObject:{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:"1vw"},children:[{type:"sizer",size:{width:24,height:3},children:[{type:"button",text:e.getFullVersion()+" "+t.t({key:"changelog"}),actions:[function(){return Ro.openPageInNewTab({url:xo.selfReleaseURL(),manifest:xo.MASTER_MANIFEST})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"about"}),actions:[function(){return ts.showAboutUI({manifest:xo.MASTER_MANIFEST})}]}]},{type:"sizer",size:{width:8,height:3},children:[{type:"button",text:t.t({key:"close"}),actions:[function(){return n.destroy()}]}]},{type:"sizer",size:{width:10,height:3},children:[{type:"button",text:t.t({key:"save-and-reload"}),actions:[function(){return So.showDialog({title:t.t({key:"changes-will-take-effect-after-reload"}),content:t.t({key:"reload-now"}),okAction:function(){n.destroy(),location.reload()}})}]}]}]}]}]}]}]}]},n.prototype.existed=function(){return""!==this.tracker},n.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):(this.updateCanvas(),this.tracker=Lo.renderUI({canvas:this.canvas,slot:"plugins"}))},n.prototype.destroy=function(){this.existed()&&(Lo.unmountUI({tracker:this.tracker}),this.tracker="")},n}());const os=new(function(){function e(){this.canvas=[],this.tracker=""}return e.prototype.updateCanvas=function(){this.canvas=[{type:"sizer",position:{top:38,bottom:38,left:0},size:{width:5,height:24},styleObject:{position:"fixed",flexDirection:"column",gap:"3vh"},children:[{type:"sizer",size:{width:5,height:5},events:[{event:"click",handler:function(){return as.draw()}}],styleObject:{cursor:"pointer"},children:[{type:"image",src:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzMjA5MjExMDY4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgcC1pZD0iMjgxMzYiIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiI+CiAgICA8cGF0aCBkPSJNMzM3LjMwMjU2NiA2MjkuMDk4NzY5bDU2LjU3MzE2OSA1Ni41NzMxNjktMC4wNDI3MjkgOTUuMzI4MzU0LTE5OC45MDM0IDQ3LjA4NzMzNiA0Ny4wNDQ2MDYtMTk4Ljk4ODg1OWg5NS4zMjgzNTR6TTU1NS4wMDY3MTggMTk1LjE4NTk4TDQ1MC4zNjM0NDcgMjk5LjgyOTI1MUgzMjAuMTI1NTE2TDIwNy44MzM3NTggNDEyLjE2MzczOWw2NS4xMTg5NjUgNjUuMTE4OTY1IDI3My45NzgyMTggMjc0LjAyMDk0NyA2NC45NDgwNDkgNjQuOTkwNzc4IDAuNDcwMDE5IDAuNDcwMDE5IDExMS45OTI2NTYtMTExLjk0OTkyN3YtMTMwLjkyMTU5NGwxMDQuNjAwNTQyLTEwNC42NDMyNzFWMTk1LjIyODcwOXogbTE2OS40MjA0MDUgMjk3LjIyMjc4M0g2NDUuMjA3NTk0VjM3OS4wMDYwNWgtMTEzLjM1OTk4M1YyOTkuODI5MjUxaDE5Mi41Nzk1MTJ6IgogICAgICAgICAgcC1pZD0iMjgxMzciIGRhdGEtc3BtLWFuY2hvci1pZD0iYTMxM3guc2VhcmNoX2luZGV4LjAuaTkuMTE4MTNhODFhMWZoZFoiIGNsYXNzPSJzZWxlY3RlZCIKICAgICAgICAgIGZpbGw9IiMyYzJjMmMiPjwvcGF0aD4KPC9zdmc+"}]},{type:"sizer",size:{width:5,height:5},events:[{event:"click",handler:function(){return is.draw()}}],styleObject:{cursor:"pointer"},children:[{type:"image",src:"data:image/svg+xml;base64,PHN2ZyB0PSIxNzIzMjA5MzgyNzIzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjU0MzciCiAgICAgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KICAgIDxwYXRoIGQ9Ik01MTIuNTEyIDk2YzMxLjMxNzMzMyAwLjM4NCA2Mi41MDY2NjcgMy45NjggOTMuMDk4NjY3IDEwLjc5NDY2N2EzMiAzMiAwIDAgMSAyNC44MzIgMjcuNjkwNjY2bDcuMjUzMzMzIDY1LjE1MmE1OS4wNTA2NjcgNTkuMDUwNjY3IDAgMCAwIDgyLjIxODY2NyA0Ny42MTZsNTkuNzMzMzMzLTI2LjI0YTMyIDMyIDAgMCAxIDM2LjI2NjY2NyA3LjQyNCA0MTcuODM0NjY3IDQxNy44MzQ2NjcgMCAwIDEgOTQuMDggMTYxLjc5MiAzMiAzMiAwIDAgMS0xMS42MDUzMzQgMzUuMjQyNjY3bC01Mi45NDkzMzMgMzkuMDRhNTguODggNTguODggMCAwIDAgMCA5NC45NzZsNTMuMDM0NjY3IDM5LjA0YTMyIDMyIDAgMCAxIDExLjYwNTMzMyAzNS4yNDI2NjcgNDE4LjA5MDY2NyA0MTguMDkwNjY3IDAgMCAxLTk0LjAzNzMzMyAxNjEuNzkyIDMyIDMyIDAgMCAxLTM2LjIyNCA3LjQ2NjY2NmwtNTkuOTg5MzM0LTI2LjI4MjY2NmE1OC45MjI2NjcgNTguOTIyNjY3IDAgMCAwLTgyLjE3NiA0Ny40ODhsLTcuMjUzMzMzIDY1LjEwOTMzM2EzMiAzMiAwIDAgMS0yNC4zNjI2NjcgMjcuNjQ4IDQwNi4xMDEzMzMgNDA2LjEwMTMzMyAwIDAgMS0xODcuOTg5MzMzIDAgMzIgMzIgMCAwIDEtMjQuNDA1MzMzLTI3LjY0OGwtNy4yMTA2NjctNjUuMDI0YTU4Ljk2NTMzMyA1OC45NjUzMzMgMCAwIDAtODIuMTMzMzMzLTQ3LjM2bC01OS45ODkzMzQgMjYuMjgyNjY3YTMyIDMyIDAgMCAxLTM2LjI2NjY2Ni03LjQ2NjY2NyA0MTguMDQ4IDQxOC4wNDggMCAwIDEtOTMuOTk0NjY3LTE2MS45NjI2NjcgMzIgMzIgMCAwIDEgMTEuNjA1MzMzLTM1LjI0MjY2Nmw1My4wMzQ2NjctMzkuMDgyNjY3YTU4Ljg4IDU4Ljg4IDAgMCAwIDAtOTQuOTc2bC01My4wMzQ2NjctMzguOTk3MzMzYTMyIDMyIDAgMCAxLTExLjYwNTMzMy0zNS4yNDI2NjcgNDE3LjgzNDY2NyA0MTcuODM0NjY3IDAgMCAxIDk0LjA4LTE2MS43OTIgMzIgMzIgMCAwIDEgMzYuMjY2NjY3LTcuNDI0bDU5LjczMzMzMyAyNi4yNGE1OS4xNzg2NjcgNTkuMTc4NjY3IDAgMCAwIDgyLjM0NjY2Ny00Ny43MDEzMzNsNy4yNTMzMzMtNjUuMTA5MzM0YTMyIDMyIDAgMCAxIDI0Ljg3NDY2Ny0yNy42OTA2NjZjMzAuNTkyLTYuODI2NjY3IDYxLjgyNC0xMC40MTA2NjcgOTMuOTA5MzMzLTEwLjc5NDY2N3pNNTEyIDM4NGExMjggMTI4IDAgMSAwIDAgMjU2IDEyOCAxMjggMCAwIDAgMC0yNTZ6IgogICAgICAgICAgZmlsbD0iIzJjMmMyYyIgcC1pZD0iNTQzOCIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pNi40NjYxM2E4MWVhbWhPcCIKICAgICAgICAgIGNsYXNzPSJzZWxlY3RlZCI+PC9wYXRoPgo8L3N2Zz4="}]}]}]},e.prototype.existed=function(){return""!==this.tracker},e.prototype.draw=function(){this.existed()?(this.destroy(),this.draw()):(this.updateCanvas(),this.tracker=Lo.renderUI({canvas:this.canvas,slot:"sideMenu"}))},e.prototype.destroy=function(){this.existed()&&(Lo.unmountUI({tracker:this.tracker}),this.tracker="")},e}());var ss=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},ls=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const cs=new(function(){function e(){}return e.prototype.start=function(){return ss(this,void 0,void 0,(function(){return ls(this,(function(e){switch(e.label){case 0:return Jo.info({message:"Kernel is starting..."}),Jo.info({message:"Handing control to the lifecycle API..."}),[4,this.init()];case 1:return e.sent(),[2]}}))}))},e.prototype.init=function(){return ss(this,void 0,void 0,(function(){var e=this;return ls(this,(function(t){switch(t.label){case 0:return es.raiseLifeCycleEvent({type:"acev2:before-start"}),[4,this.startServices()];case 1:return t.sent(),es.raiseLifeCycleEvent({type:"acev2:start"}),[4,es.headLoaded({callback:function(){return ss(e,void 0,void 0,(function(){return ls(this,(function(e){switch(e.label){case 0:return"when-head-loaded"!==Fo.getPreference({category:"general",k:"pluginLoadOrder"})?[3,2]:[4,Ao.initializePluginExecutionAndSetTrigger()];case 1:e.sent(),es.raiseLifeCycleEvent({type:"acev2:plugins-loaded"}),e.label=2;case 2:return[2]}}))}))}})];case 2:return t.sent(),es.raiseLifeCycleEvent({type:"acev2:loaded"}),[4,es.contentLoaded({callback:function(){return ss(e,void 0,void 0,(function(){return ls(this,(function(e){switch(e.label){case 0:return this.initUI(),"when-body-loaded"!==Fo.getPreference({category:"general",k:"pluginLoadOrder"})?[3,2]:[4,Ao.initializePluginExecutionAndSetTrigger()];case 1:e.sent(),es.raiseLifeCycleEvent({type:"acev2:plugins-loaded"}),e.label=2;case 2:return[2]}}))}))}})];case 3:return t.sent(),[4,es.fullyLoaded({callback:function(){return ss(e,void 0,void 0,(function(){return ls(this,(function(e){switch(e.label){case 0:return"after-all"!==Fo.getPreference({category:"general",k:"pluginLoadOrder"})?[3,2]:[4,Ao.initializePluginExecutionAndSetTrigger()];case 1:e.sent(),es.raiseLifeCycleEvent({type:"acev2:plugins-loaded"}),e.label=2;case 2:return[2]}}))}))}})];case 4:return t.sent(),Ao.wakeUpBuildInPlugins(),[4,_o.selfReleaseTracker()];case 5:return t.sent(),[4,_o.pluginsReleaseTracker()];case 6:return t.sent(),es.raiseLifeCycleEvent({type:"acev2:end"}),[4,es.beforeDestroy({callback:function(){return ss(e,void 0,void 0,(function(){return ls(this,(function(e){switch(e.label){case 0:return[4,this.stopServices()];case 1:return e.sent(),es.raiseLifeCycleEvent({type:"acev2:before-destroy"}),[2]}}))}))}})];case 7:return t.sent(),[2]}}))}))},e.prototype.startServices=function(){return ss(this,void 0,void 0,(function(){return ls(this,(function(e){switch(e.label){case 0:return r.start(),gn.start(),qo.start(),[4,Zo.start()];case 1:return e.sent(),[4,$o.start()];case 2:return e.sent(),[2]}}))}))},e.prototype.stopServices=function(){return ss(this,void 0,void 0,(function(){return ls(this,(function(e){switch(e.label){case 0:return[4,$o.stop()];case 1:return e.sent(),r.stop(),[4,Zo.stop()];case 2:return e.sent(),gn.stop(),qo.stop(),[2]}}))}))},e.prototype.initUI=function(){os.draw()},e}());var us=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},ds=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};us(void 0,void 0,void 0,(function(){return ds(this,(function(t){switch(t.label){case 0:return Jo.dangerLogWithoutUserPermission({role:xo.MASTER_MANIFEST.name,message:"".concat("\n"," %c AcFun Evolved %c v").concat(e.getFullVersion()," https://acev2.1205.moe/ ").concat("\n").concat("\n"),cssArray:["color: #FFFFFF; background: #39c5bb; padding:5px 0; font-weight: 800;","color: #FFFFFF; background: #FFA500; padding:5px 0;"]}),[4,cs.start()];case 1:return t.sent(),[2]}}))}))})()})();