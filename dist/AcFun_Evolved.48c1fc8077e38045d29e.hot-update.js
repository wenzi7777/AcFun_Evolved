"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateacfun_evolved"]("AcFun_Evolved",{

/***/ "./src/plugins/PluginStore.ts":
/*!************************************!*\
  !*** ./src/plugins/PluginStore.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_services_IPC__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/services/IPC */ \"./src/core/services/IPC.ts\");\n/* harmony import */ var _ui_Manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ui/Manager */ \"./src/ui/Manager.tsx\");\n/* harmony import */ var _ACEV2Loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ACEV2Loader */ \"./src/plugins/ACEV2Loader.ts\");\n/* harmony import */ var _core_api_IO__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/api/IO */ \"./src/core/api/IO.ts\");\n/* harmony import */ var _core_api_Variable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/api/Variable */ \"./src/core/api/Variable.ts\");\n/* harmony import */ var _ui_assets_pluginStore_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/assets/pluginStore.svg */ \"./src/ui/assets/pluginStore.svg\");\n/* harmony import */ var _ui_assets_default_svg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ui/assets/default.svg */ \"./src/ui/assets/default.svg\");\n/* harmony import */ var _core_api_I18n__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/api/I18n */ \"./src/core/api/I18n.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\nvar PluginStore = /** @class */ (function () {\n    function PluginStore() {\n        this.manifest = {\n            icon: _ui_assets_pluginStore_svg__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n            name: 'Plugin Store',\n            id: '@wenzi7777/acev2_plugin_store',\n            versions: ['0.0.1'],\n            description: 'AcFun Evolved V2 插件商店。',\n            createdAt: new Date('2024-08-09').getTime() + '',\n            updatedAt: new Date().getTime() + '',\n            author: 'wenzi7777',\n            copyright: '(c)2024 wenzi7777, licensed under the MIT License.',\n            requestedAPIs: [],\n            website: 'https://acev2.1205.moe/',\n            trigger: {\n                receiveHandler: true,\n                matches: ['*']\n            }\n        };\n        this.handler = '';\n        this.tracker = '';\n        this.canvas = [];\n        this.currentPage = 1;\n        this.totalPages = 10;\n        this.bigManifest = null;\n    }\n    PluginStore.prototype.wakeUp = function () {\n        var _this = this;\n        _core_services_IPC__WEBPACK_IMPORTED_MODULE_0__[\"default\"].listen({ channel: 'runtime:launchpad', handler: function (data) { return _this.render(data); }, manifest: this.manifest });\n    };\n    PluginStore.prototype.getBigManifest = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, items;\n            var _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = this;\n                        return [4 /*yield*/, _core_api_IO__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getJson({ url: _core_api_Variable__WEBPACK_IMPORTED_MODULE_4__[\"default\"].bigManifestURL() })];\n                    case 1:\n                        _a.bigManifest = _c.sent();\n                        items = (_b = this.bigManifest) === null || _b === void 0 ? void 0 : _b.length;\n                        this.totalPages = Math.ceil(items || 1 / _core_api_Variable__WEBPACK_IMPORTED_MODULE_4__[\"default\"].PAGE_SIZE);\n                        this.currentPage = 1;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PluginStore.prototype.updateCanvas = function (_a) {\n        return __awaiter(this, arguments, void 0, function (_b) {\n            var newAppList;\n            var _this = this;\n            var _c, _d, _e;\n            var currentPage = _b.currentPage, totalPages = _b.totalPages;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0: return [4 /*yield*/, this.getBigManifest()];\n                    case 1:\n                        _f.sent();\n                        if (((_c = this.bigManifest) === null || _c === void 0 ? void 0 : _c.length) > _core_api_Variable__WEBPACK_IMPORTED_MODULE_4__[\"default\"].PAGE_SIZE) {\n                            this.bigManifest = (_d = this.bigManifest) === null || _d === void 0 ? void 0 : _d.slice((this.currentPage - 1) * _core_api_Variable__WEBPACK_IMPORTED_MODULE_4__[\"default\"].PAGE_SIZE, this.currentPage * _core_api_Variable__WEBPACK_IMPORTED_MODULE_4__[\"default\"].PAGE_SIZE);\n                        }\n                        newAppList = [\n                            {\n                                type: 'sizer',\n                                styleObject: {\n                                    display: 'flex',\n                                    flexDirection: 'column',\n                                    justifyContent: 'space-between',\n                                    alignItems: 'center',\n                                    width: '100%',\n                                    height: '100%'\n                                },\n                                children: (_e = this.bigManifest) === null || _e === void 0 ? void 0 : _e.map(function (item) {\n                                    var icon = item.icon;\n                                    var isSVG = icon.startsWith('<svg');\n                                    var isDefaultIcon = icon === 'default';\n                                    var src = isSVG ? icon : isDefaultIcon ? _ui_assets_default_svg__WEBPACK_IMPORTED_MODULE_6__[\"default\"] : icon;\n                                    return {\n                                        type: 'sizer',\n                                        styleObject: {\n                                            width: '100%',\n                                            display: 'flex',\n                                            justifyContent: 'space-between',\n                                            alignItems: 'center',\n                                            margin: '10px',\n                                            cursor: 'pointer'\n                                        },\n                                        events: [\n                                            {\n                                                event: 'click',\n                                                handler: function () {\n                                                    console.log(item);\n                                                }\n                                            }\n                                        ],\n                                        children: [\n                                            {\n                                                type: 'image',\n                                                src: src,\n                                                asHTML: isSVG\n                                            },\n                                            {\n                                                type: 'text',\n                                                label: item.name + ' ' + item.id,\n                                                text: item.description\n                                            }\n                                        ]\n                                    };\n                                })\n                            }\n                        ];\n                        this.canvas = [\n                            {\n                                type: 'sizer',\n                                styleObject: {\n                                    display: 'flex',\n                                    justifyContent: 'center',\n                                    alignItems: 'center',\n                                    width: '100%',\n                                    height: '80%',\n                                    flexGrow: 1\n                                },\n                                children: newAppList\n                            },\n                            {\n                                type: 'sizer',\n                                styleObject: {\n                                    display: 'flex',\n                                    justifyContent: 'center',\n                                    alignItems: 'center',\n                                    width: '100%',\n                                    height: '20%',\n                                    flexGrow: 1\n                                },\n                                children: [\n                                    {\n                                        type: 'pagination',\n                                        currentPage: currentPage || this.currentPage,\n                                        totalPages: totalPages || this.totalPages,\n                                        onPageChange: function (page) { return _this.currentPage += 1; }\n                                    }\n                                ]\n                            },\n                        ];\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PluginStore.prototype.openDetailsPanel = function (_a) {\n        var manifest = _a.manifest;\n        var icon = manifest.icon;\n        var isSVG = icon.startsWith('<svg');\n        var isDefaultIcon = icon === 'default';\n        var src = isSVG ? icon : isDefaultIcon ? _ui_assets_default_svg__WEBPACK_IMPORTED_MODULE_6__[\"default\"] : icon;\n        var detailPanelTracker = _ui_Manager__WEBPACK_IMPORTED_MODULE_1__.Manager.renderUI({\n            canvas: [\n                {\n                    type: 'sizer',\n                    styleObject: {\n                        zIndex: 99,\n                        position: 'absolute',\n                        left: '50%',\n                        top: '50%',\n                        transform: 'translate(-50%, -50%)',\n                        maxWidth: '70vw',\n                        maxHeight: '60vh'\n                    },\n                    filled: true,\n                    draggable: true,\n                    children: [\n                        {\n                            type: 'sizer',\n                            styleObject: {\n                                display: 'flex',\n                                flexDirection: 'column',\n                                gap: '1vh',\n                                alignItems: 'center',\n                                justifyContent: 'space-around',\n                                padding: '1vw'\n                            },\n                            children: [\n                                {\n                                    type: 'sizer',\n                                    styleObject: {\n                                        display: 'flex',\n                                        justifyContent: 'space-between',\n                                        alignItems: 'center',\n                                    },\n                                    children: [\n                                        {\n                                            type: 'sizer',\n                                            styleObject: {\n                                                width: '32px',\n                                                height: '32px'\n                                            },\n                                            children: [\n                                                {\n                                                    type: 'image',\n                                                    asHTML: isSVG,\n                                                    src: src\n                                                }\n                                            ]\n                                        },\n                                        {\n                                            type: 'text',\n                                            label: _core_api_I18n__WEBPACK_IMPORTED_MODULE_7__[\"default\"].t({ key: 'developer' }) + ' ' + manifest.author,\n                                            text: manifest.name + ' | ' + manifest.id,\n                                        }\n                                    ]\n                                },\n                                {\n                                    type: 'sizer',\n                                    children: []\n                                },\n                                {\n                                    type: 'sizer',\n                                    size: {\n                                        width: 17,\n                                        height: 3\n                                    },\n                                    children: [\n                                        {\n                                            type: 'sizer',\n                                            size: {\n                                                width: 8,\n                                                height: 3\n                                            },\n                                            children: [{\n                                                    type: 'button',\n                                                    text: _core_api_I18n__WEBPACK_IMPORTED_MODULE_7__[\"default\"].t({ key: 'install' }),\n                                                    actions: [function () { return console.log(manifest); }]\n                                                }]\n                                        },\n                                        {\n                                            type: 'sizer',\n                                            size: {\n                                                width: 8,\n                                                height: 3\n                                            },\n                                            children: [{\n                                                    type: 'button',\n                                                    text: _core_api_I18n__WEBPACK_IMPORTED_MODULE_7__[\"default\"].t({ key: 'cancel' }),\n                                                    actions: [function () { return _ui_Manager__WEBPACK_IMPORTED_MODULE_1__.Manager.unmountUI({ tracker: detailPanelTracker }); }]\n                                                }]\n                                        }\n                                    ]\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ], slot: 'plugins'\n        });\n    };\n    PluginStore.prototype.render = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(data.type === 'pluginStarted')) return [3 /*break*/, 2];\n                        if (!(data.manifest.id === this.manifest.id)) return [3 /*break*/, 2];\n                        _ACEV2Loader__WEBPACK_IMPORTED_MODULE_2__[\"default\"].draw();\n                        return [4 /*yield*/, this.updateCanvas({})];\n                    case 1:\n                        _a.sent();\n                        this.handler = data.handler;\n                        this.tracker = _ui_Manager__WEBPACK_IMPORTED_MODULE_1__.Manager.renderUI({\n                            canvas: this.canvas, slot: this.handler\n                        });\n                        _ACEV2Loader__WEBPACK_IMPORTED_MODULE_2__[\"default\"].destroy();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return PluginStore;\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new PluginStore());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWJwYWNrOi8vYWNmdW5fZXZvbHZlZC8uL3NyYy9wbHVnaW5zL1BsdWdpblN0b3JlLnRzPzE0NGUiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuaW1wb3J0IElQQyBmcm9tIFwiLi4vY29yZS9zZXJ2aWNlcy9JUENcIjtcbmltcG9ydCB7IE1hbmFnZXIgfSBmcm9tIFwiLi4vdWkvTWFuYWdlclwiO1xuaW1wb3J0IEFDRVYyTG9hZGVyIGZyb20gXCIuL0FDRVYyTG9hZGVyXCI7XG5pbXBvcnQgSU8gZnJvbSBcIi4uL2NvcmUvYXBpL0lPXCI7XG5pbXBvcnQgVmFyaWFibGUgZnJvbSBcIi4uL2NvcmUvYXBpL1ZhcmlhYmxlXCI7XG5pbXBvcnQgcGx1Z2luU3RvcmVJY29uIGZyb20gJy4uL3VpL2Fzc2V0cy9wbHVnaW5TdG9yZS5zdmcnO1xuaW1wb3J0IGRlZmF1bHRJY29uIGZyb20gXCIuLi91aS9hc3NldHMvZGVmYXVsdC5zdmdcIjtcbmltcG9ydCBJMThuIGZyb20gXCIuLi9jb3JlL2FwaS9JMThuXCI7XG52YXIgUGx1Z2luU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGx1Z2luU3RvcmUoKSB7XG4gICAgICAgIHRoaXMubWFuaWZlc3QgPSB7XG4gICAgICAgICAgICBpY29uOiBwbHVnaW5TdG9yZUljb24sXG4gICAgICAgICAgICBuYW1lOiAnUGx1Z2luIFN0b3JlJyxcbiAgICAgICAgICAgIGlkOiAnQHdlbnppNzc3Ny9hY2V2Ml9wbHVnaW5fc3RvcmUnLFxuICAgICAgICAgICAgdmVyc2lvbnM6IFsnMC4wLjEnXSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQWNGdW4gRXZvbHZlZCBWMiDmj5Lku7bllYblupfjgIInLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wOC0wOScpLmdldFRpbWUoKSArICcnLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLmdldFRpbWUoKSArICcnLFxuICAgICAgICAgICAgYXV0aG9yOiAnd2Vuemk3Nzc3JyxcbiAgICAgICAgICAgIGNvcHlyaWdodDogJyhjKTIwMjQgd2Vuemk3Nzc3LCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuJyxcbiAgICAgICAgICAgIHJlcXVlc3RlZEFQSXM6IFtdLFxuICAgICAgICAgICAgd2Vic2l0ZTogJ2h0dHBzOi8vYWNldjIuMTIwNS5tb2UvJyxcbiAgICAgICAgICAgIHRyaWdnZXI6IHtcbiAgICAgICAgICAgICAgICByZWNlaXZlSGFuZGxlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtYXRjaGVzOiBbJyonXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSAnJztcbiAgICAgICAgdGhpcy50cmFja2VyID0gJyc7XG4gICAgICAgIHRoaXMuY2FudmFzID0gW107XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxO1xuICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSAxMDtcbiAgICAgICAgdGhpcy5iaWdNYW5pZmVzdCA9IG51bGw7XG4gICAgfVxuICAgIFBsdWdpblN0b3JlLnByb3RvdHlwZS53YWtlVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIElQQy5saXN0ZW4oeyBjaGFubmVsOiAncnVudGltZTpsYXVuY2hwYWQnLCBoYW5kbGVyOiBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gX3RoaXMucmVuZGVyKGRhdGEpOyB9LCBtYW5pZmVzdDogdGhpcy5tYW5pZmVzdCB9KTtcbiAgICB9O1xuICAgIFBsdWdpblN0b3JlLnByb3RvdHlwZS5nZXRCaWdNYW5pZmVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBpdGVtcztcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIElPLmdldEpzb24oeyB1cmw6IFZhcmlhYmxlLmJpZ01hbmlmZXN0VVJMKCkgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5iaWdNYW5pZmVzdCA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gKF9iID0gdGhpcy5iaWdNYW5pZmVzdCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxQYWdlcyA9IE1hdGguY2VpbChpdGVtcyB8fCAxIC8gVmFyaWFibGUuUEFHRV9TSVpFKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFBsdWdpblN0b3JlLnByb3RvdHlwZS51cGRhdGVDYW52YXMgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICB2YXIgbmV3QXBwTGlzdDtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgX2MsIF9kLCBfZTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZSA9IF9iLmN1cnJlbnRQYWdlLCB0b3RhbFBhZ2VzID0gX2IudG90YWxQYWdlcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2YpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9mLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRCaWdNYW5pZmVzdCgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Yuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgoX2MgPSB0aGlzLmJpZ01hbmlmZXN0KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubGVuZ3RoKSA+IFZhcmlhYmxlLlBBR0VfU0laRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmlnTWFuaWZlc3QgPSAoX2QgPSB0aGlzLmJpZ01hbmlmZXN0KSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Quc2xpY2UoKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIFZhcmlhYmxlLlBBR0VfU0laRSwgdGhpcy5jdXJyZW50UGFnZSAqIFZhcmlhYmxlLlBBR0VfU0laRSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdBcHBMaXN0ID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NpemVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVPYmplY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAoX2UgPSB0aGlzLmJpZ01hbmlmZXN0KSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IGl0ZW0uaWNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc1NWRyA9IGljb24uc3RhcnRzV2l0aCgnPHN2ZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzRGVmYXVsdEljb24gPSBpY29uID09PSAnZGVmYXVsdCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gaXNTVkcgPyBpY29uIDogaXNEZWZhdWx0SWNvbiA/IGRlZmF1bHRJY29uIDogaWNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NpemVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZU9iamVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46ICcxMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogc3JjLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNIVE1MOiBpc1NWR1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5uYW1lICsgJyAnICsgaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGl0ZW0uZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NpemVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVPYmplY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzgwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4R3JvdzogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogbmV3QXBwTGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2l6ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZU9iamVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMjAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXhHcm93OiAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3BhZ2luYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBjdXJyZW50UGFnZSB8fCB0aGlzLmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUGFnZXM6IHRvdGFsUGFnZXMgfHwgdGhpcy50b3RhbFBhZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUGFnZUNoYW5nZTogZnVuY3Rpb24gKHBhZ2UpIHsgcmV0dXJuIF90aGlzLmN1cnJlbnRQYWdlICs9IDE7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFBsdWdpblN0b3JlLnByb3RvdHlwZS5vcGVuRGV0YWlsc1BhbmVsID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBtYW5pZmVzdCA9IF9hLm1hbmlmZXN0O1xuICAgICAgICB2YXIgaWNvbiA9IG1hbmlmZXN0Lmljb247XG4gICAgICAgIHZhciBpc1NWRyA9IGljb24uc3RhcnRzV2l0aCgnPHN2ZycpO1xuICAgICAgICB2YXIgaXNEZWZhdWx0SWNvbiA9IGljb24gPT09ICdkZWZhdWx0JztcbiAgICAgICAgdmFyIHNyYyA9IGlzU1ZHID8gaWNvbiA6IGlzRGVmYXVsdEljb24gPyBkZWZhdWx0SWNvbiA6IGljb247XG4gICAgICAgIHZhciBkZXRhaWxQYW5lbFRyYWNrZXIgPSBNYW5hZ2VyLnJlbmRlclVJKHtcbiAgICAgICAgICAgIGNhbnZhczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NpemVyJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVPYmplY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpJbmRleDogOTksXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICc1MCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAnNTAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzcwdncnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAnNjB2aCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZmlsbGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NpemVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZU9iamVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXA6ICcxdmgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1hcm91bmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnMXZ3J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NpemVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlT2JqZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzaXplcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlT2JqZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzMycHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMzJweCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzSFRNTDogaXNTVkcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBzcmNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBJMThuLnQoeyBrZXk6ICdkZXZlbG9wZXInIH0pICsgJyAnICsgbWFuaWZlc3QuYXV0aG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtYW5pZmVzdC5uYW1lICsgJyB8ICcgKyBtYW5pZmVzdC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzaXplcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NpemVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzaXplcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IEkxOG4udCh7IGtleTogJ2luc3RhbGwnIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnM6IFtmdW5jdGlvbiAoKSB7IHJldHVybiBjb25zb2xlLmxvZyhtYW5pZmVzdCk7IH1dXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2l6ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogOCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogM1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBJMThuLnQoeyBrZXk6ICdjYW5jZWwnIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnM6IFtmdW5jdGlvbiAoKSB7IHJldHVybiBNYW5hZ2VyLnVubW91bnRVSSh7IHRyYWNrZXI6IGRldGFpbFBhbmVsVHJhY2tlciB9KTsgfV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSwgc2xvdDogJ3BsdWdpbnMnXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUGx1Z2luU3RvcmUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGRhdGEudHlwZSA9PT0gJ3BsdWdpblN0YXJ0ZWQnKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShkYXRhLm1hbmlmZXN0LmlkID09PSB0aGlzLm1hbmlmZXN0LmlkKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBBQ0VWMkxvYWRlci5kcmF3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnVwZGF0ZUNhbnZhcyh7fSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXIgPSBkYXRhLmhhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZXIgPSBNYW5hZ2VyLnJlbmRlclVJKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXM6IHRoaXMuY2FudmFzLCBzbG90OiB0aGlzLmhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgQUNFVjJMb2FkZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUGx1Z2luU3RvcmU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgbmV3IFBsdWdpblN0b3JlKCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/plugins/PluginStore.ts\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("6bb42724bbb7fa2e6b73")
/******/ })();
/******/ 
/******/ }
);